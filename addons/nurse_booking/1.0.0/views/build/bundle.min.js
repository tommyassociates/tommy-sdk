!function a(r,c,l){function u(n,e){if(!c[n]){if(!r[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(d)return d(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var i=c[n]={exports:{}};r[n][0].call(i.exports,function(e){return u(r[n][1][e]||e)},i,i.exports,a,r,c,l)}return c[n].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)u(l[e]);return u}({1:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=window.tommy.api,i={cache:{services:[],coupons:[],locations:[],booking:{}},getServiceList:function(e){return o.call({endpoint:"vendors/1/products",method:"GET",data:{}}).then(function(e){return i.cache.services=e})},getCouponList:function(e){return o.call({endpoint:"vendors/1/coupons",method:"GET",data:{}}).then(function(e){return i.cache.coupons=e})},getLocations:function(){return o.call({endpoint:"addons/nurse_booking/install/settings/locations",method:"GET"}).then(function(e){return i.cache.locations=e.data&&e.data.locations?e.data.locations:[],i.cache.locations})},saveLocations:function(e){return e?i.cache.locations=e:e=i.cache.locations,o.call({endpoint:"addons/nurse_booking/install/settings/locations",method:"PUT",data:{data:JSON.stringify({locations:e})}}).then(function(e){return e.data.locations})},addLocation:function(e){return e.default?(i.cache.locations.forEach(function(e){e.default=!1}),i.cache.locations.unshift(e)):i.cache.locations.push(e),i.saveLocations(i.cache.locations)},removeLocation:function(e){return i.cache.locations.splice(e,1),i.saveLocations(i.cache.locations)}};t.default=i},{}],2:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=e("../api"),a=(o=i)&&o.__esModule?o:{default:o};var l=window.tommy,r={init:function(e){r.renderDates(),r.renderHours(),r.bind(e)},bind:function(e){r.page=e;var i=$$(e.container);i.on("change",'input[name="date-time-date"]',function(e){r.renderHours(new Date(parseInt(e.target.value,10)))}),i.on("click",".date-time-select-button",function(e){var n=i.find('input[name="date-time-date"]:checked').val(),t=i.find('input[name="date-time-hours"]:checked').val();a.default.cache.booking.date=new Date(parseInt(n,10)).getTime()+60*t*60*1e3;var o=l.util.addonAssetUrl(Template7.global.currentAddonInstall.package,Template7.global.currentAddonInstall.version,"views/order-confirm.html",!0);l.app.f7.views.main.loadPage({url:o})})},renderDates:function(){for(var e=(new Date).getTime(),n=[],t=0;t<=13;t+=1){var o=new Date(e+24*t*60*60*1e3),i=o.getMonth()+1,a=o.getDate();a<10&&(a="0"+a),i<10&&(i="0"+i);var r=o.getDay();n.push({value:new Date(o.getFullYear(),o.getMonth(),o.getDate()).getTime(),day:a,month:i,weekDay:l.i18n.t("date_time.week_days."+r),today:0===t})}l.tplManager.renderInline("nurse_booking__dateTimeDatesTemplate",{dates:n})},renderHours:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Date,n=[],t=new Date,o=void 0,i=void 0;t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&(o=!0);for(var a=10;a<=19;a+=1){var r=!!o&&t.getHours()>=a,c=!1;r||i||(i=c=!0),n.push({value:a,disabled:r,checked:c,hour:a+":00"})}l.tplManager.renderInline("nurse_booking__dateTimeHoursTemplate",{hours:n})},uninit:function(){r.page=null,delete r.page}};t.default=r},{"../api":1}],3:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=e("../api");(o=i)&&o.__esModule;var a={init:function(e){console.log("initialize nurse booking addon"),a.bind(e);var n=$$(e.container);window.tommy.app.f7.swiper(n.find(".swiper-container"),{pagination:".swiper-pagination"})},bind:function(e){a.page=e},uninit:function(){a.page=null,delete a.page,console.log("uninitialize wallet addon")}};t.default=a},{"../api":1}],4:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=e("../api"),l=(o=i)&&o.__esModule?o:{default:o};var u=window.tommy,d={init:function(e){d.loadLocations(),d.bind(e)},bind:function(e){d.page=e;var n=$$(e.container),r=u.app.f7,c=l.default.cache.booking.service;n.on("click",".location-delete-button",function(){var e=parseInt($$(this).attr("data-location-index"),10);l.default.removeLocation(e).then(function(){d.render()})}),n.on("click",".location-save-button",function(e){var n=$$(this).parents(".location-add-form"),t=n.find('input[name="city"]').val().trim(),o=n.find('textarea[name="address"]').val().trim(),i=n.find('input[name="default"]').prop("checked");if(t&&o){var a=void 0;(c.data.available_in||c.data.availabile_in||[]).forEach(function(e){e.toLowerCase()===t.toLowerCase()&&(a=!0)}),a?l.default.addLocation({city:t,address:o,default:i}).then(function(){d.render()}):r.alert(u.i18n.t("location.not_available"))}}),n.on("click",".location-add-button",function(e){n.find(".page-content").append(u.tplManager.render("nurse_booking__locationsTemplate",{locations:[]})),n.find(".location-add-button").hide()}),n.on("click",".location-select-button",function(e){var n=parseInt($$(this).attr("data-location-index"),10),t=l.default.cache.locations[n],o=t.city,i=void 0;if((c.data.available_in||c.data.availabile_in||[]).forEach(function(e){e.toLowerCase()===o.toLowerCase()&&(i=!0)}),i){var a=u.util.addonAssetUrl(Template7.global.currentAddonInstall.package,Template7.global.currentAddonInstall.version,"views/date-time.html",!0);l.default.cache.booking.location=t,r.views.main.loadPage({url:a})}else r.alert(u.i18n.t("location.not_available"))})},loadLocations:function(){l.default.getLocations().then(function(){d.render()})},render:function(){u.tplManager.renderInline("nurse_booking__locationsTemplate",{locations:l.default.cache.locations})},uninit:function(){d.page=null,delete d.page}};t.default=d},{"../api":1}],5:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=e("../api"),a=(o=i)&&o.__esModule?o:{default:o};var r=window.tommy,c={init:function(e){c.bind(e),c.render()},bind:function(e){c.page=e;$$(e.container)},render:function(){var e=a.default.cache.booking,n=e.service,t=e.coupon,o=e.location,i=e.date;r.tplManager.renderInline("nurse_booking__orderConfirmTemplate",{user:window.tommy.config.getCurrentUser(),service:n,coupon:t,total:n.price-(t?t.amount:0),location:o,date:i})},uninit:function(){c.page=null,delete c.page}};t.default=c},{"../api":1}],6:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=o(e("../api")),l=o(e("../coupon-picker"));function o(e){return e&&e.__esModule?e:{default:e}}var u=window.tommy,d={init:function(e){d.bind(e)},bind:function(e){d.page=e;var n=$$(e.container),t=u.app.f7,o=e.query.id,i={},a=void 0;(c.default.cache.services||[]).forEach(function(e){e.id===parseInt(o,10)&&((i=e).coupons=c.default.cache.coupons.filter(function(e){return e.vendor_product_id===i.id}))}),$$(e.navbarInnerContainer).find(".center").text(i.name),t.sizeNavbars();var r=u.util.addonAssetUrl(Template7.global.currentAddonInstall.package,Template7.global.currentAddonInstall.version,"views/location.html",!0);u.tplManager.renderTarget("nurse_booking__serviceDetailsTemplate",{service:i},e.container),t.swiper(n.find(".swiper-container"),{pagination:".swiper-pagination"}),$$(e.container).on("click",".service-details-coupons-link",function(){(0,l.default)(i.coupons,function(e){a=e,c.default.cache.booking.service=i,c.default.cache.booking.coupon=a,t.views.main.loadPage({url:r})},function(){a=void 0})}),$$(e.container).on("click",".service-book-button",function(){(c.default.cache.booking.service=i).coupons&&i.coupons.length?(0,l.default)(i.coupons,function(e){a=e,c.default.cache.booking.service=i,c.default.cache.booking.coupon=a,t.views.main.loadPage({url:r})},function(){c.default.cache.booking.coupon=null,delete c.default.cache.booking.coupon,a=void 0,t.views.main.loadPage({url:r})}):(c.default.cache.booking.coupon=null,delete c.default.cache.booking.coupon,a=void 0,t.views.main.loadPage({url:r}))})},uninit:function(){d.page=null,delete d.page}};t.default=d},{"../api":1,"../coupon-picker":8}],7:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,l=function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var t=[],o=!0,i=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(o=(r=c.next()).done)&&(t.push(r.value),!n||t.length!==n);o=!0);}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}return t}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=e("../api"),u=(o=i)&&o.__esModule?o:{default:o};var d=window.tommy,s={init:function(e){s.bind(e),s.loadServices()},bind:function(e){s.page=e},loadServices:function(){var e=s.page,a=$$(e.container),r=d.app.f7,c=e.query.category;$$(e.navbarInnerContainer).find(".center").text(d.i18n.t("service_list."+c.toLowerCase()+"_title")),r.sizeNavbars(),Promise.all([u.default.getServiceList(),u.default.getCouponList()]).then(function(e){var n=l(e,2),t=n[0],o=n[1],i=t.filter(function(e){return e.category===c});i.forEach(function(n){n.coupons=o.filter(function(e){return e.vendor_product_id===n.id})}),d.tplManager.renderInline("nurse_booking__serviceListTemplate",{services:i}),r.swiper(a.find(".swiper-container"),{centeredSlides:!0,slidesPerView:"auto"})})},uninit:function(){s.page=null,delete s.page}};t.default=s},{"../api":1}],8:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,e,t){var o=window.tommy.app.f7,i=void 0,a=void 0,r=tommy.tplManager.render("nurse_bookink__couponPickerTemplate",{coupons:n}),c=o.modal({afterText:r,buttons:[{text:tommy.i18n.t("coupon_picker.skip_button",{defaultValue:"Skip"}),onClick:function(){t&&t()}},{text:tommy.i18n.t("coupon_picker.confirm_button",{defaultValue:"Confirm"}),bold:!0,onClick:function(){e&&e(a)}}]}),l=$$(c);l.addClass("nurse_booking-coupon-picker-modal"),l.find(".modal-button-bold").addClass("modal-button-disabled"),l.find("input").on("change",function(e){l.find(".modal-button-bold").removeClass("modal-button-disabled"),e.target.checked&&(i=e.target.value,n.forEach(function(e){e.id==parseInt(i,10)&&(a=e)}))})}},{}],9:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e&&o[e]?o[e]:""};var o={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"₼",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"฿",BTN:"Nu.",BWP:"P",BYR:"Br",BYN:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"лв",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",STN:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",YER:"﷼",ZAR:"R",ZWD:"Z$"}},{}],10:[function(e,n,t){"use strict";var o=d(e("./currency-map")),i=(d(e("./coupon-picker")),d(e("./controllers/index"))),a=d(e("./controllers/service-list")),r=d(e("./controllers/service-details")),c=d(e("./controllers/location")),l=d(e("./controllers/date-time")),u=d(e("./controllers/order-confirm"));function d(e){return e&&e.__esModule?e:{default:e}}var s=window.tommy.app,f=s.f7,p=s.t7;f.onPageInit("nurse_booking__index",i.default.init),f.onPageBeforeRemove("nurse_booking__index",i.default.uninit),f.onPageInit("nurse_booking__service-list",a.default.init),f.onPageBeforeRemove("nurse_booking__service-list",a.default.uninit),f.onPageInit("nurse_booking__service-details",r.default.init),f.onPageBeforeRemove("nurse_booking__service-details",r.default.uninit),f.onPageInit("nurse_booking__location",c.default.init),f.onPageBeforeRemove("nurse_booking__location",c.default.uninit),f.onPageInit("nurse_booking__date-time",l.default.init),f.onPageBeforeRemove("nurse_booking__date-time",l.default.uninit),f.onPageInit("nurse_booking__order-confirm",u.default.init),f.onPageBeforeRemove("nurse_booking__order-confirm",u.default.uninit),p.registerHelper("nurse_booking__currencySymbol",function(e){return(0,o.default)(e)})},{"./controllers/date-time":2,"./controllers/index":3,"./controllers/location":4,"./controllers/order-confirm":5,"./controllers/service-details":6,"./controllers/service-list":7,"./coupon-picker":8,"./currency-map":9}]},{},[10]);