var addon=function(e){var t={};function s(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}return s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([,function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("f7-page",{staticClass:"myprogress-page myprogress-home-page"},[s("f7-navbar",[s("tommy-nav-menu"),e._v(" "),s("f7-nav-title",[e._v(e._s(e.$t("myprogress.index.title")))])],1),e._v(" "),e.items?s("f7-progressbar",{staticClass:"myprogress-progressbar",attrs:{slot:"static",progress:e.itemsProgress},slot:"static"}):e._e(),e._v(" "),e.items?s("div",{staticClass:"myprogress-progress"},[e._v(e._s(e.itemsProgressCount)+"/10")]):e._e(),e._v(" "),e.items?s("div",{staticClass:"myprogress-list"},[s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("1.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label"},[e._v(e._s(e.$t("myprogress.points.training")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.training.checked},on:{change:function(t){return e.toggleItem("training")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("2.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label",on:{click:function(t){e.nationalIdOpened=!0}}},[e._v(e._s(e.$t("myprogress.points.national_id")))]),e._v(" "),e.items.national_id.files?s("div",{staticClass:"myprogress-item-uploads"},e._l(e.items.national_id.files,(function(t,i){return s("div",{key:i,staticClass:"myprogress-item-upload",style:"background-image: url("+e.fileUrl(t)+")",on:{click:function(s){return e.previewImage(t,s)}}},[s("span",{staticClass:"myprogress-item-delete",on:{click:function(s){return e.deleteImage("national_id",t)}}})])})),0):e._e(),e._v(" "),e.items.national_id.checked?e._e():s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.nationalIdOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.upload")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.national_id.checked},on:{change:function(t){return e.toggleItem("national_id")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("3.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label",on:{click:function(t){e.profilePhotoOpened=!0}}},[e._v(e._s(e.$t("myprogress.points.profile_photo")))]),e._v(" "),e.items.profile_photo.files?s("div",{staticClass:"myprogress-item-uploads"},e._l(e.items.profile_photo.files,(function(t,i){return s("div",{key:i,staticClass:"myprogress-item-upload",style:"background-image: url("+e.fileUrl(t)+")",on:{click:function(s){return e.previewImage(t,s)}}},[s("span",{staticClass:"myprogress-item-delete",on:{click:function(s){return e.deleteImage("profile_photo",t)}}})])})),0):e._e(),e._v(" "),e.items.profile_photo.checked?e._e():s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.profilePhotoOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.upload")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.profile_photo.checked},on:{change:function(t){return e.toggleItem("profile_photo")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("4.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label",on:{click:function(t){e.healthCertOpened=!0}}},[e._v(e._s(e.$t("myprogress.points.health_cert")))]),e._v(" "),e.items.health_cert.files?s("div",{staticClass:"myprogress-item-uploads"},e._l(e.items.health_cert.files,(function(t,i){return s("div",{key:i,staticClass:"myprogress-item-upload",style:"background-image: url("+e.fileUrl(t)+")",on:{click:function(s){return e.previewImage(t,s)}}},[s("span",{staticClass:"myprogress-item-delete",on:{click:function(s){return e.deleteImage("health_cert",t)}}})])})),0):e._e(),e._v(" "),e.items.health_cert.checked?e._e():s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.healthCertOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.upload")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.health_cert.checked},on:{change:function(t){return e.toggleItem("health_cert")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("5.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label",on:{click:function(t){e.addressOpened=!0}}},[e._v(e._s(e.$t("myprogress.points.address")))]),e._v(" "),e.items.address.city&&e.items.address.address?s("div",{staticClass:"myprogress-item-data"},[s("div",[e._v(e._s(e.items.address.city)+" "+e._s(e.items.address.address))]),e._v(" "),e.items.address.size?s("div",[e._v(e._s(e.$t("myprogress.upload.address_size_"+e.items.address.size)))]):e._e()]):e._e(),e._v(" "),e.items.address.checked?e._e():s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.addressOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.fill_address")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.address.checked},on:{change:function(t){return e.toggleItem("address")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("6.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label",on:{click:function(t){e.residentialPermitOpened=!0}}},[e._v(e._s(e.$t("myprogress.points.residential_permit")))]),e._v(" "),e.items.residential_permit.files?s("div",{staticClass:"myprogress-item-uploads"},e._l(e.items.residential_permit.files,(function(t,i){return s("div",{key:i,staticClass:"myprogress-item-upload",style:"background-image: url("+e.fileUrl(t)+")",on:{click:function(s){return e.previewImage(t,s)}}},[s("span",{staticClass:"myprogress-item-delete",on:{click:function(s){return e.deleteImage("residential_permit",t)}}})])})),0):e._e(),e._v(" "),e.items.residential_permit.checked?e._e():s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.residentialPermitOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.upload")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.residential_permit.checked},on:{change:function(t){return e.toggleItem("residential_permit")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("7.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label"},[e._v(e._s(e.$t("myprogress.points.approval"))+" "),e.isPendingApproval?s("span",{staticClass:"myprogress-pending-label"},[e._v("("+e._s(e.$t("myprogress.index.pending"))+")")]):e._e()])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.approval.checked},on:{change:function(t){return e.toggleItem("approval")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("8.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label"},[e._v(e._s(e.$t("myprogress.points.sign_contract")))]),e._v(" "),7===e.itemsProgressCount?s("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(t){e.contractOpened=!0}}},[e._v(e._s(e.$t("myprogress.index.view_contract")))]):e._e()]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.sign_contract.checked},on:{change:function(t){return e.toggleItem("sign_contract")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("9.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label"},[e._v(e._s(e.$t("myprogress.points.receive_tuome_bag")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.receive_tuome_bag.checked},on:{change:function(t){return e.toggleItem("receive_tuome_bag")}}}),e._v(" "),s("i")])])]),e._v(" "),s("div",{staticClass:"myprogress-list-item"},[s("div",{staticClass:"myprogress-item-number"},[e._v("10.")]),e._v(" "),s("div",{staticClass:"myprogress-item-content"},[s("div",{staticClass:"myprogress-item-label"},[e._v(e._s(e.$t("myprogress.points.the_first_job")))])]),e._v(" "),s("div",{staticClass:"myprogress-item-checkbox"},[s("label",{staticClass:"myprogress-checkbox",class:{disabled:e.isNurse}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.items.the_first_job.checked},on:{change:function(t){return e.toggleItem("the_first_job")}}}),e._v(" "),s("i")])])])]):e._e(),e._v(" "),e.profilePhotoOpened?s("UploadPopup",{attrs:{slot:"fixed",title:e.$t("myprogress.upload.profile_photo_title"),intro:e.$t("myprogress.upload.profile_photo_intro"),reminder:e.$t("myprogress.upload.profile_photo_reminder"),reminderImageSrc:e.$addonAssetsUrl+"/reminder_profile_photo.png",uploadText:e.$t("myprogress.upload.profile_photo_upload_text")},on:{closed:function(t){e.profilePhotoOpened=!1},uploaded:function(t){return e.updateUploaded("profile_photo",t)}},slot:"fixed"}):e._e(),e._v(" "),e.healthCertOpened?s("UploadPopup",{attrs:{slot:"fixed",title:e.$t("myprogress.upload.health_cert_title"),intro:e.$t("myprogress.upload.health_cert_intro"),reminder:e.$t("myprogress.upload.health_cert_reminder"),reminderImageSrc:e.$addonAssetsUrl+"/reminder_health_cert.png",uploadText:e.$t("myprogress.upload.health_cert_upload_text"),multipleUpload:!0},on:{uploaded:function(t){return e.updateUploaded("health_cert",t)},closed:function(t){e.healthCertOpened=!1}},slot:"fixed"}):e._e(),e._v(" "),e.nationalIdOpened?s("UploadPopup",{attrs:{slot:"fixed",title:e.$t("myprogress.upload.national_id_title"),intro:e.$t("myprogress.upload.national_id_intro"),reminder:e.$t("myprogress.upload.national_id_reminder"),reminderImageSrc:e.$addonAssetsUrl+"/reminder_national_id.png",uploadText:e.$t("myprogress.upload.national_id_upload_text"),multipleUpload:!0},on:{uploaded:function(t){return e.updateUploaded("national_id",t)},closed:function(t){e.nationalIdOpened=!1}},slot:"fixed"}):e._e(),e._v(" "),e.residentialPermitOpened?s("UploadPopup",{attrs:{slot:"fixed",title:e.$t("myprogress.upload.residential_permit_title"),intro:e.$t("myprogress.upload.residential_permit_intro"),reminder:e.$t("myprogress.upload.residential_permit_reminder"),reminderImageSrc:e.$addonAssetsUrl+"/reminder_residential_permit.png",uploadText:e.$t("myprogress.upload.residential_permit_upload_text"),multipleUpload:!0},on:{uploaded:function(t){return e.updateUploaded("residential_permit",t)},closed:function(t){e.residentialPermitOpened=!1}},slot:"fixed"}):e._e(),e._v(" "),e.addressOpened?s("AddressPopup",{attrs:{slot:"fixed",cityInitial:e.items.address.city,addressInitial:e.items.address.address,sizeInitial:e.items.address.size},on:{save:e.saveAddress,closed:function(t){e.addressOpened=!1}},slot:"fixed"}):e._e(),e._v(" "),e.contractOpened?s("ContractPopup",{attrs:{slot:"fixed"},on:{submit:e.submitContract,closed:function(t){e.contractOpened=!1}},slot:"fixed"}):e._e()],1)};i._withStripped=!0;var r=window.tommy.api,o={getData:function(e){return r.getFragments({addon:"myprogress",kind:"Myprogress",with_filters:!0,with_permission_to:!0,actor_id:e,user_id:e,with_attachments:!0})},saveData:function(e,t){return t.attachments&&t.attachments.length&&(t.attachments=t.attachments.filter((function(e){return"string"==typeof e}))),t.id?(t.with_attachments=!0,r.updateFragment(t.id,t,{dataType:"json",contentType:"application/json",processData:!1})):r.createFragment({with_attachments:!0,addon:"myprogress",kind:"Myprogress",with_filters:!0,with_permission_to:!0,data:t.data,attachments:t.attachments,actor_id:e,user_id:e},{dataType:"json",contentType:"application/json",processData:!1})}},a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("f7-popup",{attrs:{opened:e.opened},on:{"popup:closed":e.onClosed}},[s("f7-view",{attrs:{init:!1}},[s("f7-page",{staticClass:"myprogress-upload"},[s("f7-navbar",[s("f7-nav-title",[e._v(e._s(e.title))]),e._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),e._v(" "),"step-1"===e.step?s("div",{staticClass:"myprogress-upload-button",attrs:{slot:"fixed"},on:{click:function(t){return e.setStep("step-2")}},slot:"fixed"},[e._v(e._s(e.$t("myprogress.upload.button_upload")))]):e._e(),e._v(" "),"step-2"===e.step?s("div",{staticClass:"myprogress-upload-button",class:{disabled:e.uploading||e.files.length<(e.multipleUpload?2:1)},attrs:{slot:"fixed"},on:{click:function(t){return e.setStep("step-3")}},slot:"fixed"},[e._v(e._s(e.$t("myprogress.upload.button_submit")))]):e._e(),e._v(" "),"step-3"===e.step?s("div",{staticClass:"myprogress-upload-button popup-close",attrs:{slot:"fixed"},slot:"fixed"},[e._v(e._s(e.$t("myprogress.upload.button_next")))]):e._e(),e._v(" "),"step-1"===e.step?[s("div",{staticClass:"myprogress-upload-intro",domProps:{innerHTML:e._s(e.intro.replace(/\n/g,"<br>"))}}),e._v(" "),s("div",{staticClass:"myprogress-upload-reminder-label"},[e._v(e._s(e.$t("myprogress.upload.reminder_label"))+":")]),e._v(" "),s("div",{staticClass:"myprogress-upload-reminder-image"},[s("img",{attrs:{src:e.reminderImageSrc}})]),e._v(" "),s("div",{staticClass:"myprogress-upload-reminder-text"},[e._v(e._s(e.reminder))])]:e._e(),e._v(" "),"step-2"===e.step?[s("div",{staticClass:"myprogress-upload-text"},[e._v(e._s(e.uploadText))]),e._v(" "),e.multipleUpload?s("f7-swiper",{ref:"swiper",attrs:{params:{speed:500}}},[s("f7-swiper-slide",[s("label",{staticClass:"myprogress-upload-camera",class:{"has-uploads":!!e.files[0]}},[e.files[0]?e._e():[s("i"),e._v(" "),s("span",[e._v(e._s(e.$t("myprogress.upload.add_photos_label")))])],e._v(" "),e.previews[0]?[s("img",{attrs:{src:e.previews[0]}})]:e._e(),e._v(" "),s("input",{attrs:{type:"file",accept:"image/*",capture:""},on:{change:function(t){return e.onFilesChange(t,0)}}})],2)]),e._v(" "),s("f7-swiper-slide",[s("label",{staticClass:"myprogress-upload-camera",class:{"has-uploads":!!e.files[1]}},[e.files[1]?e._e():[s("i"),e._v(" "),s("span",[e._v(e._s(e.$t("myprogress.upload.add_photos_label")))])],e._v(" "),e.previews[1]?[s("img",{attrs:{src:e.previews[1]}})]:e._e(),e._v(" "),s("input",{attrs:{type:"file",accept:"image/*",capture:""},on:{change:function(t){return e.onFilesChange(t,1)}}})],2)])],1):s("label",{staticClass:"myprogress-upload-camera",class:{"has-uploads":e.files.length>0}},[0===e.files.length?[s("i"),e._v(" "),s("span",[e._v(e._s(e.$t("myprogress.upload.add_photos_label")))])]:e._e(),e._v(" "),e.previews.length>0?[s("img",{key:e.index,attrs:{src:e.previews[0]}})]:e._e(),e._v(" "),s("input",{attrs:{type:"file",accept:"image/*",capture:""},on:{change:function(t){return e.onFilesChange(t,0)}}})],2)]:e._e(),e._v(" "),"step-3"===e.step?[s("div",{staticClass:"myprogress-upload-text"},[e._v(e._s(e.uploadText))]),e._v(" "),s("div",{staticClass:"myprogress-thank-you"},[s("i"),e._v(" "),s("span",[e._v(e._s(e.$t("myprogress.upload.thank_you_label")))])])]:e._e()],2)],1)],1)};function n(e){return function(e){if(Array.isArray(e)){for(var t=0,s=new Array(e.length);t<e.length;t++)s[t]=e[t];return s}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e,t,s,i,r,o,a,n){var l,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),i&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=l):r&&(l=n?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(d.functional){d._injectStyles=l;var c=d.render;d.render=function(e,t){return l.call(t),c(e,t)}}else{var p=d.beforeCreate;d.beforeCreate=p?[].concat(p,l):[l]}return{exports:e,options:d}}a._withStripped=!0;var d=l({props:{title:String,intro:String,reminder:String,reminderImageSrc:String,uploadText:String,multipleUpload:{type:Boolean,default:!1}},data:function(){return{opened:!1,step:"step-1",uploads:[],files:[],previews:[],uploading:!1}},watch:{files:function(){var e=this,t=e.files;e.previews=[],t.forEach((function(t,s){if(t){var i=new FileReader;i.onload=function(t){e.$set(e.previews,s,t.target.result)},i.readAsDataURL(t)}}))}},mounted:function(){var e=this;this.$nextTick((function(){e.opened=!0}))},methods:{stepBack:function(){},setStep:function(e){var t=this;"step-3"!==e?t.step=e:t.uploadFiles().then((function(){t.step=e}))},uploadFiles:function(){var e=this;return e.uploading=!0,new Promise((function(t,s){return Promise.all(e.files.map((function(t){return e.$api.uploadFiles([t])}))).then((function(s){var i=[];s.forEach((function(e){i.push.apply(i,n(e))})),e.$emit("uploaded",i),t(s)})).catch((function(e){s(e),console.error(e)}))}))},onFilesChange:function(e,t){var s=this;s.$set(s.files,t,e.target.files[0]),s.$nextTick((function(){0===t&&!s.files[1]&&s.multipleUpload&&s.$refs.swiper.swiper.slideNext(),1===t&&!s.files[0]&&s.multipleUpload&&s.$refs.swiper.swiper.slidePrev()}))},onClosed:function(){this.$emit("closed")}}},a,[],!1,null,null,null);d.options.__file="addons/myprogress/1.0.0/src/pages/upload-popup.vue";var c=d.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("f7-popup",{attrs:{opened:e.opened},on:{"popup:closed":e.onClosed}},[s("f7-view",{attrs:{init:!1}},[s("f7-page",{staticClass:"myprogress-upload myprogress-address-page"},[s("f7-navbar",[s("f7-nav-title",[e._v(e._s(e.$t("myprogress.upload.address_title")))]),e._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),e._v(" "),"step-1"===e.step?s("div",{staticClass:"myprogress-upload-button",attrs:{slot:"fixed"},on:{click:function(t){return e.setStep("step-2")}},slot:"fixed"},[e._v(e._s(e.$t("myprogress.upload.button_continue")))]):e._e(),e._v(" "),"step-1"===e.step?[s("div",{staticClass:"myprogress-upload-intro"},[s("p",[s("img",{attrs:{src:e.$addonAssetsUrl+"/icon-address.svg"}})]),e._v(" "),s("div",{domProps:{innerHTML:e._s(e.$t("myprogress.upload.address_text").replace(/\n/g,"<br>"))}})])]:e._e(),e._v(" "),"step-2"===e.step?[s("div",{staticClass:"myprogress-address-card"},[s("input",{attrs:{placeholder:e.$t("myprogress.upload.address_city_placeholder"),type:"text"},domProps:{value:e.city},on:{input:function(t){e.city=t.target.value}}}),e._v(" "),s("textarea",{attrs:{placeholder:e.$t("myprogress.upload.address_address_placeholder")},domProps:{value:e.address},on:{input:function(t){e.address=t.target.value}}}),e._v(" "),s("p",{staticClass:"myprogress-address-radios-label"},[e._v(e._s(e.$t("myprogress.upload.address_choose_size")))]),e._v(" "),s("div",{staticClass:"myprogress-address-radios"},[s("div",{staticClass:"myprogress-address-radio",class:{checked:"m"===e.size},on:{click:function(t){e.size="m"}}},[e._v(e._s(e.$t("myprogress.upload.address_size_m")))]),e._v(" "),s("div",{staticClass:"myprogress-address-radio",class:{checked:"l"===e.size},on:{click:function(t){e.size="l"}}},[e._v(e._s(e.$t("myprogress.upload.address_size_l")))]),e._v(" "),s("div",{staticClass:"myprogress-address-radio",class:{checked:"xl"===e.size},on:{click:function(t){e.size="xl"}}},[e._v(e._s(e.$t("myprogress.upload.address_size_xl")))]),e._v(" "),s("div",{staticClass:"myprogress-address-radio",class:{checked:"xxl"===e.size},on:{click:function(t){e.size="xxl"}}},[e._v(e._s(e.$t("myprogress.upload.address_size_xxl")))])]),e._v(" "),s("a",{class:{disabled:!e.city||!e.address||!e.size},on:{click:e.save}},[e._v(e._s(e.$t("myprogress.upload.button_save")))])])]:e._e()],2)],1)],1)};p._withStripped=!0;var m=l({props:{title:String,intro:String,reminder:String,reminderImageSrc:String,uploadText:String,multipleUpload:{type:Boolean,default:!1},cityInitial:String,addressInitial:String,sizeInitial:String},data:function(){return{opened:!1,step:"step-1",city:this.cityInitial||"",address:this.addressInitial||"",size:this.sizeInitial||""}},mounted:function(){var e=this;this.$nextTick((function(){e.opened=!0}))},methods:{save:function(){var e=this.city,t=this.address,s=this.size;this.$emit("save",{city:e,address:t,size:s}),this.$f7.popup.close()},setStep:function(e){var t=this;"step-3"!==e?t.step=e:t.uploadFiles().then((function(){t.step=e}))},onClosed:function(){this.$emit("closed")}}},p,[],!1,null,null,null);m.options.__file="addons/myprogress/1.0.0/src/pages/address-popup.vue";var u=m.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("f7-popup",{attrs:{opened:e.opened},on:{"popup:closed":e.onClosed}},[s("f7-view",{attrs:{init:!1}},[s("f7-page",{staticClass:"myprogress-upload myprogress-contract-page"},[s("f7-navbar",[s("f7-nav-title",[e._v(e._s(e.$t("myprogress.upload.contract_page_title")))]),e._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),e._v(" "),s("div",{staticClass:"myprogress-upload-button",attrs:{slot:"fixed"},on:{click:function(t){return e.sign()}},slot:"fixed"},[e._v(e._s(e.$t("myprogress.upload.contract_page_button")))]),e._v(" "),s("div",{staticClass:"myprogress-contract-title"},[e._v(e._s(e.$t("myprogress.upload.contract_title")))]),e._v(" "),s("div",{staticClass:"myprogress-contract-text",domProps:{innerHTML:e._s(e.$t("myprogress.upload.contract_text"))}})],1)],1)],1)};_._withStripped=!0;var g=l({data:function(){return{opened:!1}},mounted:function(){var e=this;this.$nextTick((function(){e.opened=!0}))},methods:{sign:function(){this.$emit("submit"),this.$f7.popup.close()},onClosed:function(){this.$emit("closed")}}},_,[],!1,null,null,null);g.options.__file="addons/myprogress/1.0.0/src/pages/contract-popup.vue";var v=l({components:{UploadPopup:c,AddressPopup:u,ContractPopup:g.exports},data:function(){return{fragment:null,items:null,actorId:this.$f7route.query.actor_id,profilePhotoOpened:!1,healthCertOpened:!1,residentialPermitOpened:!1,nationalIdOpened:!1,addressOpened:!1,contractOpened:!1}},computed:{isPendingApproval:function(){return 6===this.itemsProgressCount&&this.items.training.checked&&this.items.national_id.checked&&this.items.profile_photo.checked&&this.items.health_cert.checked&&this.items.address.checked&&this.items.residential_permit.checked},itemsProgress:function(){return this.itemsProgressCount/10*100},itemsProgressCount:function(){var e=this;return Object.keys(this.items).filter((function(t){return!0===e.items[t].checked})).length},isNurse:function(){return!(!this.$root.user||"job"!==this.$root.user.onboarding)||(!(!this.$root.account||!("Nurse"===this.$root.account.kind||this.$root.account.roles.indexOf("Nurse")>=0))||(!(!this.$root.account||!("Jobseeker"===this.$root.account.kind||this.$root.account.roles.indexOf("Jobseeker")>=0))||(!(!this.$root.account||!("Employee"===this.$root.account.kind||this.$root.account.roles.indexOf("Employee")>=0))||!(!this.$root.account||this.$root.account.roles&&this.$root.account.roles.length))))}},mounted:function(){this.getData()},methods:{submitContract:function(){this.items.sign_contract.checked=!0,this.saveData()},fileUrl:function(e){var t;try{t=this.fragment.attachments.filter((function(t){return t.signed_id===e.signed_id}))[0].url}catch(s){t="".concat(this.$config.cdnUrl,"/").concat(e.signed_id,"/").concat(e.filename)}return t||""},deleteImage:function(e,t){var s=this.items[e].files.length;this.items[e].files.splice(this.items[e].files.indexOf(t),1);var i=this.items[e].files.length;(0===i||1===i&&2===s)&&(this.items[e].checked=!1),this.fragment.destroy_attachment=t.signed_id||t,this.saveData()},previewImage:function(e,t){var s=this;if(!s.$$(t.target).closest(".myprogress-item-delete").length){var i=s.$f7.photoBrowser.create({photos:[s.fileUrl(e)],toolbar:!1,backLinkText:s.$t("label.back"),type:"standalone",renderNavbar:function(){return'\n            <div class="navbar">\n              <div class="navbar-inner sliding">\n                <div class="left">\n                  <a href="#" class="link popup-close" data-popup=".photo-browser-popup">\n                    <i class="icon icon-back"></i>\n                    <span>'.concat(s.$t("label.back"),'</span>\n                  </a>\n                </div>\n                <div class="right"></div>\n              </div>\n            </div>\n          ')}});i.once("closed",(function(){setTimeout((function(){i.destroy(),i=null}))})),i.open()}},toggleItem:function(e){var t=this;if(t.items[e].checked=!t.items[e].checked,t.saveData(),t.itemsProgressCount>=8&&t.actorId){var s=t.$root.teamMembers.filter((function(e){return e.user_id===parseInt(t.actorId,10)}))[0];if(!s)return;if(s.roles||(s.roles=[]),s.roles.indexOf("Employee")>=0)return;s.roles.indexOf("Jobseeker")>=0&&s.roles.splice(s.roles.indexOf("Jobseeker"),1),s.roles.indexOf("Employee")<0&&s.roles.push("Employee"),t.$api.updateCurrentTeamMember(parseInt(t.actorId,10),s)}},updateUploaded:function(e,t){var s=this;s.items[e].checked=!0,s.items[e].files=t.map((function(e){return s.fragment.attachments?s.fragment.attachments.push(e.signed_id):s.fragment.attachments=[e.signed.id],{signed_id:e.signed_id,filename:e.filename}})),s.saveData()},saveAddress:function(e){var t=e.city,s=e.address,i=e.size;this.items.address.checked=!0,this.items.address.city=t,this.items.address.address=s,this.items.address.size=i,this.saveData()},saveData:function(){var e=this,t=e.fragment;t.data.items=e.items,o.saveData(e.actorId||e.$root.user.id,t).then((function(t){t&&t.id&&(e.fragment=t,e.$set(e,"fragment",t))}))},getData:function(){var e=this;o.getData(e.actorId||e.$root.user.id).then((function(t){t.length?(e.fragment=t[0],e.items=e.fragment.data.items):(e.items={training:{checked:!1},national_id:{checked:!1},profile_photo:{checked:!1},health_cert:{checked:!1},address:{checked:!1},residential_permit:{checked:!1},approval:{checked:!1},sign_contract:{checked:!1},receive_tuome_bag:{checked:!1},the_first_job:{checked:!1}},e.fragment={data:{items:e.items}})}))}}},i,[],!1,null,null,null);v.options.__file="addons/myprogress/1.0.0/src/pages/index.vue";var f=[{path:"/myprogress/",component:v.exports}];t.default=f}]).default;