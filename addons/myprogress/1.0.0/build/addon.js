var addon=function(){var t=window.tommy.api,e=function getData(e){return t.getFragments({addon:"myprogress",kind:"Myprogress",with_filters:!0,with_permission_to:!0,actor_id:e,user_id:e})},i=function saveData(e,s){return s.id?t.updateFragment(s.id,s,{dataType:"json",contentType:"application/json",processData:!1}):t.createFragment({addon:"myprogress",kind:"Myprogress",with_filters:!0,with_permission_to:!0,data:s.data,actor_id:e,user_id:e},{dataType:"json",contentType:"application/json",processData:!1})};return[{path:"/myprogress/",component:{render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("f7-page",{staticClass:"myprogress-page myprogress-home-page"},[t("f7-navbar",[t("tommy-nav-menu"),s._v(" "),t("f7-nav-title",[s._v(s._s(s.$t("myprogress.index.title")))])],1),s._v(" "),s.items?t("f7-progressbar",{staticClass:"myprogress-progressbar",attrs:{slot:"static",progress:s.itemsProgress},slot:"static"}):s._e(),s._v(" "),s.items?t("div",{staticClass:"myprogress-progress"},[s._v(s._s(s.itemsProgressCount)+"/10")]):s._e(),s._v(" "),s.items?t("div",{staticClass:"myprogress-list"},[t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("1.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.training")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.training.checked},on:{change:function(e){s.toggleItem("training")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("2.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.national_id")))]),s._v(" "),t("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(e){s.nationalIdOpened=!0}}},[s._v(s._s(s.$t("myprogress.index.upload")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.national_id.checked},on:{change:function(e){s.toggleItem("national_id")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("3.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.profile_photo")))]),s._v(" "),t("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(e){s.profilePhotoOpened=!0}}},[s._v(s._s(s.$t("myprogress.index.upload")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.profile_photo.checked},on:{change:function(e){s.toggleItem("profile_photo")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("4.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.health_cert")))]),s._v(" "),t("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(e){s.healthCertOpened=!0}}},[s._v(s._s(s.$t("myprogress.index.upload")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.health_cert.checked},on:{change:function(e){s.toggleItem("health_cert")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("5.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.address")))]),s._v(" "),s.items.address.checked&&s.items.address.city&&s.items.address.address?t("div",{staticClass:"myprogress-item-data"},[t("div",[s._v(s._s(s.items.address.city)+" "+s._s(s.items.address.address))])]):s._e(),s._v(" "),t("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(e){s.addressOpened=!0}}},[s._v(s._s(s.$t("myprogress.index.fill_address")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.address.checked},on:{change:function(e){s.toggleItem("address")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("6.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.residential_permit")))]),s._v(" "),t("a",{staticClass:"myprogress-button",attrs:{href:"#"},on:{click:function(e){s.residentialPermitOpened=!0}}},[s._v(s._s(s.$t("myprogress.index.upload")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.residential_permit.checked},on:{change:function(e){s.toggleItem("residential_permit")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("7.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.approval"))+" "),s.isPendingApproval?t("span",{staticClass:"myprogress-pending-label"},[s._v("("+s._s(s.$t("myprogress.index.pending"))+")")]):s._e()])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.approval.checked},on:{change:function(e){s.toggleItem("approval")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("8.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.sign_contract")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.sign_contract.checked},on:{change:function(e){s.toggleItem("sign_contract")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("9.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.receive_tuome_bag")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.receive_tuome_bag.checked},on:{change:function(e){s.toggleItem("receive_tuome_bag")}}}),s._v(" "),t("i")])])]),s._v(" "),t("div",{staticClass:"myprogress-list-item"},[t("div",{staticClass:"myprogress-item-number"},[s._v("10.")]),s._v(" "),t("div",{staticClass:"myprogress-item-content"},[t("div",{staticClass:"myprogress-item-label"},[s._v(s._s(s.$t("myprogress.points.the_first_job")))])]),s._v(" "),t("div",{staticClass:"myprogress-item-checkbox"},[t("label",{staticClass:"myprogress-checkbox",class:{disabled:s.isNurse}},[t("input",{attrs:{type:"checkbox"},domProps:{checked:s.items.the_first_job.checked},on:{change:function(e){s.toggleItem("the_first_job")}}}),s._v(" "),t("i")])])])]):s._e(),s._v(" "),s.profilePhotoOpened?t("UploadPopup",{attrs:{slot:"fixed",title:s.$t("myprogress.upload.profile_photo_title"),intro:s.$t("myprogress.upload.profile_photo_intro"),reminder:s.$t("myprogress.upload.profile_photo_reminder"),reminderImageSrc:s.$addonAssetsUrl+"/reminder_profile_photo.png",uploadText:s.$t("myprogress.upload.profile_photo_upload_text")},on:{closed:function(e){s.profilePhotoOpened=!1}},slot:"fixed"}):s._e(),s._v(" "),s.healthCertOpened?t("UploadPopup",{attrs:{slot:"fixed",title:s.$t("myprogress.upload.health_cert_title"),intro:s.$t("myprogress.upload.health_cert_intro"),reminder:s.$t("myprogress.upload.health_cert_reminder"),reminderImageSrc:s.$addonAssetsUrl+"/reminder_health_cert.png",uploadText:s.$t("myprogress.upload.health_cert_upload_text"),multipleUpload:!0},on:{closed:function(e){s.healthCertOpened=!1}},slot:"fixed"}):s._e(),s._v(" "),s.nationalIdOpened?t("UploadPopup",{attrs:{slot:"fixed",title:s.$t("myprogress.upload.national_id_title"),intro:s.$t("myprogress.upload.national_id_intro"),reminder:s.$t("myprogress.upload.national_id_reminder"),reminderImageSrc:s.$addonAssetsUrl+"/reminder_national_id.png",uploadText:s.$t("myprogress.upload.national_id_upload_text"),multipleUpload:!0},on:{closed:function(e){s.nationalIdOpened=!1}},slot:"fixed"}):s._e(),s._v(" "),s.residentialPermitOpened?t("UploadPopup",{attrs:{slot:"fixed",title:s.$t("myprogress.upload.residential_permit_title"),intro:s.$t("myprogress.upload.residential_permit_intro"),reminder:s.$t("myprogress.upload.residential_permit_reminder"),reminderImageSrc:s.$addonAssetsUrl+"/reminder_residential_permit.png",uploadText:s.$t("myprogress.upload.residential_permit_upload_text"),multipleUpload:!0},on:{closed:function(e){s.residentialPermitOpened=!1}},slot:"fixed"}):s._e(),s._v(" "),s.addressOpened?t("AddressPopup",{attrs:{slot:"fixed"},on:{save:s.saveAddress,closed:function(e){s.addressOpened=!1}},slot:"fixed"}):s._e()],1)},staticRenderFns:[],components:{UploadPopup:{render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("f7-popup",{attrs:{opened:s.opened},on:{"popup:closed":s.onClosed}},[t("f7-view",{attrs:{init:!1}},[t("f7-page",{staticClass:"myprogress-upload"},[t("f7-navbar",[t("f7-nav-title",[s._v(s._s(s.title))]),s._v(" "),t("f7-nav-right",[t("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),s._v(" "),"step-1"===s.step?t("div",{staticClass:"myprogress-upload-button",attrs:{slot:"fixed"},on:{click:function(e){s.setStep("step-2")}},slot:"fixed"},[s._v(s._s(s.$t("myprogress.upload.button_upload")))]):s._e(),s._v(" "),"step-2"===s.step?t("div",{staticClass:"myprogress-upload-button",class:{disabled:!s.files.length||s.uploading},attrs:{slot:"fixed"},on:{click:function(e){s.setStep("step-3")}},slot:"fixed"},[s._v(s._s(s.$t("myprogress.upload.button_submit")))]):s._e(),s._v(" "),"step-3"===s.step?t("div",{staticClass:"myprogress-upload-button popup-close",attrs:{slot:"fixed"},slot:"fixed"},[s._v(s._s(s.$t("myprogress.upload.button_next")))]):s._e(),s._v(" "),"step-1"===s.step?[t("div",{staticClass:"myprogress-upload-intro",domProps:{innerHTML:s._s(s.intro.replace(/\n/g,"<br>"))}}),s._v(" "),t("div",{staticClass:"myprogress-upload-reminder-label"},[s._v(s._s(s.$t("myprogress.upload.reminder_label"))+":")]),s._v(" "),t("div",{staticClass:"myprogress-upload-reminder-image"},[t("img",{attrs:{src:s.reminderImageSrc}})]),s._v(" "),t("div",{staticClass:"myprogress-upload-reminder-text"},[s._v(s._s(s.reminder))])]:s._e(),s._v(" "),"step-2"===s.step?[t("div",{staticClass:"myprogress-upload-text"},[s._v(s._s(s.uploadText))]),s._v(" "),t("label",{staticClass:"myprogress-upload-camera",class:{"has-uploads":0<s.files.length}},[0===s.files.length?[t("i"),s._v(" "),t("span",[s._v(s._s(s.$t("myprogress.upload.add_photos_label")))])]:s._e(),s._v(" "),0<s.previews.length?s._l(s.previews,function(e,s){return t("img",{key:s,attrs:{src:e}})}):s._e(),s._v(" "),t("input",{attrs:{type:"file",multiple:s.multipleUpload},on:{change:s.onFilesChange}})],2)]:s._e(),s._v(" "),"step-3"===s.step?[t("div",{staticClass:"myprogress-upload-text"},[s._v(s._s(s.uploadText))]),s._v(" "),t("div",{staticClass:"myprogress-thank-you"},[t("i"),s._v(" "),t("span",[s._v(s._s(s.$t("myprogress.upload.thank_you_label")))])])]:s._e()],2)],1)],1)},staticRenderFns:[],props:{title:String,intro:String,reminder:String,reminderImageSrc:String,uploadText:String,multipleUpload:{type:Boolean,default:!1}},data:function data(){return{opened:!1,step:"step-1",uploads:[],files:[],previews:[],uploading:!1}},watch:{files:function files(){var i=this,files=i.files;files&&(i.previews=[],files.forEach(function(e,s){var t=new FileReader;t.onload=function(e){i.$set(i.previews,s,e.target.result)},t.readAsDataURL(e)}))}},mounted:function mounted(){var e=this;this.$nextTick(function(){e.opened=!0})},methods:{stepBack:function stepBack(){},setStep:function setStep(e){var s=this;"step-3"!==e?s.step=e:s.uploadFiles().then(function(){s.step=e})},uploadFiles:function uploadFiles(){return this.$api.uploadFiles(this.files).then(function(){return Promise.resolve(!0)})},onFilesChange:function onFilesChange(e){this.files=[];for(var s=0;s<Math.min(2,e.target.files.length);s+=1)this.files.push(e.target.files[s])},onClosed:function onClosed(){this.$emit("closed")}}},AddressPopup:{render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("f7-popup",{attrs:{opened:s.opened},on:{"popup:closed":s.onClosed}},[t("f7-view",{attrs:{init:!1}},[t("f7-page",{staticClass:"myprogress-upload myprogress-address-page"},[t("f7-navbar",[t("f7-nav-title",[s._v(s._s(s.$t("myprogress.upload.address_title")))]),s._v(" "),t("f7-nav-right",[t("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),s._v(" "),"step-1"===s.step?t("div",{staticClass:"myprogress-upload-button",attrs:{slot:"fixed"},on:{click:function(e){s.setStep("step-2")}},slot:"fixed"},[s._v(s._s(s.$t("myprogress.upload.button_continue")))]):s._e(),s._v(" "),"step-1"===s.step?[t("div",{staticClass:"myprogress-upload-intro"},[t("p",[t("img",{attrs:{src:s.$addonAssetsUrl+"/icon-address.svg"}})]),s._v(" "),t("div",{domProps:{innerHTML:s._s(s.$t("myprogress.upload.address_text").replace(/\n/g,"<br>"))}})])]:s._e(),s._v(" "),"step-2"===s.step?[t("div",{staticClass:"myprogress-address-card"},[t("input",{attrs:{placeholder:s.$t("myprogress.upload.address_city_placeholder"),type:"text"},domProps:{value:s.city},on:{input:function(e){s.city=e.target.value}}}),s._v(" "),t("textarea",{attrs:{placeholder:s.$t("myprogress.upload.address_address_placeholder")},domProps:{value:s.address},on:{input:function(e){s.address=e.target.value}}}),s._v(" "),t("a",{class:{disabled:!s.city||!s.address},on:{click:s.save}},[s._v(s._s(s.$t("myprogress.upload.button_save")))])])]:s._e()],2)],1)],1)},staticRenderFns:[],props:{title:String,intro:String,reminder:String,reminderImageSrc:String,uploadText:String,multipleUpload:{type:Boolean,default:!1}},data:function data(){return{opened:!1,step:"step-1",city:"",address:""}},mounted:function mounted(){var e=this;this.$nextTick(function(){e.opened=!0})},methods:{save:function save(){var e=this,s=e.city,t=e.address;e.$emit("save",{city:s,address:t}),e.$f7.popup.close()},setStep:function setStep(e){var s=this;"step-3"!==e?s.step=e:s.uploadFiles().then(function(){s.step=e})},onClosed:function onClosed(){this.$emit("closed")}}}},data:function data(){return{fragment:null,items:null,actorId:this.$f7route.query.actor_id,profilePhotoOpened:!1,healthCertOpened:!1,residentialPermitOpened:!1,nationalIdOpened:!1,addressOpened:!1}},computed:{isPendingApproval:function isPendingApproval(){var e=this;return 6===e.itemsProgressCount&&e.items.training.checked&&e.items.national_id.checked&&e.items.profile_photo.checked&&e.items.health_cert.checked&&e.items.address.checked&&e.items.residential_permit.checked},itemsProgress:function itemsProgress(){return this.itemsProgressCount/10*100},itemsProgressCount:function itemsProgressCount(){var s=this;return Object.keys(this.items).filter(function(e){return!0===s.items[e].checked}).length},isNurse:function isNurse(){var e=this;return!(!e.$root.user||"job"!==e.$root.user.onboarding)||!(!e.$root.account||!("Nurse"===e.$root.account.kind||0<=e.$root.account.roles.indexOf("Nurse")))}},mounted:function mounted(){this.getData()},methods:{toggleItem:function toggleItem(e){this.items[e].checked=!this.items[e].checked,this.saveData()},saveAddress:function saveAddress(e){var s=e.city,t=e.address;this.items.address.checked=!0,this.items.address.city=s,this.items.address.address=t,this.saveData()},saveData:function saveData(){var s=this,e=s.fragment;e.data.items=s.items,i(s.actorId||s.$root.user.id,e).then(function(e){e&&e.id&&(s.fragment=e)})},getData:function getData(){var s=this;e(s.actorId||s.$root.user.id).then(function(e){e.length?(s.fragment=e[0],s.items=s.fragment.data.items):(s.items={training:{checked:!1},national_id:{checked:!1},profile_photo:{checked:!1},health_cert:{checked:!1},address:{checked:!1},residential_permit:{checked:!1},approval:{checked:!1},sign_contract:{checked:!1},receive_tuome_bag:{checked:!1},the_first_job:{checked:!1}},s.fragment={data:{items:s.items}})})}}}}]}();