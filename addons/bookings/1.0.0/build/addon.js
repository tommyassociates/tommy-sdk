var addon=function(){function formatDate(t,e){var n=this.$moment.utc(t).toDate();return this.$moment(n).format(e)}var t=window.tommy.api,n=function getWorkforceShifts(){return t.getWorkforceShifts(Object.assign({}))};function normalizeComponent(t,e,n,a,o,s,i,r,l,c){"boolean"!=typeof i&&(l=r,r=i,i=!1);var d,v="function"==typeof n?n.options:n;if(t&&t.render&&(v.render=t.render,v.staticRenderFns=t.staticRenderFns,v._compiled=!0,o&&(v.functional=!0)),a&&(v._scopeId=a),s?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(s)},v._ssrRegister=d):e&&(d=i?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(v.functional){var f=v.render;v.render=function renderWithStyleInjection(t,e){return d.call(e),f(t,e)}}else{var _=v.beforeCreate;v.beforeCreate=_?[].concat(_,d):[d]}return n}function f(){var n=this,t=n.$createElement,a=n._self._c||t;return a("f7-page",{staticClass:"bookings-wrapper",attrs:{id:"bookings__index",ptr:""},on:{"page:afterin":n.loadEvents,"ptr:refresh":n.onPtrRefresh}},[a("f7-block",{staticClass:"no-margin no-padding"},[a("div",{staticClass:"calendar-toolbar"},[n.collapsedCalendar?n._e():a("span",{staticClass:"calendar-toolbar__prev",on:{click:function(t){return n.onPrevMonth()}}}),n._v(" "),a("div",[a("span",{staticClass:"calendar-toolbar__date"},[n._v(n._s(n.toolbarDate))]),n._v(" "),a("span",{staticClass:"calendar-toolbar__collapse",class:{"-rotate":n.collapsedCalendar},on:{click:function(t){return n.onCollapse()}}})]),n._v(" "),n.collapsedCalendar?n._e():a("span",{staticClass:"calendar-toolbar__next",on:{click:function(t){return n.onNextMonth()}}})]),n._v(" "),a("div",{attrs:{id:"calendar-container"}})]),n._v(" "),n.events&&n.events.length?a("f7-list",{staticClass:"booking-events__wrapper no-margin no-padding",attrs:{"media-list":"","no-hairlines":""}},[n.previousEvents.length?a("f7-list-group",{attrs:{"media-list":""}},[a("f7-list-item",{staticClass:"booking-events__title",attrs:{"group-title":""}},[n._v("Previous")]),n._v(" "),n._l(n.previousEvents,function(e,t){return a("f7-list-item",{key:t,staticClass:"booking-event",attrs:{link:"#",title:n.eventTitle(e),text:n.eventText(e)},on:{click:function(t){return n.loadEventDetails(e)}}},[a("div",{staticClass:"item-media text-icon align-self-center",attrs:{slot:"content-start"},slot:"content-start"},[a("span",[n._v(n._s(n.getDifferenceOfHours(e)))])]),n._v(" "),a("span",{staticClass:"booking-event__description"},[n._v(n._s(e.title))]),n._v(" "),a("span",{staticClass:"booking-event__description"},[n._v(n._s(e.location))])])})],2):n._e(),n._v(" "),n.currentEvents.length?a("f7-list-group",{attrs:{"media-list":""}},[a("f7-list-item",{staticClass:"booking-events__title",attrs:{"group-title":""}},[n._v("Current")]),n._v(" "),n._l(n.currentEvents,function(e,t){return a("f7-list-item",{key:t,staticClass:"booking-event booking-label -processing",attrs:{link:"#",title:n.eventTitle(e),text:n.eventText(e)},on:{click:function(t){return n.loadEventDetails(e)}}},[a("div",{staticClass:"item-media text-icon align-self-center",attrs:{slot:"content-start"},slot:"content-start"},[a("span",[n._v(n._s(n.getDifferenceOfHours(e)))])]),n._v(" "),a("span",{staticClass:"booking-event__description"},[n._v(n._s(e.title))]),n._v(" "),a("span",{staticClass:"booking-event__description"},[n._v(n._s(e.location))])])})],2):n._e()],1):n._e(),n._v(" "),n.events&&!n.events.length?a("f7-block",{staticClass:"no-data"},[a("h2",[n._v(n._s(n.$t("bookings.no_bookings","No bookings have been assigned")))]),n._v(" "),a("p",[n._v(n._s(n.$t("bookings.no_bookings_hint","Please check again later...")))])]):n._e()],1)}var e={data:function data(){return{events:[],today:this.$moment().startOf("day"),toolbarDate:"",collapsedCalendar:!1}},mounted:function mounted(){var t=this,e=t.$app,n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()),o=(new Date).setDate(a.getDate()+3);t.calendar=e.f7.calendar.create({containerEl:"#calendar-container",toolbar:!1,value:[n],firstDay:0,touchMove:!1,events:[{date:a,color:"#84c4f8"},{date:a,color:"#00ce7d"},{from:a,to:o,color:"#ff4500"}]}),t.getToolbarDate(),t.onCollapse()},computed:{currentEvents:function currentEvents(){var e=this;return e.events.filter(function(t){return e.$moment(t.start_at)>=e.today})},previousEvents:function previousEvents(){var e=this;return e.events.filter(function(t){return e.$moment(t.start_at)<e.today})}},methods:{getToolbarDate:function getToolbarDate(){var t=this.calendar,e=t.currentMonth,n=t.currentYear,a=t.params;return this.toolbarDate=a.monthNames[e]+" "+n},getDifferenceOfHours:function getDifferenceOfHours(t){var e=t.start_at,n=t.end_at;return console.log("event",t.start_at,t.end_at),n?this.$moment(n).diff(this.$moment(e),"hours",!0).toFixed(1).replace(/\.0$/,""):"-"},eventTitle:function eventTitle(t){var e=this.formatDate(t.start_at,"h:mm a");return t.end_at&&(e+=" - "+this.formatDate(t.end_at,"h:mm a")),e},eventText:function eventText(t){var e=t.title;return t.location&&(e+=" at "+t.location),e},formatDate:function formatDate$1(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return formatDate.call.apply(formatDate,[this].concat(t))},loadEventDetails:function loadEventDetails(t){this.$f7router.navigate("/bookings/details/",{props:{event:t}})},onCollapse:function onCollapse(){var n=this,t=n.$moment().startOf("month").weekday(),e=(new Date).getDate(),a=Math.ceil((t+e)/7),o=document.getElementById("calendar-container"),s=document.getElementsByClassName("calendar-month-current")[0].childNodes;Array.prototype.forEach.call(s,function(t,e){e!==a-1&&(n.collapsedCalendar?t.classList.remove("-hide"):t.classList.add("-hide"))}),n.collapsedCalendar?o.classList.remove("collapsed"):o.classList.add("collapsed"),n.collapsedCalendar=!n.collapsedCalendar},onNextMonth:function onNextMonth(){this.calendar.nextMonth(500),this.getToolbarDate()},onPrevMonth:function onPrevMonth(){this.calendar.prevMonth(500),this.getToolbarDate()},onPtrRefresh:function onPtrRefresh(t,e){this.loadEvents().then(function(){e&&e()})},loadEvents:function loadEvents(){var e=this;return n().then(function(t){e.events=t})}}};f._withStripped=!0;function o(){var t=this,e=t.$createElement,n=t._self._c||e;return n("f7-page",{attrs:{id:"bookings__details"}},[n("f7-navbar",[n("tommy-nav-back"),t._v(" "),n("f7-nav-title",[t._v(t._s(t.$t("bookings.details.title","Booking Details")))])],1),t._v(" "),n("f7-block-title",[t._v(t._s(t.$t("bookings.label.details","Details")))]),t._v(" "),n("f7-list",{attrs:{"no-hairlines":""}},[n("f7-list-item",{attrs:{header:t.$t("bookings.label.title","Title"),title:t.event.title}}),t._v(" "),n("f7-list-item",{attrs:{header:t.$t("bookings.label.location","Location"),title:t.event.location}})],1),t._v(" "),t.event.start_at?n("f7-block-title",[t._v(t._s(t.$t("bookings.label.start","Start")))]):t._e(),t._v(" "),t.event.start_at?n("f7-list",{attrs:{"no-hairlines":""}},[n("f7-list-item",{attrs:{header:t.$t("bookings.label.date","Date"),title:t.formatDate(t.event.start_at,"D MMM YY")}}),t._v(" "),n("f7-list-item",{attrs:{header:t.$t("bookings.label.time","Time"),title:t.formatDate(t.event.start_at,"h:mm a")}})],1):t._e(),t._v(" "),t.event.end_at?n("f7-block-title",[t._v(t._s(t.$t("bookings.label.end","End")))]):t._e(),t._v(" "),t.event.end_at?n("f7-list",{attrs:{"no-hairlines":""}},[n("f7-list-item",{attrs:{header:t.$t("bookings.label.date","Date"),title:t.formatDate(t.event.end_at,"D MMM YY")}}),t._v(" "),n("f7-list-item",{attrs:{header:t.$t("bookings.label.time","Time"),title:t.formatDate(t.event.end_at,"h:mm a")}})],1):t._e()],1)}var a=normalizeComponent({render:f,staticRenderFns:[]},void 0,e,void 0,!1,void 0,!1,void 0,void 0,void 0),s={props:{event:Object},methods:{formatDate:function formatDate$1(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return formatDate.call.apply(formatDate,[this].concat(t))}}};o._withStripped=!0;return[{path:"/bookings/",component:a},{path:"/bookings/details/",component:normalizeComponent({render:o,staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0)}]}();