var addon=function(){function formatDate(t,e){var a=this.$moment.utc(t).toDate();return this.$moment(a).format(e)}var t=window.tommy.api,a=function getWorkforceShifts(){return t.getEvents(Object.assign({}))};function normalizeComponent(t,e,a,n,s,o,i,r,l,c){"boolean"!=typeof i&&(l=r,r=i,i=!1);var d,f="function"==typeof a?a.options:a;if(t&&t.render&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns,f._compiled=!0,s&&(f.functional=!0)),n&&(f._scopeId=n),o?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},f._ssrRegister=d):e&&(d=i?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),d)if(f.functional){var _=f.render;f.render=function renderWithStyleInjection(t,e){return d.call(e),_(t,e)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,d):[d]}return a}function f(){var a=this,t=a.$createElement,n=a._self._c||t;return n("f7-page",{staticClass:"bookings__wrapper",attrs:{id:"bookings__index",ptr:""},on:{"page:afterin":a.loadEvents,"ptr:refresh":a.onPtrRefresh}},[n("f7-navbar",[n("tommy-nav-menu")],1),a._v(" "),n("f7-block",{staticClass:"no-margin no-padding"},[n("div",{staticClass:"calendar-toolbar"},[a.collapsedCalendar?a._e():n("span",{staticClass:"calendar-toolbar__prev",on:{click:function(t){return a.onPrevMonth()}}}),a._v(" "),n("div",[n("span",{staticClass:"calendar-toolbar__date"},[a._v(a._s(a.toolbarDate))]),a._v(" "),n("span",{staticClass:"calendar-toolbar__collapse",class:{"-rotate":a.collapsedCalendar},on:{click:function(t){return a.onCollapse()}}})]),a._v(" "),a.collapsedCalendar?a._e():n("span",{staticClass:"calendar-toolbar__next",on:{click:function(t){return a.onNextMonth()}}})]),a._v(" "),n("div",{attrs:{id:"calendar-container"}})]),a._v(" "),a.events&&a.events.length?n("f7-list",{staticClass:"booking-events__wrapper no-margin no-padding",attrs:{"media-list":"","no-hairlines":""}},[a.openShifts.length?n("f7-list-group",{attrs:{"media-list":""}},[n("f7-list-item",{staticClass:"booking-events__title",attrs:{"group-title":""}},[a._v("Open Shifts")]),a._v(" "),a._l(a.openShifts,function(e,t){return n("f7-list-item",{key:t,staticClass:"booking-event",attrs:{link:"#",title:a.eventTitle(e),text:a.eventText(e)},on:{click:function(t){return a.loadEventDetails(e)}}},[n("div",{staticClass:"item-media text-icon align-self-center",attrs:{slot:"content-start"},slot:"content-start"},[n("span",[a._v(a._s(a.getDifferenceOfHours(e)))])]),a._v(" "),n("span",{staticClass:"booking-event__description"},[a._v(a._s(e.title))]),a._v(" "),n("span",{staticClass:"booking-event__description"},[a._v(a._s(e.location))])])})],2):a._e(),a._v(" "),a.currentShifts.length?n("f7-list-group",{attrs:{"media-list":""}},[n("f7-list-item",{staticClass:"booking-events__title",attrs:{"group-title":""}},[a._v("Current")]),a._v(" "),a._l(a.currentShifts,function(e,t){return n("f7-list-item",{key:t,staticClass:"booking-event booking-label -processing",attrs:{link:"#",title:a.eventTitle(e),text:a.eventText(e)},on:{click:function(t){return a.loadEventDetails(e)}}},[n("div",{staticClass:"item-media text-icon align-self-center",attrs:{slot:"content-start"},slot:"content-start"},[n("span",[a._v(a._s(a.getDifferenceOfHours(e)))])]),a._v(" "),n("span",{staticClass:"booking-event__description"},[a._v(a._s(e.title))]),a._v(" "),n("span",{staticClass:"booking-event__description"},[a._v(a._s(e.location))])])})],2):a._e()],1):a._e(),a._v(" "),a.currentShifts.length?a._e():n("f7-block",{staticClass:"no-data"},[n("h2",[a._v(a._s(a.$t("No shifts found")))]),a._v(" "),n("p",[a._v(a._s(a.$t("Please check again later...")))])])],1)}var e={data:function data(){var t=this.$moment().startOf("day");return{events:[],selectedEvents:[],today:t,toolbarDate:"",collapsedCalendar:!1,selectedDate:t}},mounted:function mounted(){var o=this,t=o.$app;o.calendar=t.f7.calendar.create({containerEl:"#calendar-container",events:o.selectedEvents,value:[o.today],firstDay:0,toolbar:!1,touchMove:!1,on:{dayClick:function(t,e,a,n,s){o.selectedDate=new Date(a,n,s)}}}),o.getToolbarDate(),o.onCollapse()},computed:{currentShifts:function currentShifts(){var e=this,a=e.$moment(new Date(e.selectedDate)).format("YYYY-MM-DD");return e.events.filter(function(t){return e.$moment(t.start_at).format("YYYY-MM-DD")==a})},openShifts:function openShifts(){var e=this;return e.events.filter(function(t){return e.$moment(t.start_at)>=e.today})}},methods:{getSelectedEvents:function getSelectedEvents(t){return t.map(function(t){var e=t.start_at,a=t.end_at,n="#ff4500";return a?{from:e,to:a,color:n}:{date:e,color:n}})},getToolbarDate:function getToolbarDate(){var t=this.calendar,e=t.currentMonth,a=t.currentYear,n=t.params;return this.toolbarDate=n.monthNames[e]+" "+a},getDifferenceOfHours:function getDifferenceOfHours(t){var e=t.start_at,a=t.end_at;return a?this.$moment(a).diff(this.$moment(e),"hours",!0).toFixed(1).replace(/\.0$/,""):"-"},eventTitle:function eventTitle(t){var e=this.formatDate(t.start_at,"h:mm a");return t.end_at&&(e+=" - "+this.formatDate(t.end_at,"h:mm a")),e},eventText:function eventText(t){var e=t.title;return t.location&&(e+=" at "+t.location),e},formatDate:function formatDate$1(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return formatDate.call.apply(formatDate,[this].concat(t))},loadEventDetails:function loadEventDetails(t){this.$f7router.navigate("/bookings/details/",{props:{event:t}})},onCollapse:function onCollapse(){var a=this,t=a.$moment().startOf("month").weekday(),e=(new Date).getDate(),n=Math.ceil((t+e)/7),s=document.getElementById("calendar-container"),o=document.getElementsByClassName("calendar-month-current")[0].childNodes;Array.prototype.forEach.call(o,function(t,e){e!==n-1&&(a.collapsedCalendar?t.classList.remove("-hide"):t.classList.add("-hide"))}),a.collapsedCalendar?s.classList.remove("collapsed"):s.classList.add("collapsed"),a.collapsedCalendar=!a.collapsedCalendar},onNextMonth:function onNextMonth(){this.calendar.nextMonth(500),this.getToolbarDate()},onPrevMonth:function onPrevMonth(){this.calendar.prevMonth(500),this.getToolbarDate()},onPtrRefresh:function onPtrRefresh(t,e){this.loadEvents().then(function(){e&&e()})},loadEvents:function loadEvents(){var e=this;return a().then(function(t){e.events=t})}}};f._withStripped=!0;function o(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{staticClass:"bookings-details no-margin no-padding",attrs:{id:"bookings__details"}},[a("f7-navbar",{staticClass:"bookings-details__nav"},[a("tommy-nav-back",{staticClass:"bookings-details__back"})],1),t._v(" "),a("f7-nav-title",{staticClass:"bookings-details__title"},[t._v("Shift Details")]),t._v(" "),a("f7-list",{staticClass:"bookings-details__list",attrs:{"no-hairlines":""}},[a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Location",title:t.event.location}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Start",title:t.formatDate(t.event.start_at,"D MMM YYYY hh:mm")}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"End",title:t.formatDate(t.event.end_at,"D MMM YYYY hh:mm")}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Shift type",title:""}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Role",title:""}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Department",title:""}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Suburb",title:""}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Status",title:""}}),t._v(" "),a("f7-list-item",{staticClass:"bookings-details__item",attrs:{header:"Notes",title:""}})],1),t._v(" "),a("f7-button",{staticClass:"bookings-details__button"},[t._v("Request Shift")])],1)}var n=normalizeComponent({render:f,staticRenderFns:[]},void 0,e,void 0,!1,void 0,!1,void 0,void 0,void 0),s={props:{event:Object},methods:{formatDate:function formatDate$1(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return formatDate.call.apply(formatDate,[this].concat(t))}}};o._withStripped=!0;return[{path:"/bookings/",component:n},{path:"/bookings/details/",component:normalizeComponent({render:o,staticRenderFns:[]},void 0,s,void 0,!1,void 0,!1,void 0,void 0,void 0)}]}();