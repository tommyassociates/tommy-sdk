var addon=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("f7-page",{attrs:{id:"example__index"}},[n("f7-navbar",[n("tommy-nav-menu"),t._v(" "),n("f7-nav-title",[t._v(t._s(t.$t("theme.index.title")))]),t._v(" "),n("f7-nav-right")],1),t._v(" "),n("f7-page-content",[n("f7-row",{attrs:{"no-gap":"",align:"top"}},[n("f7-col",{attrs:{width:"100","tablet-width":"50"}},[n("f7-block",{attrs:{strong:"",inset:""}},[n("f7-block-header",[t._v(t._s(t.$t("theme.index.profile_icon.title")))]),t._v(" "),n("f7-row",[n("f7-col",{class:"col--icon",attrs:{width:"40"}},[t.$device.cordova?t._e():n("div",[n("div",{staticClass:"profile-image--with-file-input"},[n("div",{},[""!==t.$root.team.icon_url?n("a",{staticClass:"profile-image__delete-button",attrs:{href:"#"},on:{click:t.deleteIconImage}},[n("delete-icon")],1):t._e(),t._v(" "),n("circle-avatar",{attrs:{size:74,url:t.$root.team.icon_url}})],1),t._v(" "),n("input",{ref:"photochangefile",attrs:{type:"file",id:"photochangefile"},on:{change:function(e){return t.onPhotoChangeOnNonCordovaDevice()}}})])]),t._v(" "),t.$device.cordova&&""!==t.$root.team.icon_url?n("a",{staticClass:"profile-image__delete-button",attrs:{href:"#"},on:{click:t.deleteIconImage}},[n("delete-icon")],1):t._e(),t._v(" "),t.$device.cordova?n("a",{staticClass:"item-link list-button",attrs:{id:"change-profile-picture",href:"#"},on:{click:t.changeProfilePicture}},[n("circle-avatar",{attrs:{size:74,url:t.$root.team.icon_url}})],1):t._e()]),t._v(" "),n("f7-col",{class:"col--icon-description",attrs:{width:"60"}},[t._v("\n              "+t._s(t.$t("theme.index.profile_icon.summary"))+"\n            ")])],1)],1)],1),t._v(" "),n("f7-col",{attrs:{width:"100","tablet-width":"50"}},[n("f7-block",{attrs:{strong:"",inset:""}},[n("f7-block-header",[t._v(t._s(t.$t("theme.index.background_image.title")))]),t._v(" "),n("f7-row",[n("f7-col",{class:"col--bg-icon",attrs:{width:"40"}},[t.$device.cordova?t._e():n("div",[n("div",{staticClass:"profile-background--with-file-input"},[n("div",{},[""!==t.$root.team.background_url?n("a",{staticClass:"profile-background__delete-button",attrs:{href:"#"},on:{click:t.deleteBackground}},[n("delete-icon")],1):t._e(),t._v(" "),n("div",{staticClass:"profile-background__preview",style:t.profileBackgroundPreviewStyles})]),t._v(" "),n("input",{ref:"photobackgrondfile",attrs:{type:"file",id:"photobackgrondfile"},on:{change:function(e){return t.onBackgroundChangeOnNonCordovaDevice()}}})])]),t._v(" "),t.$device.cordova&&""!==t.$root.team.background_url?n("a",{staticClass:"profile-backgrond__delete-button",attrs:{href:"#"},on:{click:t.deleteBackground}},[n("delete-icon")],1):t._e(),t._v(" "),t.$device.cordova?n("a",{staticClass:"item-link list-button",attrs:{id:"change-profile-background",href:"#"},on:{click:t.changeProfileBackground}},[n("div",{staticClass:"profile-background__preview",style:t.profileBackgroundPreviewStyles})]):t._e()]),t._v(" "),n("f7-col",{class:"col--bg-icon-description",attrs:{width:"60"}},[t._v("\n              "+t._s(t.$t("theme.index.background_image.summary"))+"\n            ")])],1)],1)],1)],1)],1)],1)};o._withStripped=!0;var i=window.tommy.api,a={deleteIconImage:function(){return i.call({endpoint:"team",method:"PUT",data:{icon_url:""}})},deleteBackground:function(){return i.call({endpoint:"team",method:"PUT",data:{background_url:""}})}},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"avatar-circle",class:{"avatar-circle-small":t.small},style:t.style,on:{click:t.onClick}},[t.onlineBadge?n("span",{staticClass:"badge",class:t.online?"online":"offline",attrs:{"data-online-state":t.user_id}},[t._v("Â ")]):t._e(),t._v(" "),t.notificationBadge?n("span",{staticClass:"badge",class:t.notification_count?"":"hide"},[t._v(t._s(t.notification_count))]):t._e(),t._v(" "),n("span",{staticClass:"initials"},[t._v(t._s(t.initials||""))]),t._v(" "),t.icon_url?n("span",{staticClass:"avatar-circle-image",class:{"current-avatar":t.current},style:"background-image: url("+t.icon_url+")"}):t._e()])};r._withStripped=!0;var c=function(t){if(!t||t&&!t.trim().length)return"TO";var e=t.trim().replace(/\s\s+/g," "),n=e.split(" "),o=e[0];return(o+=n.length>1?n[1][0]:e[1]).toUpperCase()||"TO"};function l(t,e,n,o,i,a,r,c){var l,s="function"==typeof t?t.options:t;if(e&&(s.render=e,s.staticRenderFns=n,s._compiled=!0),o&&(s.functional=!0),a&&(s._scopeId="data-v-"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},s._ssrRegister=l):i&&(l=c?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(s.functional){s._injectStyles=l;var u=s.render;s.render=function(t,e){return l.call(e),u(t,e)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:s}}var s=l({props:{small:Boolean,size:Number,url:String,data:Object,onlineBadge:Boolean,isOnline:Boolean,notificationBadge:Boolean,current:Boolean,displayImage:{type:Boolean,default:!0}},computed:{style:function(){var t=this.size;return t?"width: ".concat(t,"px; height: ").concat(t,"px; line-height: ").concat(t,"px;"):""},initials:function(){var t=this.data;if(!t)return"TO";if(t.first_name){var e=t.first_name[0]+(t.last_name?t.last_name[0]:"");return String(e).toUpperCase()}if(t.name)return c(t.name);if(t.sender)return c(t.chat.title);if(t.chat_title){var n=t.chat_title[0]+t.chat_title[1];return String(n).toUpperCase()}return"TO"},user_id:function(){var t=this.data;return t&&(t.first_name||t.name)?t.user_id:null},online:function(){var t=this.data;return this.isOnline||t&&t.online},notification_count:function(){var t=this.data;return t&&(t.first_name||t.name)?t.notification_count:null},icon_url:function(){var t=this.data,e=this.url;return this.displayImage?e||(t?t.icon_url?t.icon_url:t.sender?t.chat.icon_url:"":""):""}},methods:{onClick:function(t){this.$emit("click",t)}}},r,[],!1,null,null,null);s.options.__file="tommy_core/src/components/circle-avatar.vue";var u,d=s.exports,f=(window.tommy,window.tommy.i18n),p=window.tommy.api,_={settings:{},init:function(t){if(!t.url)throw new Error('"url" endpoint param must be provided');t.filename||(t.filename="profilephoto.jpg"),t.param||(t.param="photo"),t.f7&&(_.f7=t.f7),_.settings=t},openMenu:function(){var t=[[{text:f.t("account.photochange_edit_picture"),label:!0},{text:f.t("account.photochange_take_photo"),bold:!0,onClick:_.capturePhotoEdit},{text:f.t("account.photochange_choose_library"),onClick:_.uploadPhotoAlbum}],[{text:f.t("label.cancel"),color:"red"}]];_.f7.actions.create({buttons:t}).open()},capturePhotoEdit:function(){window.cordova?navigator.camera.getPicture(_.onPhotoDataSuccess,_.onPhotoFail,{quality:20,allowEdit:!0,destinationType:navigator.camera.DestinationType.DATA_URL,encodingType:0}):_.selectImageFromFilesystem()},uploadPhotoAlbum:function(){window.cordova?navigator.camera.getPicture(_.onPhotoDataSuccess,_.onPhotoFail,{quality:20,allowEdit:!0,destinationType:navigator.camera.DestinationType.DATA_URL,sourceType:navigator.camera.PictureSourceType.PHOTOLIBRARY,encodingType:0}):_.selectImageFromFilesystem()},selectImageFromFilesystem:function(){(u=document.createElement("input")).setAttribute("type","file"),u.click(),u.onchange=function(){_.upload(u.files[0])}},onPhotoDataSuccess:function(t){var e=function(t){if(-1===t.indexOf(";base64,")){var e=t.split(","),n=e[0].split(":")[1],o=decodeURIComponent(e[1]);return new Blob([o],{type:n})}for(var i=t.split(";base64,"),a=i[0].split(":")[1],r=window.atob(i[1]),c=r.length,l=new Uint8Array(c),s=0;s<c;s+=1)l[s]=r.charCodeAt(s);return new Blob([l],{type:a})}("data:image/jpg;base64,".concat(t));_.upload(e)},onPhotoFail:function(t){_.f7.preloader.hide(),_.f7.dialog.alert(f.t("account.photochange_error_getting_image")+t),_.settings.error&&_.settings.error()},upload:function(t){_.f7.preloader.show();var e=new FormData;e.append(_.settings.param,t,_.settings.filename),p.call({endpoint:_.settings.url,method:"PUT",data:e}).then((function(t){_.f7.preloader.hide(),_.settings.success&&_.settings.success(t)})).catch((function(t){_.f7.preloader.hide(),_.settings.error&&_.settings.error(t)}))}},g=_,h=function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("title",[this._v("Group")]),this._v(" "),e("desc",[this._v("Created with Sketch.")]),this._v(" "),e("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"}},[e("g",{attrs:{id:"Group",transform:"translate(1.000000, 0.000000)"}},[e("circle",{attrs:{id:"Oval",stroke:"#FFFFFF","stroke-width":"2",fill:"#FF5413",cx:"11",cy:"12",r:"11"}}),this._v(" "),e("text",{attrs:{id:"x","font-family":"HelveticaNeue-Medium, Helvetica Neue","font-size":"16","font-weight":"400",fill:"#FFFFFF"}},[e("tspan",{attrs:{x:"7.408",y:"16"}},[this._v("x")])])])])])};h._withStripped=!0;var m=l({name:"delete-icon"},h,[],!1,null,"3aa59a54",null);m.options.__file="addons/theme/1.0.0/src/components/icons/delete-icon.vue";var v=m.exports,b=l({methods:{alertDialog:function(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.$f7.dialog.create({title:t,text:e,cssClass:o,buttons:[{text:n,cssClass:"dialog-button-bold",keyCodes:[13]}]}).open()},confirmDialog:function(t,e,n,o,i,a){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];this.$f7.dialog.create({title:t,text:e,cssClass:r,buttons:[{text:o,bold:c,keyCodes:[27],onClick:function(){"function"==typeof a&&a()}},{text:n,bold:l,keyCodes:[13],onClick:function(){"function"==typeof i&&i()}}]}).open()}}},void 0,void 0,!1,null,null,null);b.options.__file="tommy_core/src/mixins/dialog.vue";var k=l({components:{circleAvatar:d,deleteIcon:v},data:function(){return{}},mixins:[b.exports],computed:{profileBackgroundPreviewStyles:function(){var t=this.$root.team.background_url?this.$root.team.background_url:"".concat(this.$addonAssetsUrl,"MenuBackgroundWithShadow.png");return{backgroundImage:"url(".concat(t,")")}}},methods:{changeProfilePicture:function(){var t=this;g.init({url:"team",f7:t.$f7,success:function(e){e.icon_url&&(t.$root.team.icon_url=e.icon_url)}}),g.openMenu()},onPhotoChangeOnNonCordovaDevice:function(){var t=this;g.init({url:"team",f7:t.$f7,success:function(e){e.icon_url&&(t.$root.team.icon_url=e.icon_url)}}),g.upload(t.$refs.photochangefile.files[0])},deleteIconImage:function(){var t=this;t.confirmDialog(!1,t.$t("theme.index.profile_icon.delete_confirmation_message"),t.$t("theme.index.profile_icon.confirm_button"),t.$t("theme.index.profile_icon.cancel_button"),(function(){a.deleteIconImage().then((function(){t.$root.team.icon_url=""}))}),null,null,!0,!1)},changeProfileBackground:function(){var t=this;g.init({url:"team",f7:t.$f7,success:function(e){e.background_url&&(t.$root.team.background_url=e.background_url)}}),g.openMenu()},onBackgroundChangeOnNonCordovaDevice:function(){var t=this;g.init({url:"team",f7:t.$f7,param:"background",filename:"backgroundimage.jpg",success:function(e){console.log("onPhotoChangeOnNonCordovaDevice response",e),e.background_url&&(t.$root.team.background_url=e.background_url)}}),console.log("onPhotoChangeOnNonCordovaDevice",t.$refs.photobackgrondfile,t.$refs.photobackgrondfile.files),g.upload(t.$refs.photobackgrondfile.files[0])},deleteBackground:function(){var t=this;t.confirmDialog(!1,t.$t("theme.index.background_image.delete_confirmation_message"),t.$t("theme.index.background_image.confirm_button"),t.$t("theme.index.background_image.cancel_button"),(function(){a.deleteBackground().then((function(){t.$root.team.background_url=""}))}),null,null,!0,!1)}}},o,[],!1,null,null,null);k.options.__file="addons/theme/1.0.0/src/pages/index.vue";var y=[{path:"/theme/",component:k.exports}];e.default=y}]).default;