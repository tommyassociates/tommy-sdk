var addon=function(){var n=window.tommy,i=n.api,r={actor:void 0,actorId:void 0,loadListTasks:function loadListTasks(t,s){if(t.data&&t.filters)for(var e=0;e<t.filters.length;e+=1)s.indexOf(t.filters[e].name)<0&&s.push(t.filters[e].name);var a={addon:"tasks",kind:"Task",tags:s,with_filters:!0,with_permission_to:!0,actor_id:r.actorId};return t.data.date_range&&(a.date_range=t.data.date_range),t.data.statuses&&(a.status=t.data.statuses),a.data=JSON.stringify(a.data),i.getFragments(a)},addTaskActivity:function addTaskActivity(t,s,e){var a=n.root.user,i={type:s,text:e,time:new Date,user_id:a.id,user_name:a.first_name};return t.data||(t.data={}),t.data.activity||(t.data.activity=[]),t.data.activity.unshift(i),i},getTask:function getTask(t){return i.getFragment(t,{data:{with_filters:!0}})},saveTask:function saveTask(t){if(t.addon="tasks",t.kind="Task",t.with_filters=!0,t.with_permission_to=!0,t.start_at||(t.start_at=(new Date).getTime()),!t.id){t.with_permissions=["task_create_access","task_edit_access"];var s=r.actor;s&&(t.filters||(t.filters=[]),t.filters.push({context:"members",name:s.first_name+" "+s.last_name,user_id:s.user_id}))}var e=Object.assign({},t,{data:JSON.stringify(t.data)});return t.id?i.updateFragment(t.id,e):i.createFragment(e)},getList:function getList(t){return i.getFragment(t,{data:{addon:"tasks",kind:"TaskList",with_filters:!0,with_permission_to:!0}})},loadLists:function loadLists(t,s){return void 0===t&&(t={}),void 0===s&&(s={}),i.getFragments(Object.assign({addon:"tasks",kind:"TaskList",with_filters:!0,with_permission_to:!0,actor_id:r.actorId,user_id:r.actorId},t),s)},deleteList:function deleteList(t){return i.deleteFragment(t)},saveList:function saveList(t){t.addon="tasks",t.kind="TaskList",t.with_filters=!0,t.with_permission_to=!0,t.data||(t.data={}),void 0===t.data.position&&(t.data.position=0),void 0===t.data.active&&(t.data.active=!0),void 0===t.data.show_fast_add&&(t.data.show_fast_add=!0),t.id||(t.with_permissions=["task_list_read_access","task_list_edit_access"]);var s=Object.assign({},t,{data:JSON.stringify(t.data),filters:JSON.stringify(t.filters)});return t.id?i.updateFragment(t.id,s):i.createFragment(s)},currentUserTag:function currentUserTag(){return{context:"members",name:window.tommy.config.getCurrentUserName(),user_id:window.tommy.config.getCurrentUserId()}},createDefaultList:function createDefaultList(t){var s={name:n.i18n.t("tasks.index.default-list-name"),data:{default:!0},filters:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}]};return r.saveList(s)}};function humanTime(t){var s=window.tommy.moment,e=s.utc(t).toDate();if(s(e).isValid()){var a=s().diff(s(e),"days");if(1===a)return"Yesterday "+s(e).format("h:mm A");if(0===a)return"Today "+s(e).format("h:mm A");if(-1===a)return"Yesterday "+s(e).format("h:mm A");if(1<=a&&a<=8||-8<=a&&a<=-1)return s(e).format("ddd h:mm A");if(365<=a||a<=-365)return s(e).format("MMM D, YYYY h:mm A");if(8<=a||a<=-8)return s(e).format("MMM D h:mm A")}return"None"}function taskStatus(t){var s=t.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_|_$)/g,"");return window.tommy.i18n.t("tasks.status."+s,t)}var o=["Unassigned","Assigned","Processing","Completed","Closed","Archive Task","Cancel"];function formatDate(t){var s=new Date(t),e=s.getFullYear(),a=s.getMonth()+1,i=s.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),e+"-"+a+"-"+i}return[{path:"/tasks/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",{staticClass:"tasks-page",attrs:{id:"tasks__index",name:"tasks__index"}},[a("f7-navbar",[a("tommy-nav-menu"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.pageTitle))]),e._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/tasks/list-management/","icon-f7":"gear"}}),e._v(" "),a("f7-link",{attrs:{href:"/tasks/task-add/","icon-f7":"add"}})],1)],1),e._v(" "),e.orderedLists&&e.orderedLists.length?a("f7-swiper",{attrs:{params:{slidesPerView:"auto",breakpointsInverse:!0,centeredSlides:!1,breakpoints:{768:{centeredSlides:!0}}}}},e._l(e.orderedLists,function(s){return a("f7-swiper-slide",{key:s.id},[a("div",{staticClass:"tasks-list",class:{hasScroll:e.listWithScroll[s.id]},attrs:{"data-id":s.id}},[a("div",{staticClass:"tasks-list-header"},[a("div",[e._v(e._s(s.name))]),e._v(" "),e.canEditList(s)?a("div",[a("a",{attrs:{href:"/tasks/list-edit/"+s.id+"/"}},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice6.png",srcset:e.$addonAssetsUrl+"slice6@2x.png 2x, "+e.$addonAssetsUrl+"slice6@3x.png 3x"}})])]):e._e()]),e._v(" "),a("div",{staticClass:"tasks-list-content"},[s.tasks&&s.tasks.length?e._l(s.tasks,function(t,s){return a("a",{key:s,staticClass:"card task-card",class:e.isTaskDone(t)?"color-gray done":"",attrs:{href:"/tasks/task/"+t.id+"/"}},[a("div",{staticClass:"card-content card-content-padding"},[a("p",[e._v(e._s(t.name))])]),e._v(" "),a("div",{staticClass:"card-footer no-border color-gray"},[t.end_at?a("span",{staticClass:"badge",class:e.isPastDate(t.end_at)?"bg-red":"bg-blue"},[e._v(e._s(e.humanTime(t.end_at)))]):t.data.checklist?a("span",{staticClass:"icon"},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice1.png",srcset:e.$addonAssetsUrl+"slice1@2x.png 2x,"+e.$addonAssetsUrl+"slice1@3x.png 3x"}}),e._v(" "+e._s(e.checklistNumCompleted(t.data.checklist))+" ")]):a("span",{staticClass:"icon"},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice2.png",srcset:e.$addonAssetsUrl+"slice2@2x.png 2x,"+e.$addonAssetsUrl+"slice2@3x.png 3x"}})]),e._v(" "),a("span",[e._v(" "+e._s(t.status?e.taskStatus(t.status):e.$t("tasks.index.unassigned","Unassigned"))+" ")])])])}):e._e()],2),e._v(" "),s.data.show_fast_add?a("div",{staticClass:"tasks-list-footer"},[e.fastAddEnabled[s.id]?a("div",{staticClass:"in"},[a("form",{staticClass:"card-form",on:{submit:function(t){e.fastAddTask(t,s)}}},[a("input",{attrs:{autofocus:"",type:"text"},domProps:{value:e.fastAddValue[s.id]},on:{input:function(t){e.fastAddValue[s.id]=t.target.value}}}),e._v(" "),a("div",{staticClass:"buttons"},[a("a",{staticClass:"button cancel",attrs:{href:"#"},on:{click:function(t){e.$set(e.fastAddEnabled,s.id,!1)}}},[e._v(e._s(e.$t("tasks.index.cancel","Cancel")))]),e._v(" "),a("button",{staticClass:"button button-fill color-red save",attrs:{type:"submit"}},[e._v(e._s(e.$t("tasks.index.done","Done")))])])])]):a("div",{staticClass:"in"},[a("div",{staticClass:"card-add",on:{click:function(t){e.$set(e.fastAddEnabled,s.id,!0)}}},[e._v(e._s(e.$t("tasks.index.add-task","Add task")))])])]):e._e()])])})):e._e()],1)},staticRenderFns:[],data:function data(){return{lists:null,actorId:this.$f7route.query.actor_id,fastAddEnabled:{},fastAddValue:{},listWithScroll:{}}},created:function created(){this.actorId?(r.actorId=parseInt(this.actorId,10),r.actor=this.actor):(delete r.actorId,delete r.actor)},computed:{actor:function actor(){var s=this;return s.actorId?s.$root.teamMembers.filter(function(t){return t.user_id===parseInt(s.actorId,10)})[0]:null},pageTitle:function pageTitle(){var s=this;if(!s.actorId)return s.$t("tasks.index.title","Tasks");var t=s.$root.teamMembers.filter(function(t){return t.user_id===parseInt(s.actorId,10)})[0].first_name;return s.$t("tasks.index.title_user",{user:t})},orderedLists:function orderedLists(){return this.lists?this.lists.sort(function(t,s){return t.data.position-s.data.position}).filter(function(t){return t.data.active}):null}},methods:{taskStatus:taskStatus,humanTime:humanTime,listHasScroll:function listHasScroll(t){if(!t.tasks||0===t.tasks.length)return!1;var s=this.$$('.tasks-list[data-id="'+t.id+'"] .tasks-list-content')[0];return!!s&&s.scrollHeight>s.offsetHeight},loadListTasks:function loadListTasks(s){var e=this,t=e.actor||e.$root.user;r.loadListTasks(s,[t.first_name+" "+t.last_name]).then(function(t){s.tasks=t,e.$nextTick(function(){e.listHasScroll(s)?e.$set(e.listWithScroll,s.id,!0):e.$set(e.listWithScroll,s.id,!1)})})},reloadListsTasks:function reloadListsTasks(){var s=this;s.lists&&s.lists.forEach(function(t){s.loadListTasks(t)})},loadLists:function loadLists(t){var s=this;r.loadLists({},{cache:!t}).then(function(t){t.forEach(function(t){t.tasks=[]}),s.lists=t,0<s.lists.filter(function(t){return t.data.default}).length?s.lists.forEach(function(t){t.data.active&&s.loadListTasks(t)}):r.createDefaultList(s.$root.user).then(function(){s.loadLists()})})},reloadLists:function reloadLists(){this.loadLists(!0)},fastAddTask:function fastAddTask(t,s){var e=this;t.preventDefault();var a=e.fastAddValue[s.id],i={name:a,parent_id:s.id,filters:s.filters};return a&&a.trim()&&(e.fastAddValue[s.id]="",e.fastAddEnabled[s.id]=!1,r.saveTask(i).then(function(){e.loadListTasks(s)})),!1},isPastDate:function isPastDate(t){return new Date(t)<new Date},checklistNumCompleted:function checklistNumCompleted(t){var s="";t&&t.items&&(s+=t.items.filter(function(t){return t.complete}).length,s+="/",s+=t.items.length);return s},isTaskDone:function isTaskDone(t){return 0<="Completed,Closed,Archive Task,Cancel".split(",").indexOf(t.data.status)},canEditList:function canEditList(t){var s=this.$root.account,e="Team"===s.type||"TeamMember"===s.type;return!(t.data.default&&!e)&&-1!==t.permission_to.indexOf("update")}},beforeDestroy:function beforeDestroy(){this.$events.$off("tasks:reloadListsTasks",this.reloadListsTasks),this.$events.$off("tasks:reloadLists",this.reloadLists)},mounted:function mounted(){var t=this;t.loadLists(),t.$events.$on("tasks:reloadListsTasks",t.reloadListsTasks),t.$events.$on("tasks:reloadLists",t.reloadLists)}}},{path:"/tasks/task/:taskId/",popup:{component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-popup",{on:{"popup:close":e.onPopupClose}},[a("f7-view",{attrs:{init:!1}},[a("f7-page",{staticClass:"tasks-page",attrs:{id:"tasks__task",name:"tasks__task"}},[a("f7-navbar",{staticClass:"text-color-white",attrs:{noBorder:""}},[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.taskName))]),e._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{"popover-open":".task-menu-popover","icon-f7":"add"}})],1)],1),e._v(" "),a("f7-popover",{staticClass:"task-menu-popover"},[a("f7-list",[a("f7-list-button",{attrs:{"popover-close":""},on:{click:e.addChecklist}},[e._v(e._s(e.$t("tasks.task.checklist","Checklist")))]),e._v(" "),a("f7-list-button",{attrs:{"popover-close":""},on:{click:e.addDeadline}},[e._v(e._s(e.$t("tasks.task.deadline","Deadline")))])],1)],1),e._v(" "),a("f7-messagebar",{attrs:{placeholder:e.$t("tasks.task.enter_comment","Enter comment"),value:e.comment},on:{input:function(t){e.comment=t.target.value}}},[a("f7-link",{class:{disabled:0===e.comment.trim().length},attrs:{slot:"send-link"},on:{click:e.addComment},slot:"send-link"},[e._v(e._s(e.$t("tasks.task.send","Send")))])],1),e._v(" "),e.task?[a("f7-block",{staticClass:"subheader"},[a("h1",[a("f7-input",{staticClass:"unstyled edit-task-name",attrs:{wrap:!1,type:"textarea",value:e.task.name,resizable:""},on:{input:function(t){e.task.name=t.target.value},change:e.saveTaskName}})],1),e._v(" "),a("input",{ref:"statusInput",staticClass:"unstyled task-status-picker",attrs:{type:"text",readonly:"readonly"},domProps:{value:"Unassigned"===e.task.status?e.$t("tasks.task.waiting_for_assignments","Waiting for assignments"):e.taskStatus(e.task.status)}})]),e._v(" "),a("participants-select",{attrs:{tags:e.task.filters||[]},on:{tagToggle:e.onTagToggle}}),e._v(" "),a("f7-list",{staticClass:"list-custom details bottom-0",attrs:{"media-list":""}},[a("f7-list-item",[a("img",{attrs:{slot:"media",src:e.$addonAssetsUrl+"slice19.png",srcset:e.$addonAssetsUrl+"slice19@2x.png 2x, "+e.$addonAssetsUrl+"slice19.png 3x"},slot:"media"}),e._v(" "),a("f7-input",{staticClass:"inline-edit",attrs:{type:"textarea",placeholder:e.$t("tasks.task.edit_description","Edit the description..."),clearButton:"",value:e.task.data.description,resizable:""},on:{input:function(t){e.task.data.description=t.target.value},change:e.saveTaskDescription}})],1)],1),e._v(" "),a("f7-list",{directives:[{name:"show",rawName:"v-show",value:e.showDeadline||e.task.end_at,expression:"showDeadline || task.end_at"}],staticClass:"list-custom details top-0 bottom-0",attrs:{"media-list":""}},[a("f7-list-item",[a("img",{attrs:{slot:"media",src:e.$addonAssetsUrl+"slice13.png",srcset:e.$addonAssetsUrl+"slice13@2x.png 2x,"+e.$addonAssetsUrl+"slice13.png 3x"},slot:"media"}),e._v(" "),a("div",{staticClass:"item-input-wrap",attrs:{slot:"inner"},slot:"inner"},[a("input",{ref:"deadlineInput",staticClass:"unstyled edit-task-deadline",attrs:{type:"text",placeholder:e.$t("tasks.task.edit_deadline","Edit deadline...")}})]),e._v(" "),a("a",{staticClass:"icon-only remove-deadline",attrs:{slot:"inner",href:"#"},on:{click:e.removeDeadline},slot:"inner"},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice12.png",srcset:e.$addonAssetsUrl+"slice12@2x.png 2x,"+e.$addonAssetsUrl+"slice12.png 3x"}})])])],1),e._v(" "),e.showChecklist||e.task.data.checklist&&e.task.data.checklist.items?a("f7-list",{staticClass:"list-custom checklist top-0",attrs:{"media-list":""}},[a("li",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice17.png",srcset:e.$addonAssetsUrl+"slice17@2x.png 2x,"+e.$addonAssetsUrl+"slice17.png 3x"}})]),e._v(" "),a("div",{staticClass:"item-inner"},[a("div",[e._v(e._s(e.$t("tasks.task.checklist","Checklist")))]),e._v(" "),a("a",{staticClass:"icon-only remove-checklist",attrs:{href:"#"},on:{click:e.removeChecklist}},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice12.png",srcset:e.$addonAssetsUrl+"slice12@2x.png 2x,"+e.$addonAssetsUrl+"slice12.png 3x"}})])])]),e._v(" "),e._l(e.task.data.checklist.items,function(s,t){return a("li",{key:t,staticClass:"item-content",class:{checked:s.complete},on:{click:function(t){e.toggleChecklistItem(s)}}},[a("div",{staticClass:"item-media"},[s.complete?a("img",{attrs:{src:e.$addonAssetsUrl+"slice15.png",srcset:e.$addonAssetsUrl+"slice15@2x.png 2x,"+e.$addonAssetsUrl+"slice15.png 3x"}}):a("img",{attrs:{src:e.$addonAssetsUrl+"slice14.png",srcset:e.$addonAssetsUrl+"slice14@2x.png 2x,"+e.$addonAssetsUrl+"slice14.png 3x"}})]),e._v(" "),a("div",{staticClass:"item-inner"},[e._v(" "+e._s(s.text)+" "),a("a",{staticClass:"icon-only remove-checklist-item",attrs:{href:"#"},on:{click:function(t){e.removeChecklistItem(s)}}},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice12.png",srcset:e.$addonAssetsUrl+"slice12@2x.png 2x,"+e.$addonAssetsUrl+"slice12.png 3x"}})])])])}),e._v(" "),a("li",{staticClass:"item-content"},[a("div",{staticClass:"item-media"},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice16.png",srcset:e.$addonAssetsUrl+"slice16@2x.png 2x,"+e.$addonAssetsUrl+"slice16.png 3x"}})]),e._v(" "),a("div",{staticClass:"item-inner"},[a("input",{staticStyle:{height:"auto"},attrs:{type:"text",placeholder:e.$t("tasks.task.add_items","Add items")},on:{keypress:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.addChecklistItem(t.target)}}})])])],2):e._e(),e._v(" "),a("f7-list",{staticClass:"list-custom activity no-chevron",attrs:{"media-list":""}},[a("f7-list-item",{attrs:{divider:"",title:e.$t("tasks.task.activity","Activity")}}),e._v(" "),e._l(e.task.data.activity,function(t,s){return a("f7-list-item",{key:s,attrs:{after:e.humanTime(t.time),subtitle:"comment"===t.type?t.text:void 0,title:t.user_name,link:"comment"===t.type}},["comment"===t.type?a("img",{attrs:{slot:"media",src:e.$addonAssetsUrl+"slice11.png",srcset:e.$addonAssetsUrl+"slice11@2x.png 2x, "+e.$addonAssetsUrl+"slice11.png 3x"},slot:"media"}):a("img",{attrs:{slot:"media",src:e.$addonAssetsUrl+"slice7.png",srcset:e.$addonAssetsUrl+"slice7@2x.png 2x, "+e.$addonAssetsUrl+"slice7.png 3x"},slot:"media"}),e._v(" "),"comment"!==t.type?a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.text))]):e._e()])})],2)]:e._e()],2)],1)],1)},staticRenderFns:[],components:{participantsSelect:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-select tasks-tag-select tasks-participats-select"},[a("f7-list",{staticClass:"list-custom participants top-0",attrs:{"media-list":""}},[a("f7-list-item",{attrs:{title:e.$t("tasks.task.participants","Participants"),divider:""}}),e._v(" "),a("li",{staticClass:"item-content"},[a("div",{staticClass:"item-inner"},[e._l(e.tags,function(t,s){return["members"===t.context?a("img",{key:s,staticClass:"circle item",attrs:{src:e.teamMemberIconUrl(t.user_id)}}):a("div",{key:s,staticClass:"chip item"},[a("div",{staticClass:"chip-media"},[a("img",{attrs:{src:e.contextIconSrc(t),srcset:e.contextIconSrcset(t)}})]),e._v(" "),a("div",{staticClass:"chip-label"},[e._v(e._s(t.name))])])]}),e._v(" "),a("a",{staticClass:"item icon-only tag-search",attrs:{href:"#"},on:{click:e.openSelector}},[a("img",{attrs:{src:e.$addonAssetsUrl+"slice6.png",srcset:e.$addonAssetsUrl+"slice6@2x.png 2x,"+e.$addonAssetsUrl+"slice6.png 3x"}})])],2)])],1),e._v(" "),e.teamTags?a("f7-popover",{attrs:{id:"task-participants-popover",target:".tag-select .item.tag-search",opened:e.popoverOpened},on:{"popover:closed":function(t){e.popoverOpened=!1}}},[a("f7-list",{staticClass:"no-margin tasks-tag-select-tags-list",attrs:{"no-hairlines":""}},e._l(e.teamTags,function(s,t){return a("f7-list-item",{key:t,attrs:{checkbox:"",checked:e.isTagSelected(s),title:s.name},on:{change:function(t){e.toggleTag(s,t.target.checked)}}},["members"===s.context?a("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):a("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[a("img",{attrs:{src:e.contextIconSrc(s),srcset:e.contextIconSrcset(s)}})])])}))],1):e._e(),e._v(" "),e.teamTags?a("f7-sheet",{attrs:{id:"task-participants-sheet",opened:e.sheetOpened},on:{"sheet:closed":function(t){e.sheetOpened=!1}}},[a("f7-toolbar",[a("div",{staticClass:"left"}),e._v(" "),a("div",{staticClass:"right"},[a("f7-link",{on:{click:function(t){e.sheetOpened=!1}}},[e._v("Done")])],1)]),e._v(" "),a("div",{staticClass:"page-content"},[a("f7-searchbar",{attrs:{"search-container":"#task-participants-sheet .list","search-in":".item-title"}}),e._v(" "),a("f7-list",{staticClass:"no-margin tasks-tag-select-tags-list",attrs:{"no-hairlines":""}},e._l(e.teamTags,function(s,t){return a("f7-list-item",{key:t,attrs:{checkbox:"",checked:e.isTagSelected(s),title:s.name},on:{change:function(t){e.toggleTag(s,t.target.checked)}}},["members"===s.context?a("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):a("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[a("img",{attrs:{src:e.contextIconSrc(s),srcset:e.contextIconSrcset(s)}})])])}))],1)],1):e._e()],1)},staticRenderFns:[],props:{tags:Array},data:function data(){return{teamTags:null,sheetOpened:!1,popoverOpened:!1}},mounted:function mounted(){var s=this;s.$api.getCurrentTeamTags({cache:!0}).then(function(t){s.teamTags=t})},beforeDestroy:function beforeDestroy(){this.$f7.sheet.close("#task-participants-sheet"),this.sheetOpened=!1,this.popoverOpened=!1},methods:{openSelector:function openSelector(){768<=this.$f7.width?this.popoverOpened=!0:this.sheetOpened=!0},isTagSelected:function isTagSelected(s){return 0<this.tags.filter(function(t){return t.name===s.name&&t.id===s.id&&t.type===s.type}).length},contextIconSrc:function contextIconSrc(t){return this.$addonAssetsUrl+"icons/"+t.context.slice(0,-1)+".png"},contextIconSrcset:function contextIconSrcset(t){var s=this.$addonAssetsUrl;return s+"icons/"+t.context.slice(0,-1)+"@2x.png 2x,"+s+"icons/"+t.context.slice(0,-1)+"@3x.png 3x"},teamMemberIconUrl:function teamMemberIconUrl(t){return t?this.$root.$config.apiUrl+"team/members/"+t+"/avatar.png?token="+this.$root.token:"#"},toggleTag:function toggleTag(t,s){s?(this.$emit("tagToggle",t,"add"),this.$emit("tagAdd",t)):(this.$emit("tagToggle",t,"remove"),this.$emit("tagRemove",t))}}}},props:{taskId:[Number,String]},data:function data(){return{id:parseInt(this.taskId,10),task:null,taskName:null,comment:"",showDeadline:!1,showChecklist:!1}},computed:{taskTitle:function taskTitle(){return""}},beforeDestroy:function beforeDestroy(){var t=this;t.datePicker&&t.datePicker.destroy&&t.datePicker.destroy(),t.statusPicker&&t.statusPicker.destroy&&t.statusPicker.destroy(),t.$$(t.$el).find(".page-content").off("scroll")},mounted:function mounted(){var s=this;r.getTask(s.id).then(function(t){s.taskName=t.name,t.data||(t.data={}),s.task=t,s.$nextTick(function(){s.createDatePicker(),s.createStatusPicker()})});var t=s.$$(s.$el).find(".navbar .title"),e=s.$$(s.$el).find(".page-content");e.on("scroll",function(){100<e[0].scrollTop?t.css("opacity",1):t.css("opacity",0)})},methods:{humanTime:humanTime,taskStatus:taskStatus,onPopupClose:function onPopupClose(){this.taskChanged&&this.$events.$emit("tasks:reloadListsTasks")},saveTaskName:function saveTaskName(){var t=this;t.taskName!==t.task.name&&(t.taskName=t.task.name,t.saveTask())},saveTaskDescription:function saveTaskDescription(){this.saveTask()},onTagToggle:function onTagToggle(e,t){var a;"add"===t?this.task.filters.push(e):(this.task.filters.forEach(function(t,s){t.name===e.name&&t.type===e.type&&t.id===e.id&&(a=s)}),this.task.filters.splice(a,1));this.saveTask()},addChecklist:function addChecklist(){this.showChecklist=!0;var t=this.task;t.data||(t.data={}),t.data.checklist||(t.data.checklist={}),t.data.checklist.items||(t.data.checklist.items=[])},removeChecklist:function removeChecklist(){this.showChecklist=!1,this.task.data.checklist={},this.saveTask()},addChecklistItem:function addChecklistItem(t){var s=this,e=s.task,a=t.value.trim();a&&(e.data||s.$set(s.task,"data",{}),e.data.checklist||s.$set(e.data,"checklist",{}),e.data.checklist.items||s.$set(e.data.checklist,"items",[]),e.data.checklist.items.push({complete:!1,text:a}),t.value="",t.blur(),s.saveTask(),s.$set(s,"task",s.task),s.$set(s.task.data.checklist,"items",e.data.checklist.items),s.$forceUpdate())},toggleChecklistItem:function toggleChecklistItem(t){t.complete=!t.complete,this.$set(this.task.data.checklist,"items",this.task.data.checklist.items),this.saveTask()},removeChecklistItem:function removeChecklistItem(t){var s=this;s.task.data.checklist.items.splice(s.task.data.checklist.items.indexOf(t),1),s.$set(s.task.data.checklist,"items",s.task.data.checklist.items),s.saveTask()},addDeadline:function addDeadline(){this.showDeadline=!0},removeDeadline:function removeDeadline(){var t=this;t.showDeadline=!1;var s=t.task;s.end_at&&(s.end_at=null,t.saveTask()),t.$refs.deadlineInput&&(t.$refs.deadlineInput.value="")},addComment:function addComment(){var t=this.comment;this.comment="",this.addActivity("comment",t)},saveTask:function saveTask(){var t=this.task;this.taskChanged=!0,r.saveTask(t)},addActivity:function addActivity(t,s){var e=this.$root.user,a={type:t,text:s,time:new Date,user_id:e.id,user_name:e.first_name},i=this.task;i.data||(i.data={}),i.data.activity||(i.data.activity=[]),i.data.activity.unshift(a),this.saveTask()},createStatusPicker:function createStatusPicker(){var a=this,i=a.task;a.statusPicker=a.$f7.picker.create({inputEl:a.$refs.statusInput,convertToPopover:!1,value:[i.status],cols:[{textAlign:"center",values:o,displayValues:o.map(function(t){return a.$t("tasks.status."+t.toLowerCase().replace(/ /g,"_"),{defaultValue:t})})}],on:{close:function close(t){var s=t.cols[0].displayValue,e=t.cols[0].value;e!==i.status&&(i.status=e,a.addActivity("status",a.$t("tasks.task.changed_status_to",{status:s})))}}})},createDatePicker:function createDatePicker(){var t,s=this,e=s.task,a=e.end_at,i=!!a;"string"==typeof a&&(a=new Date(a)),a&&(t=[a.getMonth(),a.getDate(),a.getFullYear(),a.getHours(),a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes()]);s.datePicker=s.$f7.picker.create({inputEl:s.$refs.deadlineInput,rotateEffect:!0,inputReadOnly:!0,convertToPopover:!1,updateValuesOnMomentum:!1,value:t||void 0,routableModals:!1,formatValue:function formatValue(t,s){var e=s[0]+" "+t[1]+", "+t[2]+" "+t[3]+":"+t[4],a=new Date(e);return!Number.isNaN(a.getTime())&&humanTime(this.currentDate=a)},cols:[{values:"0 1 2 3 4 5 6 7 8 9 10 11".split(" ").map(function(t){return parseInt(t,10)}),displayValues:["January","February","March","April","May","June","July","August","September","October","November","December"],textAlign:"left"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},{values:function(){for(var t=(new Date).getFullYear(),s=[],e=t;e<=t+10;e+=1)s.push(e);return s}()},{divider:!0,content:"  "},{values:function(){for(var t=[],s=0;s<=23;s+=1)t.push(s);return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],s=0;s<=59;s+=1)t.push(s<10?"0"+s:s);return t}()}],on:{open:function open(){if(!i){i=!0;var t=new Date;this.setValue([t.getMonth(),t.getDate(),t.getFullYear(),t.getHours(),t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()])}},close:function close(){e.end_at=new Date(this.currentDate).toJSON(),s.saveTask()},change:function change(t,s){var e=new Date(t.value[2],1*t.value[0]+1,0).getDate();s[1]>e&&t.cols[1].setValue(e)}}})}}}}},{path:"/tasks/list-edit/:listId/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",{staticClass:"tasks-page",attrs:{name:"tasks__list-edit",id:"tasks__list-edit"}},[a("f7-navbar",[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("tasks.list-edit.title","Edit List")))]),e._v(" "),a("f7-nav-right",[e.showSave?a("f7-link",{attrs:{"icon-f7":"check"},on:{click:e.save}}):e._e()],1)],1),e._v(" "),e.list?a("f7-list",{staticClass:"list-custom"},[a("f7-list-item",[a("f7-label",[e._v(e._s(e.$t("tasks.list-edit.name","Name")))]),e._v(" "),a("f7-input",{attrs:{type:"text",value:e.list.name},on:{input:function(t){e.onNameChange(t.target.value)}}})],1),e._v(" "),a("f7-list-item",{attrs:{title:e.$t("tasks.list-edit.show-fast-add-task","Show Fast Add Task")}},[a("f7-toggle",{attrs:{slot:"after",checked:e.list.data.show_fast_add},on:{change:function(t){e.toggleFastAdd(t.target.checked)}},slot:"after"})],1),e._v(" "),a("f7-list-item",{attrs:{"smart-select":"",title:e.$t("tasks.list-edit.filter-status","Filter Status")}},[a("select",{staticClass:"toggle-save",attrs:{name:"statuses",multiple:"multiple"},on:{change:e.onStatusChange}},e._l(e.taskStatuses,function(t,s){return a("option",{key:s,domProps:{value:t,selected:0<=e.list.data.statuses.indexOf(t)}},[e._v(e._s(e.$t("tasks.status."+t.toLowerCase().replace(/ /g,"_"))))])}))]),e._v(" "),a("f7-list-item",{attrs:{link:"#",title:e.$t("tasks.common.date_range","Date Range"),after:e.formatDateRange(e.list.data.date_range)},on:{click:e.showDateRange}}),e._v(" "),e._l(e.permissions,function(s,t){return a("tag-select",{key:t,attrs:{listId:e.list.id,data:s},on:{tagAdd:function(t){return e.addListPermission(s,t)},tagRemove:function(t){return e.removeListPermission(s,t)}}})}),e._v(" "),a("tag-select",{attrs:{listId:e.list.id,data:{title:e.$t("tasks.parmissions.filter_tasks.title"),name:"filter_tasks",filters:e.list.filters}},on:{tagAdd:e.addListFilter,tagRemove:e.removeListFilter}})],2):e._e(),e._v(" "),e.list&&!e.list.data.default?a("f7-list",{staticClass:"margin-top"},[a("f7-list-button",{staticClass:"color-custom",attrs:{color:"custom"},on:{click:e.deleteList}},[e._v(e._s(e.$t("tasks.list-edit.delete-list","Delete List")))])],1):e._e()],1)},staticRenderFns:[],components:{tagSelect:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tag-select tasks-tag-select tasks-list-tags-select"},[a("ul",[a("li",{staticClass:"item-divider"},[e._v(e._s(e.$t("tasks.permissions."+e.data.name+".title")))]),e._v(" "),a("li",[a("a",{staticClass:"item-link tag-search",attrs:{href:"#"},on:{click:e.openSelector}},[a("div",{staticClass:"item-content"},[e._m(0),e._v(" "),a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[e._v(e._s(e.$t("tasks.common.search_members_tags","Search Members, Tags")))])])])])])]),e._v(" "),a("ul",{staticClass:"tag-items"},e._l(e.data.filters,function(s,t){return a("li",{key:t,staticClass:"tag-item"},[a("div",{staticClass:"item-content"},[a("div",{staticClass:"item-inner"},[a("div",{staticClass:"item-title"},[e._v(e._s(s.name))]),e._v(" "),a("div",{staticClass:"item-after"},[a("a",{staticClass:"item-link",staticStyle:{height:"24px"},attrs:{href:"#"},on:{click:function(t){e.removeTag(s)}}},[a("i",{staticClass:"material-icons"},[e._v("close")])])])])])])}))])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"item-media"},[s("i",{staticClass:"material-icons md-36"},[this._v("search")])])}],props:{data:Object,listId:[String,Number]},data:function data(){return{teamTags:null}},mounted:function mounted(){var s=this;s.$api.getCurrentTeamTags({cache:!0}).then(function(t){s.teamTags=t})},methods:{openSelector:function openSelector(){var e=this;e.$f7router.navigate("/tasks/list-edit/"+e.listId+"/tag-select/",{props:{filters:e.data.filters,pageTitle:e.$t("tasks.permissions."+e.data.name+".title"),teamTags:e.teamTags,onChange:function onChange(t,s){s?e.$emit("tagAdd",t):e.$emit("tagRemove",t)}}})},removeTag:function removeTag(t){this.$emit("tagRemove",t)}}}},props:{listId:[String,Number]},data:function data(){return{showSave:!1,id:parseInt(this.listId,10),taskStatuses:o,list:null,permissions:[]}},beforeDestroy:function beforeDestroy(){this.$events.$off("tasks:setListDateRange",this.updateListDateRange)},mounted:function mounted(){var e=this;r.getList(e.id).then(function(s){s.data||(s.data={}),s.data.statuses||(s.data.statuses=[]),e.list=s,e.$api.getInstalledAddonPermission("tasks","task_list_read_access",{resource_id:s.id,with_filters:!0}).then(function(t){t.resource_id=s.id,e.permissions.push(t)}),e.$api.getInstalledAddonPermission("tasks","task_list_edit_access",{resource_id:s.id,with_filters:!0}).then(function(t){t.resource_id=s.id,e.permissions.push(t)})}),e.$events.$on("tasks:setListDateRange",e.updateListDateRange)},methods:{formatDateRange:function formatDateRange(t){return t?"string"==typeof t?window.tommy.i18n.t("tasks.date_range."+t):Array.isArray(t)?formatDate(t[0])+" - "+formatDate(t[1]):t||"":""},updateListDateRange:function updateListDateRange(t,s){this.list.id===t&&(this.list.data.date_range=s)},onNameChange:function onNameChange(t){this.saving||(this.list.name=t,this.showSave=!0)},toggleFastAdd:function toggleFastAdd(t){this.saving||(this.list.data.show_fast_add=t,this.showSave=!0)},onStatusChange:function onStatusChange(t){this.saving||(this.list.data.statuses=this.$$(t.target).val(),this.showSave=!0)},showDateRange:function showDateRange(){this.$f7router.navigate("/tasks/list-edit/"+this.list.id+"/date-range/",{props:{list:this.list}})},save:function save(){var t=this;t.saving||(t.saving=!0,t.showSave=!1,r.saveList(t.list).then(function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()}))},deleteList:function deleteList(){var t=this;t.saving||(t.saving=!0,t.showSave=!1,r.deleteList(t.list.id).then(function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()}))},addListFilter:function addListFilter(t){this.saving||(this.showSave=!0,this.list.filters.push(t))},removeListFilter:function removeListFilter(t){this.saving||(this.showSave=!0,this.list.filters.splice(this.list.filters.indexOf(t),1))},saveListPermission:function saveListPermission(t){this.$api.updateInstalledAddonPermission("tasks",t.name,{resource_id:t.resource_id,with_filters:!0,filters:JSON.stringify(t.filters)})},addListPermission:function addListPermission(t,s){t.filters.push(s),this.saveListPermission(t)},removeListPermission:function removeListPermission(t,s){t.filters.splice(t.filters.indexOf(s),1),this.saveListPermission(t)}}}},{path:"/tasks/task-add/",component:{render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("f7-page",{staticClass:"tasks-page",attrs:{id:"tasks__task-add",name:"tasks__task-add"}},[e("f7-navbar",[e("tommy-nav-back"),s._v(" "),e("f7-nav-title",[s._v(s._s(s.$t("tasks.task-add.title","Add Task")))]),s._v(" "),e("f7-nav-right",[s.name&&s.name.trim().length&&!s.saving?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:s.save}}):s._e()],1)],1),s._v(" "),e("f7-list",[e("f7-list-item",[e("f7-input",{attrs:{type:"text",value:s.name,placeholder:s.$t("tasks.task-add.name","Name")},on:{input:function(t){s.name=t.target.value}}})],1)],1)],1)},staticRenderFns:[],data:function data(){return{name:"",saving:!1}},methods:{save:function save(){var t=this;if(!t.saving){t.saving=!0;var s=t.$root.user,e={name:t.name,status:o[0],filters:[{context:"members",name:s.first_name+" "+s.last_name,user_id:s.id}],data:{activity:[{type:"status",text:t.$t("tasks.task.created_a_task"),time:new Date,user_id:s.id,user_name:s.first_name}]}};r.saveTask(e).then(function(){t.$events.$emit("tasks:reloadListsTasks"),t.$f7router.back()})}}}}},{path:"/tasks/list-management/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",{staticClass:"tasks-page",attrs:{name:"tasks__list-management",id:"tasks__list-management"}},[a("f7-navbar",[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("tasks.list-management.title","List Management")))]),e._v(" "),a("f7-nav-right",[e.showSave?a("f7-link",{attrs:{"icon-f7":"check"},on:{click:e.save}}):e._e()],1)],1),e._v(" "),e.lists?a("f7-list",{staticClass:"list-custom",attrs:{sortable:"",sortableEnabled:"",inset:""},on:{"sortable:sort":e.onSort}},e._l(e.orderedLists,function(s){return a("f7-list-item",{key:s.id,attrs:{checkbox:"",checked:s.data.active,title:s.name},on:{change:function(t){e.toggleListActive(s,t.target.checked)}}})})):e._e(),e._v(" "),a("f7-list",{staticClass:"list-custom margin-bottom",attrs:{inset:""}},[a("f7-list-item",{attrs:{link:"/tasks/list-add/",title:"Create New List"}})],1)],1)},staticRenderFns:[],data:function data(){return{saving:!1,showSave:!1,lists:null}},mounted:function mounted(){var s=this;r.loadLists({},{cache:!1}).then(function(t){s.lists=t})},computed:{orderedLists:function orderedLists(){return this.lists?this.lists.sort(function(t,s){return t.data.position-s.data.position}):null}},methods:{onSort:function onSort(t,s){void 0===s&&(s={});var e=s.from,a=s.to,i=this;i.saving||(i.showSave=!0,i.$nextTick(function(){var t;i.lists[e].data.position=a,(t=i.lists).splice.apply(t,[a,0].concat(i.lists.splice(e,1))),i.$forceUpdate()}))},toggleListActive:function toggleListActive(t,s){this.saving||(this.showSave=!0,t.data.active=s)},save:function save(){var t=this;t.showSave=!1;var e=[];t.lists.forEach(function(t,s){t.data.position=s,e.push(r.saveList(t))}),Promise.all(e).then(function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()})}}}},{path:"/tasks/list-add/",component:{render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("f7-page",{staticClass:"tasks-page",attrs:{name:"tasks__list-add",id:"tasks__list-add"}},[e("f7-navbar",[e("tommy-nav-back"),s._v(" "),e("f7-nav-title",[s._v(s._s(s.$t("tasks.list-add.title","Add List")))]),s._v(" "),e("f7-nav-right",[s.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:s.save}}):s._e()],1)],1),s._v(" "),e("f7-list",{staticClass:"top-0"},[e("f7-list-item",[e("f7-input",{attrs:{type:"text",placeholder:"Name",value:s.name},on:{input:function(t){s.name=t.target.value}}})],1)],1)],1)},staticRenderFns:[],data:function data(){return{saving:!1,name:""}},computed:{showSave:function showSave(){return this.name.trim().length}},methods:{save:function save(){var t=this;t.showSave=!1,t.saving||(t.saving=!0,r.saveList({name:t.name}).then(function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back("/tasks/",{force:!0})}))}}}},{path:"/tasks/list-edit/:listId/date-range/",component:{render:function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("f7-page",{staticClass:"tasks-page",attrs:{name:"tasks__date-range-select",id:"tasks__date-range-select"}},[e("f7-navbar",[e("tommy-nav-back"),s._v(" "),e("f7-nav-title",[s._v(s._s(s.$t("tasks.common.date_range","Date Range")))]),s._v(" "),e("f7-nav-right",[s.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:s.save}}):s._e()],1)],1),s._v(" "),e("f7-list",[e("f7-list-item",{attrs:{radio:"",value:"",checked:!(s.isCustomRange||""!==s.range&&s.range),title:s.$t("tasks.date_range.none","None")},on:{change:[function(t){s.range=""},function(t){s.setPlainRange("")}]}}),s._v(" "),e("f7-list-item",{attrs:{radio:"",value:"today",checked:!s.isCustomRange&&"today"===s.range,title:s.$t("tasks.date_range.today","Today")},on:{change:function(t){s.setPlainRange("today")}}}),s._v(" "),e("f7-list-item",{attrs:{radio:"",value:"week",checked:!s.isCustomRange&&"week"===s.range,title:s.$t("tasks.date_range.week","This Week")},on:{change:function(t){s.setPlainRange("week")}}}),s._v(" "),e("f7-list-item",{attrs:{radio:"",value:"month",checked:!s.isCustomRange&&"month"===s.range,title:s.$t("tasks.date_range.month","This Month")},on:{change:function(t){s.setPlainRange("month")}}})],1),s._v(" "),e("f7-list",{staticClass:"top-10"},[e("f7-list-item",{attrs:{title:s.$t("tasks.common.choose_range","Choose Range")}},[e("f7-toggle",{attrs:{slot:"after",checked:s.isCustomRange},on:{change:function(t){s.toggleCustomRange(t.target.checked)}},slot:"after"})],1),s._v(" "),e("f7-list-item",{directives:[{name:"show",rawName:"v-show",value:s.isCustomRange,expression:"isCustomRange"}]},[e("f7-label",[s._v(s._s(s.$t("tasks.common.start_date","Start Date")))]),s._v(" "),e("f7-input",{ref:"rangeStart",attrs:{type:"text"}})],1),s._v(" "),e("f7-list-item",{directives:[{name:"show",rawName:"v-show",value:s.isCustomRange,expression:"isCustomRange"}]},[e("f7-label",[s._v(s._s(s.$t("tasks.common.end_date","End Date")))]),s._v(" "),e("f7-input",{ref:"rangeEnd",attrs:{type:"text"}})],1)],1)],1)},staticRenderFns:[],props:{list:Object},data:function data(){var t=this.list.data.date_range;return{showSave:!1,dateFrom:Array.isArray(t)&&t[0]?t:(new Date).getTime(),dateTo:Array.isArray(t)&&t[1]?t:(new Date).getTime(),range:t}},computed:{isCustomRange:function isCustomRange(){var t=this.range;return Array.isArray(t)||!(!t||"string"==typeof t)}},mounted:function mounted(){var e=this,a=!1,i=!1;e.calendarFrom=e.$f7.calendar.create({inputEl:e.$$(e.$refs.rangeStart.$el).find("input"),closeOnSelect:!0,value:[e.dateFrom],on:{change:function change(t,s){a&&(e.showSave=!0),a=!0,e.dateFrom=new Date(s[0]).getTime(),Array.isArray(e.range)&&e.range[0]&&(e.range[0]=e.dateFrom),e.dateFrom>e.dateTo&&e.calendarTo.setValue([e.dateFrom])}}}),e.calendarTo=e.$f7.calendar.create({inputEl:e.$$(e.$refs.rangeEnd.$el).find("input"),closeOnSelect:!0,value:[e.dateTo],on:{change:function change(t,s){i&&(e.showSave=!0),i=!0,e.dateTo=new Date(s[0]).getTime(),Array.isArray(e.range)&&e.range[1]&&(e.range[1]=e.dateTo),e.dateTo<e.dateFrom&&e.calendarFrom.setValue([e.dateTo])}}})},methods:{setPlainRange:function setPlainRange(t){this.range=t,this.showSave=!0},toggleCustomRange:function toggleCustomRange(t){var s=this;s.showSave=!0,s.range=t?[s.dateFrom,s.dateTo]:""},save:function save(){var t=this;if(!t.saving){t.saving=!0,t.showSave=!1;var s=Object.assign({},t.list);s.data.date_range=t.range,r.saveList(s).then(function(){t.$events.$emit("tasks:setListDateRange",t.list.id,t.range),t.$f7router.back()})}}}}},{path:"/tasks/list-edit/:listId/tag-select/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",{staticClass:"tasks-page"},[a("f7-navbar",[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.pageTitle))]),e._v(" "),a("f7-subnavbar",{attrs:{inner:!1}},[a("f7-searchbar",{attrs:{"search-container":"#list-edit-tag-select","search-in":".item-title"}})],1)],1),e._v(" "),a("f7-list",{staticClass:"no-margin no-hairlines tasks-tag-select-tags-list",attrs:{id:"list-edit-tag-select"}},e._l(e.teamTags,function(s,t){return a("f7-list-item",{key:t,attrs:{checkbox:"",checked:e.isTagSelected(s),title:s.name},on:{change:function(t){e.toggleTag(s,t.target.checked)}}},["members"===s.context?a("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):a("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[a("img",{attrs:{src:e.contextIconSrc(s),srcset:e.contextIconSrcset(s)}})])])}))],1)},staticRenderFns:[],props:{listId:[String,Number],pageTitle:String,filters:Array,teamTags:Array,onChange:Function},methods:{isTagSelected:function isTagSelected(s){return 0<this.filters.filter(function(t){return t.name===s.name&&t.id===s.id&&t.type===s.type}).length},contextIconSrc:function contextIconSrc(t){return this.$addonAssetsUrl+"icons/"+t.context.slice(0,-1)+".png"},contextIconSrcset:function contextIconSrcset(t){var s=this.$addonAssetsUrl;return s+"icons/"+t.context.slice(0,-1)+"@2x.png 2x,"+s+"icons/"+t.context.slice(0,-1)+"@3x.png 3x"},toggleTag:function toggleTag(t,s){this.onChange&&this.onChange(t,s)}}}}]}();