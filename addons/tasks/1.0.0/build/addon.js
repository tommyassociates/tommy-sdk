var addon=function(t){var s={};function e(a){if(s[a])return s[a].exports;var i=s[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)e.d(a,i,function(s){return t[s]}.bind(null,i));return a},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=1)}([,function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{id:"tasks__index",name:"tasks__index"}},[e("f7-navbar",[e("tommy-nav-menu"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.pageTitle))]),t._v(" "),e("f7-nav-right",[e("f7-link",{attrs:{href:"/tasks/list-management/","icon-f7":"gear"}}),t._v(" "),e("f7-link",{attrs:{href:"/tasks/task-add/","icon-f7":"add"}})],1)],1),t._v(" "),t.orderedLists&&t.orderedLists.length?e("f7-swiper",{attrs:{params:{slidesPerView:"auto",breakpointsInverse:!0,centeredSlides:!1,touchMoveStopPropagation:!1,on:{tap:t.onSlideClick},breakpoints:{768:{centeredSlides:!0}}}}},t._l(t.orderedLists,(function(s){return e("f7-swiper-slide",{key:s.id},[e("div",{staticClass:"tasks__list",class:{hasScroll:t.listWithScroll[s.id]},attrs:{"data-id":s.id}},[e("div",{staticClass:"tasks__list-header"},[e("div",[t._v(t._s(s.name))]),t._v(" "),t.canEditList(s)?e("div",[e("a",{attrs:{"data-url":"/tasks/list-edit/"+s.id+"/"}},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice6.png",srcset:t.$addonAssetsUrl+"slice6@2x.png 2x, "+t.$addonAssetsUrl+"slice6@3x.png 3x"}})])]):t._e()]),t._v(" "),e("div",{staticClass:"tasks__list-content"},[s.tasks&&s.tasks.length?t._l(s.tasks,(function(s,a){return e("a",{key:a,staticClass:"card task-card",class:t.isTaskDone(s)?"color-gray done":"",attrs:{"data-url":"/tasks/task/"+s.id+"/"}},[e("div",{staticClass:"card-content card-content-padding"},[e("p",[t._v(t._s(s.name))])]),t._v(" "),e("div",{staticClass:"card-footer no-border color-gray"},[s.end_at?e("span",{staticClass:"badge",class:t.isPastDate(s.end_at)?"bg-red":"bg-blue"},[t._v(t._s(t.humanTime(s.end_at)))]):s.data.checklist?e("span",{staticClass:"icon"},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice1.png",srcset:t.$addonAssetsUrl+"slice1@2x.png 2x,"+t.$addonAssetsUrl+"slice1@3x.png 3x"}}),t._v("\n                  "+t._s(t.checklistNumCompleted(s.data.checklist))+"\n                ")]):e("span",{staticClass:"icon"},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice2.png",srcset:t.$addonAssetsUrl+"slice2@2x.png 2x,"+t.$addonAssetsUrl+"slice2@3x.png 3x"}})]),t._v(" "),e("span",[t._v("\n                  "+t._s(s.status?t.taskStatus(s.status):t.$t("tasks.index.unassigned","Unassigned"))+"\n                ")])])])})):t._e()],2),t._v(" "),s.data.show_fast_add?e("div",{staticClass:"tasks__list-footer"},[t.fastAddEnabled[s.id]?e("div",{staticClass:"in"},[e("form",{staticClass:"card-form",on:{submit:function(e){return t.fastAddTask(e,s)}}},[e("input",{attrs:{autofocus:"",type:"text"},domProps:{value:t.fastAddValue[s.id]},on:{input:function(e){t.fastAddValue[s.id]=e.target.value}}}),t._v(" "),e("div",{staticClass:"buttons"},[e("a",{staticClass:"button cancel",attrs:{href:"#"},on:{click:function(e){return t.$set(t.fastAddEnabled,s.id,!1)}}},[t._v(t._s(t.$t("tasks.index.cancel","Cancel")))]),t._v(" "),e("button",{staticClass:"button button-fill color-red save",attrs:{type:"submit"}},[t._v(t._s(t.$t("tasks.index.done","Done")))])])])]):e("div",{staticClass:"in"},[e("div",{staticClass:"card-add",on:{click:function(e){return t.$set(t.fastAddEnabled,s.id,!0)}}},[t._v(t._s(t.$t("tasks.index.add-task","Add task")))])])]):t._e()])])})),1):t._e()],1)};a._withStripped=!0;var i=window.tommy,n=i.api,r={actor:void 0,actorId:void 0,loadListTasks:function(t,s){if(t.data&&t.filters)for(var e=0;e<t.filters.length;e+=1)s.indexOf(t.filters[e].name)<0&&s.push(t.filters[e].name);var a={addon:"tasks",kind:"Task",tags:s,with_filters:!0,with_permission_to:!0,actor_id:r.actorId};return t.data.date_range&&(a.date_range=t.data.date_range),t.data.statuses&&(a.status=t.data.statuses),a.data=JSON.stringify(a.data),n.getFragments(a)},addTaskActivity:function(t,s,e){var a=i.root.user,n={type:s,text:e,time:new Date,user_id:a.id,user_name:a.first_name};return t.data||(t.data={}),t.data.activity||(t.data.activity=[]),t.data.activity.unshift(n),n},getTask:function(t){return n.getFragment(t,{data:{with_filters:!0}})},saveTask:function(t){if(t.addon="tasks",t.kind="Task",t.with_filters=!0,t.with_permission_to=!0,t.start_at||(t.start_at=(new Date).getTime()),!t.id){t.with_permissions=["task_create_access","task_edit_access"];var s=r.actor;s&&(t.filters||(t.filters=[]),t.filters.push({context:"members",name:"".concat(s.first_name," ").concat(s.last_name),user_id:s.user_id}))}var e=Object.assign({},t,{data:JSON.stringify(t.data)});return t.id?n.updateFragment(t.id,e):n.createFragment(e)},loadList:function(t){return n.getFragment(t,{data:{addon:"tasks",kind:"TaskList",with_filters:!0,with_permission_to:!0}})},loadLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.getFragments(Object.assign({addon:"tasks",kind:"TaskList",with_filters:!0,with_permission_to:!0,actor_id:r.actorId,user_id:r.actorId},t),s)},deleteList:function(t){return n.deleteFragment(t)},saveList:function(t){t.addon="tasks",t.kind="TaskList",t.with_filters=!0,t.with_permission_to=!0,t.data||(t.data={}),void 0===t.data.position&&(t.data.position=0),void 0===t.data.active&&(t.data.active=!0),void 0===t.data.show_fast_add&&(t.data.show_fast_add=!0),t.id||(t.with_permissions=["task_list_read_access","task_list_edit_access"]);var s=Object.assign({},t,{data:JSON.stringify(t.data),filters:JSON.stringify(t.filters)});return t.id?n.updateFragment(t.id,s):n.createFragment(s)},createDefaultList:function(t){var s={name:i.i18n.t("tasks.index.default-list-name"),data:{default:!0},filters:[{context:"members",name:"".concat(t.first_name," ").concat(t.last_name),user_id:t.id}]};return r.saveList(s)}},o=r;var c=function(t){var s=window.tommy.moment,e=s.utc(t).toDate();if(s(e).isValid()){var a=s().diff(s(e),"days");if(1===a)return"Yesterday ".concat(s(e).format("h:mm A"));if(0===a)return"Today ".concat(s(e).format("h:mm A"));if(-1===a)return"Yesterday ".concat(s(e).format("h:mm A"));if(a>=1&&a<=8||a>=-8&&a<=-1)return s(e).format("ddd h:mm A");if(a>=365||a<=-365)return s(e).format("MMM D, YYYY h:mm A");if(a>=8||a<=-8)return s(e).format("MMM D h:mm A")}return"None"};var l=function(t){var s=t.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_|_$)/g,"");return window.tommy.i18n.t("tasks.status.".concat(s),t)};function d(t,s,e,a,i,n,r,o){var c,l="function"==typeof t?t.options:t;if(s&&(l.render=s,l.staticRenderFns=e,l._compiled=!0),a&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):i&&(c=o?function(){i.call(this,this.$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,s){return c.call(s),d(t,s)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}var u=d({data:function(){return{lists:null,actorId:this.$f7route.query.actor_id,fastAddEnabled:{},fastAddValue:{},listWithScroll:{}}},created:function(){this.actorId?(o.actorId=parseInt(this.actorId,10),o.actor=this.actor):(delete o.actorId,delete o.actor)},computed:{actor:function(){var t=this;return t.actorId?t.$root.teamMembers.filter((function(s){return s.user_id===parseInt(t.actorId,10)}))[0]:null},pageTitle:function(){var t=this;if(!t.actorId)return t.$t("tasks.index.title","Tasks");var s=t.$root.teamMembers.filter((function(s){return s.user_id===parseInt(t.actorId,10)}))[0].first_name;return t.$t("tasks.index.title_user",{user:s})},orderedLists:function(){return this.lists?this.lists.sort((function(t,s){return t.data.position-s.data.position})).filter((function(t){return t.data.active})):null}},methods:{onSlideClick:function(t){var s=this.$$(t.target).closest("a").eq(0).attr("data-url");s&&this.$f7router.navigate(s)},taskStatus:l,humanTime:c,listHasScroll:function(t){if(!t.tasks||0===t.tasks.length)return!1;var s=this.$$('.tasks__list[data-id="'.concat(t.id,'"] .tasks__list-content'))[0];return!!s&&s.scrollHeight>s.offsetHeight},loadListTasks:function(t){var s=this,e=s.actor||s.$root.user;o.loadListTasks(t,["".concat(e.first_name," ").concat(e.last_name)]).then((function(e){t.tasks=e,s.$nextTick((function(){s.listHasScroll(t)?s.$set(s.listWithScroll,t.id,!0):s.$set(s.listWithScroll,t.id,!1)}))}))},reloadListsTasks:function(){var t=this;t.lists&&t.lists.forEach((function(s){t.loadListTasks(s)}))},loadLists:function(t){var s=this;o.loadLists({},{cache:!t}).then((function(t){t.forEach((function(t){t.tasks=[]})),s.lists=t,s.lists.filter((function(t){return t.data.default})).length>0||s.actorId?s.lists.forEach((function(t){t.data.active&&s.loadListTasks(t)})):o.createDefaultList(s.$root.user).then((function(){s.loadLists()}))}))},reloadLists:function(){this.loadLists(!0)},fastAddTask:function(t,s){var e=this;t.preventDefault();var a=e.fastAddValue[s.id],i={name:a,parent_id:s.id,filters:s.filters};return!(!a||!a.trim())&&(e.fastAddValue[s.id]="",e.fastAddEnabled[s.id]=!1,o.saveTask(i).then((function(){e.loadListTasks(s)})),!1)},isPastDate:function(t){return new Date(t)<new Date},checklistNumCompleted:function(t){var s="";t&&t.items&&(s+=t.items.filter((function(t){return t.complete})).length,s+="/",s+=t.items.length);return s},isTaskDone:function(t){return"Completed,Closed,Archive Task,Cancel".split(",").indexOf(t.data.status)>=0},canEditList:function(t){var s=this.$root.account,e="Team"===s.type||"TeamMember"===s.type;return!(t.data.default&&!e)&&-1!==t.permission_to.indexOf("update")},onSympleEvent:function(t){this.destroyed||t&&t.name&&0===t.name.indexOf("task_")&&this.reloadListsTasks()}},beforeDestroy:function(){this.destroyed=!0,this.$events.$off("tasks:reloadListsTasks",this.reloadListsTasks),this.$events.$off("tasks:reloadLists",this.reloadLists)},mounted:function(){var t=this;t.loadLists(),t.$events.$on("tasks:reloadListsTasks",t.reloadListsTasks),t.$events.$on("tasks:reloadLists",t.reloadLists),t.$events.$emit("getChatClient",(function(s){s.on("event",t.onSympleEvent)}))}},a,[],!1,null,null,null);u.options.__file="addons/tasks/1.0.0/src/pages/index.vue";var m=u.exports,f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{id:"tasks__task-add",name:"tasks__task-add"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("tasks.task-add.title","Add Task")))]),t._v(" "),e("f7-nav-right",[t.name&&t.name.trim().length&&!t.saving?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:t.save}}):t._e()],1)],1),t._v(" "),e("f7-list",[e("f7-list-item",[e("f7-input",{attrs:{type:"text",value:t.name,placeholder:t.$t("tasks.task-add.name","Name")},on:{input:function(s){t.name=s.target.value}}})],1)],1)],1)};f._withStripped=!0;var v=["Unassigned","Assigned","Processing","Completed","Closed","Archive Task","Cancel"],h=d({data:function(){return{name:"",saving:!1}},methods:{save:function(){var t=this;if(!t.saving){t.saving=!0;var s=t.$root.user,e={name:t.name,status:v[0],filters:[{context:"members",name:"".concat(s.first_name," ").concat(s.last_name),user_id:s.id}],data:{activity:[{type:"status",text:t.$t("tasks.task.created_a_task"),time:new Date,user_id:s.id,user_name:s.first_name}]}};o.saveTask(e).then((function(){t.$events.$emit("tasks:reloadListsTasks"),t.$f7router.back()}))}}}},f,[],!1,null,null,null);h.options.__file="addons/tasks/1.0.0/src/pages/task-add.vue";var g=h.exports,p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-popup",{on:{"popup:close":t.onPopupClose}},[e("f7-view",{attrs:{init:!1}},[e("f7-page",{staticClass:"tasks__page",attrs:{id:"tasks__task",name:"tasks__task"}},[e("f7-navbar",{staticClass:"text-color-white",attrs:{noBorder:""}},[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",{attrs:{"text-color":"white"}},[t._v(t._s(t.taskName))]),t._v(" "),e("f7-nav-right",[e("f7-link",{attrs:{"popover-open":".task-menu-popover","icon-f7":"add"}})],1)],1),t._v(" "),e("f7-popover",{staticClass:"task-menu-popover"},[e("f7-list",[e("f7-list-button",{attrs:{"popover-close":""},on:{click:t.addChecklist}},[t._v(t._s(t.$t("tasks.task.checklist","Checklist")))]),t._v(" "),e("f7-list-button",{attrs:{"popover-close":""},on:{click:t.addDeadline}},[t._v(t._s(t.$t("tasks.task.deadline","Deadline")))])],1)],1),t._v(" "),e("f7-messagebar",{attrs:{placeholder:t.$t("tasks.task.enter_comment","Enter comment"),value:t.comment},on:{input:function(s){t.comment=s.target.value}}},[e("f7-link",{class:{disabled:0===t.comment.trim().length},attrs:{slot:"send-link"},on:{click:t.addComment},slot:"send-link"},[t._v(t._s(t.$t("tasks.task.send","Send")))])],1),t._v(" "),t.task?[e("f7-block",{staticClass:"subheader"},[e("h1",[e("f7-input",{staticClass:"unstyled edit-task-name",attrs:{wrap:!1,type:"textarea",value:t.task.name,resizable:""},on:{input:function(s){t.task.name=s.target.value},change:t.saveTaskName}})],1),t._v(" "),e("input",{ref:"statusInput",staticClass:"unstyled task-status-picker",attrs:{type:"text",readonly:"readonly"},domProps:{value:"Unassigned"===t.task.status?t.$t("tasks.task.waiting_for_assignments","Waiting for assignments"):t.taskStatus(t.task.status)}})]),t._v(" "),e("participants-select",{attrs:{tags:t.task.filters||[]},on:{tagToggle:t.onTagToggle}}),t._v(" "),e("f7-list",{staticClass:"list-custom details bottom-0",attrs:{"media-list":""}},[e("f7-list-item",[e("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"slice19.png",srcset:t.$addonAssetsUrl+"slice19@2x.png 2x, "+t.$addonAssetsUrl+"slice19.png 3x"},slot:"media"}),t._v(" "),e("f7-input",{staticClass:"inline-edit",attrs:{type:"textarea",placeholder:t.$t("tasks.task.edit_description","Edit the description..."),clearButton:"",value:t.task.data.description,resizable:""},on:{input:function(s){t.task.data.description=s.target.value},change:t.saveTaskDescription}})],1)],1),t._v(" "),e("f7-list",{directives:[{name:"show",rawName:"v-show",value:t.showDeadline||t.task.end_at,expression:"showDeadline || task.end_at"}],staticClass:"list-custom details top-0 bottom-0",attrs:{"media-list":""}},[e("f7-list-item",[e("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"slice13.png",srcset:t.$addonAssetsUrl+"slice13@2x.png 2x,"+t.$addonAssetsUrl+"slice13.png 3x"},slot:"media"}),t._v(" "),e("div",{staticClass:"item-input-wrap",attrs:{slot:"inner"},slot:"inner"},[e("input",{ref:"deadlineInput",staticClass:"unstyled edit-task-deadline",attrs:{type:"text",placeholder:t.$t("tasks.task.edit_deadline","Edit deadline...")}})]),t._v(" "),e("a",{staticClass:"icon-only remove-deadline",attrs:{slot:"inner",href:"#"},on:{click:t.removeDeadline},slot:"inner"},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice12.png",srcset:t.$addonAssetsUrl+"slice12@2x.png 2x,"+t.$addonAssetsUrl+"slice12.png 3x"}})])])],1),t._v(" "),t.showChecklist||t.task.data.checklist&&t.task.data.checklist.items?e("f7-list",{staticClass:"list-custom checklist top-0",attrs:{"media-list":""}},[e("li",{staticClass:"item-content"},[e("div",{staticClass:"item-media"},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice17.png",srcset:t.$addonAssetsUrl+"slice17@2x.png 2x,"+t.$addonAssetsUrl+"slice17.png 3x"}})]),t._v(" "),e("div",{staticClass:"item-inner"},[e("div",[t._v(t._s(t.$t("tasks.task.checklist","Checklist")))]),t._v(" "),e("a",{staticClass:"icon-only remove-checklist",attrs:{href:"#"},on:{click:t.removeChecklist}},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice12.png",srcset:t.$addonAssetsUrl+"slice12@2x.png 2x,"+t.$addonAssetsUrl+"slice12.png 3x"}})])])]),t._v(" "),t._l(t.task.data.checklist.items,(function(s,a){return e("li",{key:a,staticClass:"item-content",class:{checked:s.complete},on:{click:function(e){return t.toggleChecklistItem(s)}}},[e("div",{staticClass:"item-media"},[s.complete?e("img",{attrs:{src:t.$addonAssetsUrl+"slice15.png",srcset:t.$addonAssetsUrl+"slice15@2x.png 2x,"+t.$addonAssetsUrl+"slice15.png 3x"}}):e("img",{attrs:{src:t.$addonAssetsUrl+"slice14.png",srcset:t.$addonAssetsUrl+"slice14@2x.png 2x,"+t.$addonAssetsUrl+"slice14.png 3x"}})]),t._v(" "),e("div",{staticClass:"item-inner"},[t._v("\n              "+t._s(s.text)+"\n              "),e("a",{staticClass:"icon-only remove-checklist-item",attrs:{href:"#"},on:{click:function(e){return t.removeChecklistItem(s)}}},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice12.png",srcset:t.$addonAssetsUrl+"slice12@2x.png 2x,"+t.$addonAssetsUrl+"slice12.png 3x"}})])])])})),t._v(" "),e("li",{staticClass:"item-content"},[e("div",{staticClass:"item-media"},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice16.png",srcset:t.$addonAssetsUrl+"slice16@2x.png 2x,"+t.$addonAssetsUrl+"slice16.png 3x"}})]),t._v(" "),e("div",{staticClass:"item-inner"},[e("input",{staticStyle:{height:"auto"},attrs:{type:"text",placeholder:t.$t("tasks.task.add_items","Add items")},on:{keypress:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.addChecklistItem(s.target)}}})])])],2):t._e(),t._v(" "),e("f7-list",{staticClass:"list-custom activity no-chevron",attrs:{"media-list":""}},[e("f7-list-item",{attrs:{divider:"",title:t.$t("tasks.task.activity","Activity")}}),t._v(" "),t._l(t.task.data.activity,(function(s,a){return e("f7-list-item",{key:a,attrs:{after:t.humanTime(s.time),subtitle:"comment"===s.type?s.text:void 0,title:s.user_name,link:"comment"===s.type}},["comment"===s.type?e("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"slice11.png",srcset:t.$addonAssetsUrl+"slice11@2x.png 2x, "+t.$addonAssetsUrl+"slice11.png 3x"},slot:"media"}):e("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"slice7.png",srcset:t.$addonAssetsUrl+"slice7@2x.png 2x, "+t.$addonAssetsUrl+"slice7.png 3x"},slot:"media"}),t._v(" "),"comment"!==s.type?e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(s.text))]):t._e()])}))],2)]:t._e()],2)],1)],1)};p._withStripped=!0;var k=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tag-select tasks__tag-select tasks__participats-select"},[e("f7-list",{staticClass:"list-custom participants top-0",attrs:{"media-list":""}},[e("f7-list-item",{attrs:{title:t.$t("tasks.task.participants","Participants"),divider:""}}),t._v(" "),e("li",{staticClass:"item-content"},[e("div",{staticClass:"item-inner"},[t._l(t.tags,(function(s,a){return["members"===s.context?e("img",{key:a,staticClass:"circle item",attrs:{src:t.teamMemberIconUrl(s.user_id)}}):e("div",{key:a,staticClass:"chip item"},[e("div",{staticClass:"chip-media"},[e("img",{attrs:{src:t.contextIconSrc(s),srcset:t.contextIconSrcset(s)}})]),t._v(" "),e("div",{staticClass:"chip-label"},[t._v(t._s(s.name))])])]})),t._v(" "),e("a",{staticClass:"item icon-only tag-search",attrs:{href:"#"},on:{click:t.openSelector}},[e("img",{attrs:{src:t.$addonAssetsUrl+"slice6.png",srcset:t.$addonAssetsUrl+"slice6@2x.png 2x,"+t.$addonAssetsUrl+"slice6.png 3x"}})])],2)])],1),t._v(" "),t.teamTags?e("f7-popover",{attrs:{id:"task-participants-popover",target:".tag-select .item.tag-search",opened:t.popoverOpened},on:{"popover:closed":function(s){t.popoverOpened=!1}}},[e("f7-list",{staticClass:"no-margin tasks__tag-select-tags-list",attrs:{"no-hairlines":""}},t._l(t.teamTags,(function(s,a){return e("f7-list-item",{key:a,attrs:{checkbox:"",checked:t.isTagSelected(s),title:s.name},on:{change:function(e){return t.toggleTag(s,e.target.checked)}}},["members"===s.context?e("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):e("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[e("img",{attrs:{src:t.contextIconSrc(s),srcset:t.contextIconSrcset(s)}})])])})),1)],1):t._e(),t._v(" "),t.teamTags?e("f7-sheet",{attrs:{id:"task-participants-sheet",opened:t.sheetOpened},on:{"sheet:closed":function(s){t.sheetOpened=!1}}},[e("f7-toolbar",[e("div",{staticClass:"left"}),t._v(" "),e("div",{staticClass:"right"},[e("f7-link",{on:{click:function(s){t.sheetOpened=!1}}},[t._v("Done")])],1)]),t._v(" "),e("div",{staticClass:"page-content"},[e("f7-searchbar",{attrs:{"search-container":"#task-participants-sheet .list","search-in":".item-title"}}),t._v(" "),e("f7-list",{staticClass:"no-margin tasks__tag-select-tags-list",attrs:{"no-hairlines":""}},t._l(t.teamTags,(function(s,a){return e("f7-list-item",{key:a,attrs:{checkbox:"",checked:t.isTagSelected(s),title:s.name},on:{change:function(e){return t.toggleTag(s,e.target.checked)}}},["members"===s.context?e("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):e("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[e("img",{attrs:{src:t.contextIconSrc(s),srcset:t.contextIconSrcset(s)}})])])})),1)],1)],1):t._e()],1)};k._withStripped=!0;var _=d({props:{tags:Array},data:function(){return{teamTags:null,sheetOpened:!1,popoverOpened:!1}},mounted:function(){var t=this;t.$api.getCurrentTeamTags({cache:!0}).then((function(s){t.teamTags=s}))},beforeDestroy:function(){this.$f7.sheet.close("#task-participants-sheet"),this.sheetOpened=!1,this.popoverOpened=!1},methods:{openSelector:function(){this.$f7.width>=768?this.popoverOpened=!0:this.sheetOpened=!0},isTagSelected:function(t){return this.tags.filter((function(s){return s.name===t.name&&s.id===t.id&&s.type===t.type})).length>0},contextIconSrc:function(t){var s=this.$addonAssetsUrl;return"".concat(s,"icons/").concat(t.context.slice(0,-1),".png")},contextIconSrcset:function(t){var s=this.$addonAssetsUrl;return"".concat(s,"icons/").concat(t.context.slice(0,-1),"@2x.png 2x,").concat(s,"icons/").concat(t.context.slice(0,-1),"@3x.png 3x")},teamMemberIconUrl:function(t){return t?"".concat(this.$root.$config.apiUrl,"team/members/").concat(t,"/avatar.png?token=").concat(this.$root.token):"#"},toggleTag:function(t,s){s?(this.$emit("tagToggle",t,"add"),this.$emit("tagAdd",t)):(this.$emit("tagToggle",t,"remove"),this.$emit("tagRemove",t))}}},k,[],!1,null,null,null);_.options.__file="addons/tasks/1.0.0/src/components/participants-select.vue";var $=d({components:{participantsSelect:_.exports},props:{taskId:[Number,String]},data:function(){return{id:parseInt(this.taskId,10),task:null,taskName:null,comment:"",showDeadline:!1,showChecklist:!1}},computed:{taskTitle:function(){return""}},beforeDestroy:function(){this.datePicker&&this.datePicker.destroy&&this.datePicker.destroy(),this.statusPicker&&this.statusPicker.destroy&&this.statusPicker.destroy(),this.$$(this.$el).find(".page-content").off("scroll")},mounted:function(){var t=this;o.getTask(t.id).then((function(s){t.taskName=s.name,s.data||(s.data={}),t.task=s,t.$nextTick((function(){t.createDatePicker(),t.createStatusPicker()}))}));var s=t.$$(t.$el).find(".navbar .title"),e=t.$$(t.$el).find(".page-content");e.on("scroll",(function(){e[0].scrollTop>100?s.css("opacity",1):s.css("opacity",0)}))},methods:{humanTime:c,taskStatus:l,onPopupClose:function(){this.taskChanged&&this.$events.$emit("tasks:reloadListsTasks")},saveTaskName:function(){this.taskName!==this.task.name&&(this.taskName=this.task.name,this.saveTask())},saveTaskDescription:function(){this.saveTask()},onTagToggle:function(t,s){var e;"add"===s?this.task.filters.push(t):(this.task.filters.forEach((function(s,a){s.name===t.name&&s.type===t.type&&s.id===t.id&&(e=a)})),this.task.filters.splice(e,1));this.saveTask()},addChecklist:function(){this.showChecklist=!0;var t=this.task;t.data||(t.data={}),t.data.checklist||(t.data.checklist={}),t.data.checklist.items||(t.data.checklist.items=[])},removeChecklist:function(){this.showChecklist=!1,this.task.data.checklist={},this.saveTask()},addChecklistItem:function(t){var s=this.task,e=t.value.trim();e&&(s.data||this.$set(this.task,"data",{}),s.data.checklist||this.$set(s.data,"checklist",{}),s.data.checklist.items||this.$set(s.data.checklist,"items",[]),s.data.checklist.items.push({complete:!1,text:e}),t.value="",t.blur(),this.saveTask(),this.$set(this,"task",this.task),this.$set(this.task.data.checklist,"items",s.data.checklist.items),this.$forceUpdate())},toggleChecklistItem:function(t){t.complete=!t.complete,this.$set(this.task.data.checklist,"items",this.task.data.checklist.items),this.saveTask()},removeChecklistItem:function(t){this.task.data.checklist.items.splice(this.task.data.checklist.items.indexOf(t),1),this.$set(this.task.data.checklist,"items",this.task.data.checklist.items),this.saveTask()},addDeadline:function(){this.showDeadline=!0},removeDeadline:function(){this.showDeadline=!1;var t=this.task;t.end_at&&(t.end_at=null,this.saveTask()),this.$refs.deadlineInput&&(this.$refs.deadlineInput.value="")},addComment:function(){var t=this.comment;this.comment="",this.addActivity("comment",t)},saveTask:function(){var t=this.task;this.taskChanged=!0,o.saveTask(t)},addActivity:function(t,s){var e=this.$root.user,a={type:t,text:s,time:new Date,user_id:e.id,user_name:e.first_name},i=this.task;i.data||(i.data={}),i.data.activity||(i.data.activity=[]),i.data.activity.unshift(a),this.saveTask()},createStatusPicker:function(){var t=this,s=t.task;t.statusPicker=t.$f7.picker.create({inputEl:t.$refs.statusInput,convertToPopover:!1,value:[s.status],cols:[{textAlign:"center",values:v,displayValues:v.map((function(s){return t.$t("tasks.status.".concat(s.toLowerCase().replace(/ /g,"_")),{defaultValue:s})}))}],on:{close:function(e){var a=e.cols[0].displayValue,i=e.cols[0].value;i!==s.status&&(s.status=i,t.addActivity("status",t.$t("tasks.task.changed_status_to",{status:a})))}}})},createDatePicker:function(){var t,s=this,e=s.task,a=e.end_at,i=!!a;"string"==typeof a&&(a=new Date(a)),a&&(t=[a.getMonth(),a.getDate(),a.getFullYear(),a.getHours(),a.getMinutes()<10?"0".concat(a.getMinutes()):a.getMinutes()]);s.datePicker=s.$f7.picker.create({inputEl:s.$refs.deadlineInput,rotateEffect:!0,inputReadOnly:!0,convertToPopover:!1,updateValuesOnMomentum:!1,value:t||void 0,routableModals:!1,formatValue:function(t,s){var e="".concat(s[0]," ").concat(t[1],", ").concat(t[2]," ").concat(t[3],":").concat(t[4]),a=new Date(e);return!Number.isNaN(a.getTime())&&(this.currentDate=a,c(a))},cols:[{values:"0 1 2 3 4 5 6 7 8 9 10 11".split(" ").map((function(t){return parseInt(t,10)})),displayValues:["January","February","March","April","May","June","July","August","September","October","November","December"],textAlign:"left"},{values:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},{values:function(){for(var t=(new Date).getFullYear(),s=[],e=t;e<=t+10;e+=1)s.push(e);return s}()},{divider:!0,content:"  "},{values:function(){for(var t=[],s=0;s<=23;s+=1)t.push(s);return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],s=0;s<=59;s+=1)t.push(s<10?"0".concat(s):s);return t}()}],on:{open:function(){if(!i){i=!0;var t=new Date;this.setValue([t.getMonth(),t.getDate(),t.getFullYear(),t.getHours(),t.getMinutes()<10?"0".concat(t.getMinutes()):t.getMinutes()])}},close:function(){e.end_at=new Date(this.currentDate).toJSON(),s.saveTask()},change:function(t,s){var e=new Date(t.value[2],1*t.value[0]+1,0).getDate();s[1]>e&&t.cols[1].setValue(e)}}})}}},p,[],!1,null,null,null);$.options.__file="addons/tasks/1.0.0/src/pages/task-details.vue";var y=$.exports,C=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{name:"tasks__list-management",id:"tasks__list-management"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("tasks.list-management.title","List Management")))]),t._v(" "),e("f7-nav-right",[t.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:t.save}}):t._e()],1)],1),t._v(" "),t.lists?e("f7-list",{staticClass:"list-custom",attrs:{sortable:"",sortableEnabled:"",inset:""},on:{"sortable:sort":t.onSort}},t._l(t.orderedLists,(function(s){return e("f7-list-item",{key:s.id,attrs:{checkbox:"",checked:s.data.active,title:s.name},on:{change:function(e){return t.toggleListActive(s,e.target.checked)}}})})),1):t._e(),t._v(" "),e("f7-list",{staticClass:"list-custom margin-bottom",attrs:{inset:""}},[e("f7-list-item",{attrs:{link:"/tasks/list-add/",title:"Create New List"}})],1)],1)};function x(t){return function(t){if(Array.isArray(t)){for(var s=0,e=new Array(t.length);s<t.length;s++)e[s]=t[s];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}C._withStripped=!0;var b=d({data:function(){return{saving:!1,showSave:!1,lists:null}},mounted:function(){var t=this;o.loadLists({},{cache:!1}).then((function(s){t.lists=s}))},computed:{orderedLists:function(){return this.lists?this.lists.sort((function(t,s){return t.data.position-s.data.position})):null}},methods:{onSort:function(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=s.from,a=s.to,i=this;i.saving||(i.showSave=!0,i.$nextTick((function(){var t;i.lists[e].data.position=a,(t=i.lists).splice.apply(t,[a,0].concat(x(i.lists.splice(e,1)))),i.$forceUpdate()})))},toggleListActive:function(t,s){this.saving||(this.showSave=!0,t.data.active=s)},save:function(){var t=this;t.showSave=!1;var s=[];t.lists.forEach((function(t,e){t.data.position=e,s.push(o.saveList(t))})),Promise.all(s).then((function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()}))}}},C,[],!1,null,null,null);b.options.__file="addons/tasks/1.0.0/src/pages/list-management.vue";var T=b.exports,w=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{name:"tasks__list-add",id:"tasks__list-add"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("tasks.list-add.title","Add List")))]),t._v(" "),e("f7-nav-right",[t.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:t.save}}):t._e()],1)],1),t._v(" "),e("f7-list",{staticClass:"top-0"},[e("f7-list-item",[e("f7-input",{attrs:{type:"text",placeholder:"Name",value:t.name},on:{input:function(s){t.name=s.target.value}}})],1)],1)],1)};w._withStripped=!0;var S=d({data:function(){return{saving:!1,name:""}},computed:{showSave:function(){return this.name.trim().length}},methods:{save:function(){var t=this;t.saving||(t.saving=!0,o.saveList({name:t.name}).then((function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back("/tasks/".concat(o.actorId?"?actor_id=".concat(o.actorId):""),{force:!0})})))}}},w,[],!1,null,null,null);S.options.__file="addons/tasks/1.0.0/src/pages/list-add.vue";var A=S.exports,L=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{name:"tasks__list-edit",id:"tasks__list-edit"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("tasks.list-edit.title","Edit List")))]),t._v(" "),e("f7-nav-right",[t.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:t.save}}):t._e()],1)],1),t._v(" "),t.list?e("f7-list",{staticClass:"list-custom"},[e("f7-list-item",[e("f7-label",[t._v(t._s(t.$t("tasks.list-edit.name","Name")))]),t._v(" "),e("f7-input",{attrs:{type:"text",value:t.list.name},on:{input:function(s){return t.onNameChange(s.target.value)}}})],1),t._v(" "),e("f7-list-item",{attrs:{title:t.$t("tasks.list-edit.show-fast-add-task","Show Fast Add Task")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.list.data.show_fast_add},on:{change:function(s){return t.toggleFastAdd(s.target.checked)}},slot:"after"})],1),t._v(" "),e("f7-list-item",{attrs:{"smart-select":"",title:t.$t("tasks.list-edit.filter-status","Filter Status")}},[e("select",{staticClass:"toggle-save",attrs:{name:"statuses",multiple:""},on:{change:t.onStatusChange}},t._l(t.taskStatuses,(function(s,a){return e("option",{key:a,domProps:{value:s,selected:t.list.data.statuses.indexOf(s)>=0}},[t._v(t._s(t.$t("tasks.status."+s.toLowerCase().replace(/ /g,"_"))))])})),0)]),t._v(" "),e("f7-list-item",{attrs:{link:"#",title:t.$t("tasks.common.date_range","Date Range"),after:t.formatDateRange(t.list.data.date_range)},on:{click:t.showDateRange}}),t._v(" "),t._l(t.permissions,(function(s,a){return e("tag-select",{key:a,attrs:{listId:t.list.id,data:s},on:{tagAdd:function(e){return t.addListPermission(s,e)},tagRemove:function(e){return t.removeListPermission(s,e)}}})})),t._v(" "),e("tag-select",{attrs:{listId:t.list.id,data:{title:t.$t("tasks.permissions.filter_tasks.title"),name:"filter_tasks",filters:t.list.filters}},on:{tagAdd:t.addListFilter,tagRemove:t.removeListFilter}})],2):t._e(),t._v(" "),t.list&&!t.list.data.default?e("f7-list",{staticClass:"margin-top"},[e("f7-list-button",{staticClass:"color-custom",attrs:{color:"custom"},on:{click:t.deleteList}},[t._v(t._s(t.$t("tasks.list-edit.delete-list","Delete List")))])],1):t._e()],1)};function D(t){var s=new Date(t),e=s.getFullYear(),a=s.getMonth()+1,i=s.getDate();return a<10&&(a="0".concat(a)),i<10&&(i="0".concat(i)),"".concat(e,"-").concat(a,"-").concat(i)}L._withStripped=!0;var I=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"tag-select tasks__tag-select tasks__list-tags-select"},[e("ul",[e("li",{staticClass:"item-divider"},[t._v(t._s(t.$t("tasks.permissions."+t.data.name+".title")))]),t._v(" "),e("li",[e("a",{staticClass:"item-link tag-search",attrs:{href:"#"},on:{click:t.openSelector}},[e("div",{staticClass:"item-content"},[t._m(0),t._v(" "),e("div",{staticClass:"item-inner"},[e("div",{staticClass:"item-title"},[t._v(t._s(t.$t("tasks.common.search_members_tags","Search Members, Tags")))])])])])])]),t._v(" "),e("ul",{staticClass:"tag-items"},t._l(t.data.filters,(function(s,a){return e("li",{key:a,staticClass:"tag-item"},[e("div",{staticClass:"item-content"},[e("div",{staticClass:"item-inner"},[e("div",{staticClass:"item-title"},[t._v(t._s(s.name))]),t._v(" "),e("div",{staticClass:"item-after"},[e("a",{staticClass:"item-link",staticStyle:{height:"24px"},attrs:{href:"#"},on:{click:function(e){return t.removeTag(s)}}},[e("i",{staticClass:"material-icons"},[t._v("close")])])])])])])})),0)])};I._withStripped=!0;var U=d({props:{data:Object,listId:[String,Number]},data:function(){return{teamTags:null}},mounted:function(){var t=this;t.$api.getCurrentTeamTags({cache:!0}).then((function(s){t.teamTags=s}))},methods:{openSelector:function(){var t=this;t.$f7router.navigate("/tasks/list-edit/".concat(t.listId,"/tag-select/"),{props:{filters:t.data.filters,pageTitle:t.$t("tasks.permissions.".concat(t.data.name,".title")),teamTags:t.teamTags,onChange:function(s,e){e?t.$emit("tagAdd",s):t.$emit("tagRemove",s)}}})},removeTag:function(t){this.$emit("tagRemove",t)}}},I,[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"item-media"},[s("i",{staticClass:"material-icons md-36"},[this._v("search")])])}],!1,null,null,null);U.options.__file="addons/tasks/1.0.0/src/components/tag-select.vue";var O=d({components:{tagSelect:U.exports},props:{listId:[String,Number]},data:function(){return{showSave:!1,id:parseInt(this.listId,10),taskStatuses:v,list:null,permissions:[]}},beforeDestroy:function(){this.$events.$off("tasks:setListDateRange",this.updateListDateRange)},mounted:function(){var t=this;o.loadList(t.id).then((function(s){s.data||(s.data={}),s.data.statuses||(s.data.statuses=[]),t.list=s,t.$api.getInstalledAddonPermission("tasks","task_list_read_access",{taggable_id:s.id,with_filters:!0}).then((function(e){e.taggable_id=s.id,t.permissions.push(e)})),t.$api.getInstalledAddonPermission("tasks","task_list_edit_access",{taggable_id:s.id,with_filters:!0}).then((function(e){e.taggable_id=s.id,t.permissions.push(e)}))})),t.$events.$on("tasks:setListDateRange",t.updateListDateRange)},methods:{formatDateRange:function(t){if(!t)return"";if("string"==typeof t){var s=t.charAt(0).toUpperCase()+t.slice(1);return window.tommy.i18n.t("date_range.".concat(t),s)}return Array.isArray(t)?"".concat(D(t[0])," - ").concat(D(t[1])):t||""},updateListDateRange:function(t,s){this.list.id===t&&(this.list.data.date_range=s)},onNameChange:function(t){this.saving||(this.list.name=t,this.showSave=!0)},toggleFastAdd:function(t){this.saving||(this.list.data.show_fast_add=t,this.showSave=!0)},onStatusChange:function(t){this.saving||(this.list.data.statuses=this.$$(t.target).val(),this.showSave=!0)},showDateRange:function(){this.$f7router.navigate("/tasks/list-edit/".concat(this.list.id,"/date-range/"),{props:{list:this.list}})},save:function(){var t=this;t.saving||(t.saving=!0,t.showSave=!1,o.saveList(t.list).then((function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()})))},deleteList:function(){var t=this;t.saving||(t.saving=!0,t.showSave=!1,o.deleteList(t.list.id).then((function(){t.$events.$emit("tasks:reloadLists"),t.$f7router.back()})))},addListFilter:function(t){this.saving||(this.showSave=!0,this.list.filters.push(t))},removeListFilter:function(t){this.saving||(this.showSave=!0,this.list.filters.splice(this.list.filters.indexOf(t),1))},saveListPermission:function(t){this.$api.updateInstalledAddonPermission("tasks",t.name,{taggable_id:t.taggable_id,with_filters:!0,filters:JSON.stringify(t.filters)})},addListPermission:function(t,s){t.filters.push(s),this.saveListPermission(t)},removeListPermission:function(t,s){t.filters.splice(t.filters.indexOf(s),1),this.saveListPermission(t)}}},L,[],!1,null,null,null);O.options.__file="addons/tasks/1.0.0/src/pages/list-edit.vue";var P=O.exports,E=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page",attrs:{name:"tasks__date-range-select",id:"tasks__date-range-select"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("tasks.common.date_range","Date Range")))]),t._v(" "),e("f7-nav-right",[t.showSave?e("f7-link",{attrs:{"icon-f7":"check"},on:{click:t.save}}):t._e()],1)],1),t._v(" "),e("f7-list",[e("f7-list-item",{attrs:{radio:"",value:"",checked:!(t.isCustomRange||""!==t.range&&t.range),title:t.$t("tasks.date_range.none","None")},on:{change:function(s){return t.setPlainRange("")}}}),t._v(" "),e("f7-list-item",{attrs:{radio:"",value:"today",checked:!t.isCustomRange&&"today"===t.range,title:t.$t("tasks.date_range.today","Today")},on:{change:function(s){return t.setPlainRange("today")}}}),t._v(" "),e("f7-list-item",{attrs:{radio:"",value:"week",checked:!t.isCustomRange&&"week"===t.range,title:t.$t("tasks.date_range.week","This Week")},on:{change:function(s){return t.setPlainRange("week")}}}),t._v(" "),e("f7-list-item",{attrs:{radio:"",value:"month",checked:!t.isCustomRange&&"month"===t.range,title:t.$t("tasks.date_range.month","This Month")},on:{change:function(s){return t.setPlainRange("month")}}})],1),t._v(" "),e("f7-list",{staticClass:"top-10 list-custom"},[e("f7-list-item",{attrs:{title:t.$t("tasks.common.choose_range","Choose Range")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.isCustomRange},on:{change:function(s){return t.toggleCustomRange(s.target.checked)}},slot:"after"})],1),t._v(" "),e("f7-list-item",{directives:[{name:"show",rawName:"v-show",value:t.isCustomRange,expression:"isCustomRange"}]},[e("f7-label",[t._v(t._s(t.$t("tasks.common.start_date","Start Date")))]),t._v(" "),e("f7-input",{ref:"rangeStart",attrs:{type:"text"}})],1),t._v(" "),e("f7-list-item",{directives:[{name:"show",rawName:"v-show",value:t.isCustomRange,expression:"isCustomRange"}]},[e("f7-label",[t._v(t._s(t.$t("tasks.common.end_date","End Date")))]),t._v(" "),e("f7-input",{ref:"rangeEnd",attrs:{type:"text"}})],1)],1)],1)};E._withStripped=!0;var R=d({props:{list:Object},data:function(){var t=this.list.data.date_range;return{showSave:!1,dateFrom:Array.isArray(t)&&t[0]?t:(new Date).getTime(),dateTo:Array.isArray(t)&&t[1]?t:(new Date).getTime(),range:t}},computed:{isCustomRange:function(){var t=this.range;return Array.isArray(t)||!(!t||"string"==typeof t)}},mounted:function(){var t=this,s=!1,e=!1;t.calendarFrom=t.$f7.calendar.create({inputEl:t.$$(t.$refs.rangeStart.$el).find("input"),closeOnSelect:!0,value:[t.dateFrom],on:{change:function(e,a){s&&(t.showSave=!0),s=!0,t.dateFrom=new Date(a[0]).getTime(),Array.isArray(t.range)&&t.range[0]&&(t.range[0]=t.dateFrom),t.dateFrom>t.dateTo&&t.calendarTo.setValue([t.dateFrom])}}}),t.calendarTo=t.$f7.calendar.create({inputEl:t.$$(t.$refs.rangeEnd.$el).find("input"),closeOnSelect:!0,value:[t.dateTo],on:{change:function(s,a){e&&(t.showSave=!0),e=!0,t.dateTo=new Date(a[0]).getTime(),Array.isArray(t.range)&&t.range[1]&&(t.range[1]=t.dateTo),t.dateTo<t.dateFrom&&t.calendarFrom.setValue([t.dateTo])}}})},methods:{setPlainRange:function(t){this.range=t,this.showSave=!0},toggleCustomRange:function(t){this.showSave=!0,this.range=t?[this.dateFrom,this.dateTo]:""},save:function(){var t=this;if(!t.saving){t.saving=!0,t.showSave=!1;var s=Object.assign({},t.list);s.data.date_range=t.range,o.saveList(s).then((function(){t.$events.$emit("tasks:setListDateRange",t.list.id,t.range),t.$f7router.back()}))}}}},E,[],!1,null,null,null);R.options.__file="addons/tasks/1.0.0/src/pages/date-range.vue";var N=R.exports,F=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("f7-page",{staticClass:"tasks__page"},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.pageTitle))]),t._v(" "),e("f7-subnavbar",{attrs:{inner:!1}},[e("f7-searchbar",{attrs:{"search-container":"#list-edit-tag-select","search-in":".item-title"}})],1)],1),t._v(" "),e("f7-list",{staticClass:"no-margin no-hairlines tasks__tag-select-tags-list",attrs:{id:"list-edit-tag-select"}},t._l(t.teamTags,(function(s,a){return e("f7-list-item",{key:a,attrs:{checkbox:"",checked:t.isTagSelected(s),title:s.name},on:{change:function(e){return t.toggleTag(s,e.target.checked)}}},["members"===s.context?e("span",{staticClass:"tag-select-list-avatar",style:"background-image: url("+(s.icon||"")+")",attrs:{slot:"media"},slot:"media"}):e("span",{staticClass:"tag-select-list-icon",attrs:{slot:"media"},slot:"media"},[e("img",{attrs:{src:t.contextIconSrc(s),srcset:t.contextIconSrcset(s)}})])])})),1)],1)};F._withStripped=!0;var M=d({props:{listId:[String,Number],pageTitle:String,filters:Array,teamTags:Array,onChange:Function},methods:{isTagSelected:function(t){return this.filters.filter((function(s){return s.name===t.name&&s.id===t.id&&s.type===t.type})).length>0},contextIconSrc:function(t){var s=this.$addonAssetsUrl;return"".concat(s,"icons/").concat(t.context.slice(0,-1),".png")},contextIconSrcset:function(t){var s=this.$addonAssetsUrl;return"".concat(s,"icons/").concat(t.context.slice(0,-1),"@2x.png 2x,").concat(s,"icons/").concat(t.context.slice(0,-1),"@3x.png 3x")},toggleTag:function(t,s){this.onChange&&this.onChange(t,s)}}},F,[],!1,null,null,null);M.options.__file="addons/tasks/1.0.0/src/pages/tag-select-page.vue";var V=[{path:"/tasks/",component:m},{path:"/tasks/task/:taskId/",popup:{component:y}},{path:"/tasks/list-edit/:listId/",component:P},{path:"/tasks/task-add/",component:g},{path:"/tasks/list-management/",component:T},{path:"/tasks/list-add/",component:A},{path:"/tasks/list-edit/:listId/date-range/",component:N},{path:"/tasks/list-edit/:listId/tag-select/",component:M.exports}];s.default=V}]).default;