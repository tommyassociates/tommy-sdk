!function s(r,o,d){function l(e,t){if(!o[e]){if(!r[e]){var a="function"==typeof require&&require;if(!t&&a)return a(e,!0);if(c)return c(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var i=o[e]={exports:{}};r[e][0].call(i.exports,function(t){return l(r[e][1][t]||t)},i,i.exports,s,r,o,d)}return o[e].exports}for(var c="function"==typeof require&&require,t=0;t<d.length;t++)l(d[t]);return l}({1:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("./controllers/index"),s=(n=i)&&n.__esModule?n:{default:n};var r={listsLoaded:!1,tasksLoaded:!1,cache:{},initCache:function(){r.cache={lists:{},tasks:{}}},getOrderedLists:function(){if(!r.cache.lists)return[];var t=Object.values(r.cache.lists);return t.length?t.sort(function(t,e){return t.data.position-e.data.position}):[]},addTask:function(t){s.default.invalidateLists=!0,r.cache.tasks[t.id]=t,console.log("task added",t)},addTasks:function(t){if(r.tasksLoaded=!0,t&&t.length)for(var e=0;e<t.length;e++)Array.isArray(t[e])?r.addTasks(t[e]):r.addTask(t[e])},getListTasks:function(t){var n=r.cache.lists[t],i=[];for(var e in r.cache.tasks){var s=r.cache.tasks[e];n.filters&&s.filters&&function(){var t=s.filters.map(function(t){return t.name}),e=n.filters.map(function(t){return t.name}),a=!!t.filter(function(t){return-1!==e.indexOf(t)}).length||!t.length&&!e.length;console.log("task matches list tags",s.name,s.filters,n.name,n.filters,a),a&&n.data.statuses&&(a=-1!==n.data.statuses.indexOf(s.status),console.log("task matches list statuses",s.name,s.status,n.name,n.statuses,a)),a&&i.push(s)}()}return i},loadListTasks:function(t){if(!t._tasksLoaded){t._tasksLoaded=!0;var e=[window.tommy.config.getCurrentUserName()];if(t.data&&t.filters)for(var a=0;a<t.filters.length;a++)e.push(t.filters[a].name);var n={addon:"tasks",kind:"Task",tags:e,with_filters:!0,with_permission_to:!0};return t.data.date_range&&(n.date_range=t.data.date_range),t.data.statuses&&(n.status=t.data.statuses),window.tommy.api.getFragments(n)}console.log("tasks already loaded",t)},loadTasks:function(){console.log("load tasks");var t=[];for(var e in r.cache.lists){var a=r.cache.lists[e],n=r.loadListTasks(a);n&&t.push(n)}return Promise.all(t).then(r.addTasks)},addTaskActivity:function(t,e,a){var n=window.tommy.config.getCurrentUser(),i={type:e,text:a,time:new Date,user_id:n.id,user_name:n.first_name};return t.data||(t.data={}),t.data.activity||(t.data.activity=[]),t.data.activity.unshift(i),i},saveTask:function(t){if(console.log("save task",t),t.name){if(s.default.invalidateLists=!0,t.addon="tasks",t.kind="Task",t.with_filters=!0,t.with_permission_to=!0,t.id||r.addTaskActivity(t,"status",window.tommy.i18n.t("task.created_a_task")),t.status||(t.status=r.STATUSES[0]),t.start_at||(t.start_at=(new Date).getTime()),!t.id){t.with_permissions=["task_create_access","task_edit_access"];var e=window.tommy.addons.getCurrentActor();e&&(t.filters||(t.filters=[]),t.filters.push({context:"members",name:e.first_name+" "+e.last_name,user_id:e.user_id}))}var a=Object.assign({},t,{data:JSON.stringify(t.data)});return t.id?window.tommy.api.updateFragment(t.id,a).then(r.addTask):window.tommy.api.createFragment(a).then(r.addTask)}alert("Task name must be set")},addList:function(t){r.cache.lists[t.id]=t,console.log("added task list",t)},addLists:function(t){if(r.listsLoaded=!0,t&&t.length)for(var e=0;e<t.length;e++)r.addList(t[e])},loadLists:function(t){return console.log("load task lists",t),t=Object.assign({addon:"tasks",kind:"TaskList",with_filters:!0,with_permission_to:!0},t),window.tommy.api.getFragments(t).then(r.addLists)},deleteList:function(t){return s.default.invalidateLists=!0,delete r.cache.lists[t],console.log("delete list",t),window.tommy.api.deleteFragment(t)},saveList:function(t){console.log("save list",t),r.tasksLoaded=!1,t._tasksLoaded=!1,s.default.invalidateLists=!0,t.addon="tasks",t.kind="TaskList",t.with_filters=!0,t.with_permission_to=!0,t.data||(t.data={}),void 0===t.data.position&&(t.data.position=Object.keys(r.cache.lists).length),void 0===t.data.active&&(t.data.active=!0),void 0===t.data.show_fast_add&&(t.data.show_fast_add=!0),t.id||(t.with_permissions=["task_list_read_access","task_list_edit_access"]);var e=Object.assign({},t,{data:JSON.stringify(t.data),filters:JSON.stringify(t.filters)});return t.id?window.tommy.api.updateFragment(t.id,e).then(r.addList):window.tommy.api.createFragment(e).then(r.addList)},currentUserTag:function(){return{context:"members",name:window.tommy.config.getCurrentUserName(),user_id:window.tommy.config.getCurrentUserId()}},createDefaultList:function(){console.log("creating deafult task list");var t={name:window.tommy.i18n.t("index.default-task-name"),data:{default:!0},filters:[r.currentUserTag()]};return r.saveList(t)},hasDefaultList:function(){return r.cache.lists&&0<Object.values(r.cache.lists).filter(function(t){return t.data.default}).length},initPermissionSelect:function(e,t,a){console.log("init permission selects",t,a);var n={resource_id:a,with_filters:!0};window.tommy.api.getInstalledAddonPermission("tasks",t,n).then(function(t){console.log("installed addon permission",t),t.resource_id=a,window.tommy.tplManager.appendInline("tasks__tagSelectTemplate",t,e.container),r.initTagSelect(e,t)})},initTagSelect:function(t,e){var a=$$(t.container).find('.tag-select[data-permission-name="'+e.name+'"]');console.log("init tag select",e,a.dataset()),window.tommy.tagSelect.initWidget(a,e.filters,function(t){console.log("save permission tags",e,t),window.tommy.api.updateInstalledAddonPermission("tasks",e.name,{resource_id:e.resource_id,with_filters:!0,filters:JSON.stringify(t)})})},isTablet:function(){return 630<=window.innerWidth},STATUSES:["Unassigned","Assigned","Processing","Completed","Closed","Archive Task","Cancel"],translateStatus:function(t){if(t)return window.tommy.i18n.t("status."+window.tommy.util.underscore(t),{defaultValue:t})},untranslateStatus:function(t){for(var e=0;e<r.STATUSES.length;e++)if(r.translateStatus(r.STATUSES[e])===t)return r.STATUSES[e]},translatedStatuses:function(){for(var t=[],e=0;e<r.STATUSES.length;e++)t.push(r.translateStatus(r.STATUSES[e]));return t}};a.default=r},{"./controllers/index":3}],2:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("../api"),s=(n=i)&&n.__esModule?n:{default:n};var r={init:function(t){var e=$$(t.container);$$(t.navbarInnerContainer);window.tommy.tplManager.renderInline("tasks__boardSettingTemplate",null,e),window.tommy.util.isTeamOwnerOrManager()&&(s.default.initPermissionSelect(t,"task_create_access"),s.default.initPermissionSelect(t,"task_edit_access"))}};a.default=r},{"../api":1}],3:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=n(t("../api")),i=n(t("./task"));function n(t){return t&&t.__esModule?t:{default:t}}var o={init:function(t){console.log("initialize tasks addon"),r.default.listsLoaded?r.default.tasksLoaded?o.invalidate(t):o.loadTasks(t):(r.default.initCache(),r.default.loadLists().then(function(){r.default.hasDefaultList()?o.loadTasks(t):r.default.createDefaultList().then(function(){o.loadTasks(t)})})),o.bind(t)},loadTasks:function(t){r.default.loadTasks().then(function(){o.invalidate(t)})},uninit:function(){console.log("uninitialize tasks addon"),r.default.cache={}},bind:function(n){var t=$$(n.container);t.find(".list-content").each(function(){var t=$$(this);t[0].scrollHeight>=t[0].clientHeight&&t.parent().addClass("hasScroll")}),t.on("click",".fast-add-toggle",function(){var t=$$(this),e=t.closest(".in").removeClass("in").siblings().addClass("in");t.data("input-focus")&&e.find("input").focus()}),t.on("submit","form.fast-add-form",function(t){t.preventDefault();var e=r.default.cache.lists[$$(this).parents("[data-list-id]").data("list-id")],a=window.tommy.app.f7.formToJSON(this);a.filters=e.filters,$$(this).find('input[name="name"]').val(""),r.default.saveTask(a).then(function(){o.invalidate(n)})}),$$(document).on("picker:open",function(t){var e=$$(t.target);if(e.hasClass("tag-select-picker")){var a=window.tommy.config.getCurrentUserName();e.find('input[value="'+a+'"]').parent().parent().addClass("offscreen")}}),t.on("click","a.task-card",function(){var a=$$(this).data("href");$$.get(a,function(t){var e=$$('<div class="popup" data-page="tasks__task" id="tasks__tasks"></div>');e.append(t),e.find(".back").removeClass("back"),e.find(".page").addClass("navbar-fixed"),window.tommy.f7.popup(e),i.default.init({container:e.find(".page")[0],navbarInnerContainer:e.find(".navbar-inner")[0],query:$$.parseUrlQuery(a)}),e.on("popup:close",function(){o.invalidate(n)})})})},invalidate:function(t){console.log("invalidating tasks index");var e=$$(t.container);if(o.invalidateLists||!e.find(".card").length){console.log("rendering task lists"),o.invalidateLists=!1,window.tommy.tplManager.renderInline("tasks__listsTemplate",r.default.getOrderedLists(),t.container);window.tommy.app.f7.swiper(".swiper-container",{centeredSlides:!r.default.isTablet(),spaceBetween:0,freeMode:!1,freeModeSticky:!0,slidesPerView:"auto"})}for(var a in r.default.cache.lists){var n=$$(t.container).find('[data-list-id="'+a+'"] .list-content'),i=r.default.getListTasks(a);window.tommy.tplManager.renderTarget("tasks__listTasksTemplate",i,n)}var s=window.tommy.addons.getCurrentActor();s&&window.tommy.app.setPageTitle(window.tommy.i18n.t("index.title_user",{user:s.first_name}))}};a.default=o},{"../api":1,"./task":8}],4:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("../api"),s=(n=i)&&n.__esModule?n:{default:n};var r={init:function(t){var a=$$(t.container);$$(t.navbarInnerContainer).find("a.save").on("click",function(t){var e=window.tommy.app.f7.formToJSON(a.find("form"));r.saveList(e),t.preventDefault()})},saveList:function(t){var e={};e.name=t.name,e.filters=[s.default.currentUserTag()],s.default.saveList(e).then(r.afterSave)},afterSave:function(t){console.log("list saved",t),window.tommy.app.f7view.router.back()}};a.default=r},{"../api":1}],5:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var k=n(t("../api")),v=n(t("../format-date-range"));function n(t){return t&&t.__esModule?t:{default:t}}var g={init:function(e){var a=k.default.cache.lists[e.query.list_fragment_id],n=$$(e.container),t=$$(e.navbarInnerContainer);console.log("edit list",a),window.tommy.tplManager.renderInline("tasks__listEditTemplate",a,n),g.initListFilters(e,a),k.default.initPermissionSelect(e,"task_list_read_access",a.id),k.default.initPermissionSelect(e,"task_list_edit_access",a.id),t.find("a.save").on("click",function(t){var e=window.tommy.app.f7.formToJSON(n.find("form"));g.saveList(a,e),t.preventDefault()}),n.find(".date-range-select").on("click",function(t){g.showDateRangePage(e,a),t.preventDefault()}),n.find('select[name="statuses"]').on("change",function(t){a.data.statuses=$$(t.target).val(),console.log("update statuses",a.data.statuses)}),n.find(".delete-list").on("click",function(t){k.default.deleteList(a.id),window.tommy.app.f7view.router.back(),t.preventDefault()})},showDateRangePage:function(m,p){var t=window.tommy.tplManager.render("tasks__dateRangeSelectTemplate",p.data);$$(window.tommy.f7.views.main.container).once("page:init",'[data-page="tasks__date-range-select"]',function(t){!function(t){var e=$$(t.container),a=$$(t.navbarInnerContainer),n=p.data.date_range,i=Array.isArray(n)&&n[0]?n:(new Date).getTime(),s=Array.isArray(n)&&n[1]?n:(new Date).getTime(),r=e.find('input[name="time_or_created_between"]'),o=e.find(".label-switch input");function d(){a.find(".toggle.save").addClass("active")}"string"==typeof n&&n?(e.find('input[name="time_or_created_between"][value="'+n+'"]').prop("checked",!0),e.find(".date-range-custom-item").hide()):n?Array.isArray(n)&&o.prop("checked",!0):(e.find('input[name="time_or_created_between"][value=""]').prop("checked",!0),e.find(".date-range-custom-item").hide());var l=void 0,c=void 0,u=window.tommy.app.f7.calendar({input:e.find('input[name="start_at"]'),closeOnSelect:!0,value:[i],onChange:function(t,e){l&&d(),l=!0,i=new Date(e[0]).getTime(),Array.isArray(n)&&n[0]&&(n[0]=i),s<i&&f.setValue([i])}}),f=window.tommy.app.f7.calendar({input:e.find('input[name="end_at"]'),closeOnSelect:!0,value:[s],onChange:function(t,e){c&&d(),c=!0,s=new Date(e[0]).getTime(),Array.isArray(n)&&n[1]&&(n[1]=s),s<i&&u.setValue([s])}});o.on("change",function(t){t.target.checked?(e.find(".date-range-custom-item").show(),r.prop("checked",!1),n=[i,s]):(n="",e.find(".date-range-custom-item").hide()),d()}),r.on("change",function(t){t.target.checked&&(o.prop("checked",!1).trigger("change"),n=t.target.value),d()}),a.find(".toggle.save").on("click",function(){p.data.date_range=n,k.default.saveList(p).then(function(t){$$(m.container).find(".date-range-select .item-after").text((0,v.default)(n)),g.afterSave(t)})})}(t.detail.page)}),window.tommy.f7.views.main.loadContent(t)},initListFilters:function(t,e){var a={title:window.tommy.i18n.t("parmissions.filter_tasks.title"),name:"filter_tasks"},n=window.tommy.tplManager.appendInline("tasks__tagSelectTemplate",a,t.container);console.log("init filter select",e.filters),window.tommy.tagSelect.initWidget(n,e.filters,function(t){console.log("save filter tags",t),e.filters=t})},saveList:function(t,e){t.name=e.name,t.data.show_fast_add=!(!e.show_fast_add||!e.show_fast_add.length),k.default.saveList(t).then(g.afterSave)},afterSave:function(t){console.log("list saved",t),window.tommy.app.f7view.router.back()}};a.default=g},{"../api":1,"../format-date-range":9}],6:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("../api"),s=(n=i)&&n.__esModule?n:{default:n};var r={init:function(a){var n=$$(a.container),t=$$(a.navbarInnerContainer);r.render(a),t.find("a.save").on("click",function(t){var e=window.tommy.app.f7.formToJSON(n.find("form"));r.save(a,e),t.preventDefault()}),n.on("change",'input[type="checkbox"]',function(){t.find("a.save").addClass("active")})},render:function(t){var e=$$(t.container);window.tommy.tplManager.renderInline("tasks__listManagementTemplate",s.default.getOrderedLists(),e)},save:function(t,e){var a=$$(t.container),i=!1;a.find(".sortable [data-list-id]").each(function(t){var e=$$(this),a=s.default.cache.lists[e.data("list-id")],n=e.find('input[type="checkbox"]')[0].checked;console.log("save list order",a.name,a.data.position,t,a.data.active,n),a.data.position==t&&a.data.active==n||(a.data.position=t,a.data.active=n,s.default.saveList(a),console.log("updated list",a),i||(i=!0,window.tommy.app.f7view.router.back()))})}};a.default=r},{"../api":1}],7:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("../api"),s=(n=i)&&n.__esModule?n:{default:n};var r={init:function(t){var a=$$(t.container),e=$$(t.navbarInnerContainer);window.tommy.tplManager.renderInline("tasks__addTaskTemplate",{},a),e.find("a.save").on("click",function(t){var e=window.tommy.app.f7.formToJSON(a.find("form"));e.filters=[s.default.currentUserTag()],r.saveTask(e),t.preventDefault()})},saveTask:function(t){s.default.saveTask(t).then(r.afterSave)},afterSave:function(t){console.log("task saved",t),window.tommy.app.f7view.router.back()}};a.default=r},{"../api":1}],8:[function(t,e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n,i=t("../api"),d=(n=i)&&n.__esModule?n:{default:n};var l={init:function(a){var e=d.default.cache.tasks[a.query.task_fragment_id],t=$$(a.container),n=$$(a.navbarInnerContainer),i=window.tommy.app.f7;console.log("init task details",e),window.tommy.tplManager.renderInline("tasks__taskDetailsTemplate",e,t.parent()),t.find(".task-menu-popover").on("popover:open",function(){$$(window).trigger("resize")}),t.find(".task-menu-popover a").click(function(t){var e=$$(t.target).data("command");switch(e){case"add-checklist":l.renderChecklist(a);break;case"add-end-time":l.renderDeadline(a);break;default:alert("Unknown command: "+e)}i.closeModal(".task-menu-popover")}),t.find(".page-content").scroll(function(t){100<t.target.scrollTop?n.addClass("with-title"):n.removeClass("with-title")}),l.initStatusPicker(a),e.data.checklist&&e.data.checklist.items&&l.renderChecklist(a),e.end_at&&l.renderDeadline(a);var s=i.messagebar(".messagebar",{maxHeight:200});s.textarea.on("change input",function(t){s.value().trim()?s.textarea.addClass("with-value"):s.textarea.removeClass("with-value")}),t.find(".add-comment").click(function(){s.value().trim()&&(l.addActivity(a,"comment",s.value()),s.clear())}),l.renderActivity(a);var r=t.find(".tag-select"),o=[];e.filters&&(o=e.filters),console.log("init task participants",o,r.length),window.tommy.tplManager.renderInline("tasks__taskParticipantsTemplate",o,t),window.tommy.tagSelect.initWidget(r,o,function(t){console.log("task participants changed",t),e.filters=t,window.tommy.tplManager.renderInline("tasks__taskParticipantsTemplate",e.filters,a.container),l.saveTask(a)}),t.find("textarea.edit-task-name").on("focus",function(){l.enableEditName(a,!0)}),i.resizableTextarea("textarea.edit-task-name"),i.resizeTextarea("textarea.edit-task-name"),t.find("textarea.edit-task-description").on("focus",function(){l.enableEditDescription(a,!0)}),i.resizableTextarea("textarea.edit-task-description"),i.resizeTextarea("textarea.edit-task-description"),n.find("a.save").on("click",function(){l.saveTask(a),l.enableSave(a,!1)}),l.invalidate(a)},invalidate:function(t){var e=d.default.cache.tasks[t.query.task_fragment_id];$$(t.navbarInnerContainer).find(".center").text(e.name)},renderActivity:function(t){var e=d.default.cache.tasks[t.query.task_fragment_id],a=$$(t.container),n=[];e.data.activity&&(n=e.data.activity),window.tommy.tplManager.renderInline("tasks__taskActivityTemplate",n,a)},addActivity:function(t,e,a){var n=d.default.cache.tasks[t.query.task_fragment_id];d.default.addTaskActivity(n,e,a),l.renderActivity(t),l.saveTask(t)},renderChecklist:function(i){var s=d.default.cache.tasks[i.query.task_fragment_id],t=$$(i.container),e=[];s.data.checklist&&s.data.checklist.items&&(e=s.data.checklist.items),window.tommy.tplManager.renderInline("tasks__taskChecklistTemplate",e,t),t.find("input.add-checklist-item").on("blur",function(){var t=$$(this).val();s=d.default.cache.tasks[i.query.task_fragment_id],t&&t.length&&(s.data.checklist||(s.data.checklist={}),s.data.checklist.items||(s.data.checklist.items=[]),s.data.checklist.items.push({text:t,complete:!1}),l.renderChecklist(i),l.saveTask(i))}),t.find(".remove-checklist").click(function(){(s=d.default.cache.tasks[i.query.task_fragment_id]).data.checklist={},t.find('[data-template="tasks__taskChecklistTemplate"]').html(""),l.saveTask(i)}),t.find(".remove-checklist-item").click(function(){s=d.default.cache.tasks[i.query.task_fragment_id];var t=parseInt($$(this).parents("li").data("checklist-item"));console.log("removing checklist item",t),s.data.checklist.items.splice(t,1),l.renderChecklist(i),l.saveTask(i)}),t.find(".checklist-item").click(function(t){var e=$$(t.target);if(!e.hasClass("remove-checklist-item")&&!e.parents(".remove-checklist-item").length){var a=parseInt($$(this).parents("li").data("checklist-item")),n=$$(this).hasClass("checked");s=d.default.cache.tasks[i.query.task_fragment_id],console.log("toggle checklist item",a),n?($$(this).removeClass("checked"),s.data.checklist.items[a].complete=!1):($$(this).addClass("checked"),s.data.checklist.items[a].complete=!0),l.saveTask(i)}})},renderDeadline:function(t){var e=d.default.cache.tasks[t.query.task_fragment_id],a=$$(t.container);console.log("render deadline",e.end_at),window.tommy.tplManager.renderInline("tasks__taskDeadlineTemplate",e.end_at,a);var n=a.find("input.edit-task-deadline"),i=window.tommy.util.createDatePicker(n,e.end_at,{onClose:function(){console.log("closing deadline picker",i.currentDate),e.end_at=i.currentDate,l.saveTask(t)},onFormat:function(t){return console.log("format deadline picker",t),window.tommy.util.humanTime(t)}});e.end_at||n.val(""),a.on("click",".remove-deadline",function(){delete e.end_at,a.find('[data-template="tasks__taskDeadlineTemplate"]').html(""),l.saveTask(t)})},initStatusPicker:function(n){var i=d.default.cache.tasks[n.query.task_fragment_id],t="Unassigned"===i.status?window.tommy.i18n.t("task.waiting_for_assignments"):d.default.translateStatus(i.status);return window.tommy.app.f7.picker({input:$$(n.container).find(".task-status-picker"),value:[t],convertToPopover:!1,cols:[{textAlign:"center",values:d.default.translatedStatuses()}],onClose:function(t){var e=t.value[0],a=d.default.untranslateStatus(t.value[0]);a!=i.status&&(i.status=a,l.addActivity(n,"status",window.tommy.i18n.t("task.changed_status_to",{status:e})),l.saveTask(n))}})},saveTask:function(t){var e=d.default.cache.tasks[t.query.task_fragment_id];console.log("saving task fragment",e),d.default.saveTask(e)},enableEditName:function(e,t){var a=d.default.cache.tasks[e.query.task_fragment_id],n=$$(e.container).find("textarea.edit-task-name");0!=t&&n.once("focusout",function(){var t=n.val();a.name!==t&&(a.name=t,l.saveTask(e),console.log("set task name",a.name))})},enableEditDescription:function(e,t){var a=d.default.cache.tasks[e.query.task_fragment_id],n=$$(e.container).find("textarea.edit-task-description");0!=t&&n.once("focusout",function(){var t=n.val();a.data.description!==t&&(a.data.description=t,l.saveTask(e),console.log("set task description",a.data.description))})},enableSave:function(t,e){var a=$$(t.navbarInnerContainer).find("a.save");0!=e?(a.siblings().hide(),a.css("display","flex")):(a.siblings().css("display","flex"),a.hide())}};a.default=l},{"../api":1}],9:[function(t,e,a){"use strict";function n(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return n<10&&(n="0"+n),i<10&&(i="0"+i),a+"-"+n+"-"+i}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(t){return t?"string"==typeof t?window.tommy.i18n.t("date_range."+t):Array.isArray(t)?n(t[0])+" - "+n(t[1]):t||"":""}},{}],10:[function(t,e,a){"use strict";var i=f(t("./api")),n=f(t("./controllers/index")),s=f(t("./controllers/task")),r=f(t("./controllers/task-add")),o=f(t("./controllers/list-add")),d=f(t("./controllers/list-edit")),l=f(t("./controllers/list-management")),c=f(t("./controllers/board-settings")),u=f(t("./format-date-range"));function f(t){return t&&t.__esModule?t:{default:t}}window.tommy.app.f7.onPageInit("tasks__index",n.default.init),window.tommy.app.f7.onPageBack("tasks__index",n.default.uninit),window.tommy.app.f7.onPageAfterAnimation("tasks__index",n.default.invalidate),window.tommy.app.f7.onPageInit("tasks__board-settings",c.default.init),window.tommy.app.f7.onPageInit("tasks__list-add",o.default.init),window.tommy.app.f7.onPageInit("tasks__list-edit",d.default.init),window.tommy.app.f7.onPageInit("tasks__list-management",l.default.init),window.tommy.app.f7.onPageAfterAnimation("tasks__list-management",l.default.render),window.tommy.app.f7.onPageInit("tasks__task-add",r.default.init),window.tommy.app.f7.onPageInit("tasks__task",s.default.init),window.tommy.app.f7.onPageAfterAnimation("tasks__task",s.default.invalidate),window.tommy.app.t7.registerHelper("tasks__checklistNumCompleted",function(t){var e="";t&&t.items&&(e+=t.items.filter(function(t){return t.complete}).length,e+="/",e+=t.items.length);return e}),window.tommy.app.t7.registerHelper("tasks__displayStatus",function(t){return i.default.translateStatus(t)}),window.tommy.app.t7.registerHelper("tasks__displayStatuses",function(t){return t?t.map(function(t){return i.default.translateStatus(t)}).join(", "):""}),window.tommy.app.t7.registerHelper("tasks__statusSelectOptions",function(t){for(var e="",a=0;a<i.default.STATUSES.length;a++){var n=i.default.STATUSES[a];e+='<option value="'+n+'" '+(t&&-1!==t.indexOf(n)?"selected":"")+">"+i.default.translateStatus(n)+"</option>"}return e}),window.tommy.app.t7.registerHelper("tasks__ifCanEditList",function(t,e){var a=window.tommy.config.getCurrentAccount();return t.data.default&&!window.tommy.util.isTeamOwnerOrManager(a)?e.inverse(t,e.data):-1!==t.permission_to.indexOf("update")?e.fn(t,e.data):e.inverse(t,e.data)}),window.tommy.app.t7.registerHelper("tasks__displayDateRange",function(t){return(0,u.default)(t)})},{"./api":1,"./controllers/board-settings":2,"./controllers/index":3,"./controllers/list-add":4,"./controllers/list-edit":5,"./controllers/list-management":6,"./controllers/task":8,"./controllers/task-add":7,"./format-date-range":9}]},{},[10]);