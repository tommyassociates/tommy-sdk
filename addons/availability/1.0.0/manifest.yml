---
  title: Availability
  package: "availability"
  summary: "Employee availability for rostering and schedule management."
  description: "Enables employees to register availability for rostering and schedule management."
  version: "1.0.0"
  developer: "Tommy Labs GmbH"
  homepage: "https://mytommy.com"
  private: false
  locales:
    - en-US
    - zh-CN
  roles:
    - Team Member
    - Team Manager
  permissions:
    addon_access:
      title: "Allow Team Member Access"
      hint: "Select Team Members who can access this Add-on"
      default_roles:
        - Team Manager
        - Team Member
      operations:
        - read
    addon_actor_access:
      title: "Who Can View Other Team Members' Availabilities"
      hint: "Select who can view availabilities on behalf of other users"
      resource_type: Fragment
      resource_kind: Availability
      default_roles:
        - Team Manager
        - Team Admin
      operations:
        - read
  activities:
    lock_availability:
      title: "Lock availability"
      description: "Lock availability for a roster time slot."
      execute: "Activity::LockAvailability"
      parameters:
        assignee_id:
          title: "Assignee ID"
          type: "integer"
          required: true
        assignee_team_id:
          title: "Assignee Team ID"
          type: "integer"
          required: true
        start_at:
          title: "Start time"
          type: "time"
          required: true
        end_at:
          title: "End time"
          type: "time"
          required: true
    unlock_availability:
      title: "Unlock availability"
      description: "Unlock availability for a roster time slot."
      execute: "Activity::UnlockAvailability"
      parameters:
        assignee_id:
          title: "Assignee ID"
          type: "integer"
          required: true
        assignee_team_id:
          title: "Assignee Team ID"
          type: "integer"
          required: true
        start_at:
          title: "Start time"
          type: "time"
          required: true
        end_at:
          title: "End time"
          type: "time"
          required: true
  actions:
    availability_lock_on_booking_created:
      title: "Lock availability on booking created"
      summary: "Update and lock availability when a new booking is created."
      trigger:
        package: bookings
        name: booking_created
      activity:
        package: availability
        name: lock_availability
      options:
        target_user_parameter: assignee_id
      default: true
    availability_unlock_on_booking_canceled:
      title: "Lock availability on booking canceled"
      summary: "Update and lock availability when an existing booking is canceled."
      trigger:
        package: bookings
        name: booking_canceled
      activity:
        package: availability
        name: unlock_availability
      options:
        target_user_parameter: assignee_id
      default: true
  assets:
    -
      type: "stylesheet"
      file: "build/addon.css"
    -
      type: "javascript"
      file: "build/addon.js"
  views:
    index:
      title: Availability
      index: true
      path: "/availability/"
      actor_permission: addon_actor_access
      type: "page"
