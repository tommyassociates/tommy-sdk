var addon=function(){var e=window.tommy.api,n={wallet:{},getWallet:function getWallet(){return e.call({endpoint:"wallet",method:"GET",data:{}}).then(function(t){return n.wallet=t})},updateWalletSettings:function updateWalletSettings(a){return void 0===a&&(a={}),Object.keys(a).forEach(function(t){n.wallet[t]=a[t]}),e.call({endpoint:"wallet",method:"PUT",data:a})},getWalletCards:function getWalletCards(){return e.call({endpoint:"wallet/cards",method:"GET",data:{}})},getWalletTransactions:function getWalletTransactions(t){return e.call({endpoint:"wallet/transactions",method:"GET",data:{card_id:t}}).then(function(t){return t.sort(function(t,a){return new Date(t.paid_at).getTime()<new Date(a.paid_at).getTime()?1:-1})})},getWalletTransaction:function getWalletTransaction(t){return e.call({endpoint:"wallet/transactions/"+t,method:"GET",data:{}})},getBalanceHistory:function getBalanceHistory(){},createWalletTransaction:function createWalletTransaction(t){return void 0===t&&(t={}),e.call({endpoint:"wallet/transactions",method:"POST",data:t})}},a={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"₼",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"฿",BTN:"Nu.",BWP:"P",BYR:"Br",BYN:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"лв",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",STN:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",YER:"﷼",ZAR:"R",ZWD:"Z$"};function currencyMap(t){return t&&a[t]?a[t]:""}function formatTransactionAmount(t){return("paid"===t.status||"failed"===t.status?"-":"+")+" "+currencyMap(t.currency)+t.amount}function formatTransactionDate(t){if(!t)return"";var a=new Date(t),e=a.getFullYear(),n=a.getMonth()+1;n<10&&(n="0"+n);var s=a.getDate();s<10&&(s="0"+s);var l=a.getHours();l<10&&(l="0"+l);var i=a.getMinutes();return i<10&&(i="0"+i),e+"-"+n+"-"+s+" "+l+":"+i}var t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("f7-list",{staticClass:"wallet-list transaction-list",attrs:{"media-list":"","no-hairlines":"","no-chevron":""}},e._l(e.transactions,function(t,a){return n("f7-list-item",{key:a,attrs:{link:"/wallet/transaction/"+t.id+"/"}},[t.icon_url?n("img",{attrs:{slot:"media",src:t.icon_url},slot:"media"}):n("i",{staticClass:"wallet-icon-placeholder",attrs:{slot:"media"},slot:"media"}),e._v(" "),n("div",{staticClass:"item-details",attrs:{slot:"inner-start"},slot:"inner-start"},[n("div",{staticClass:"item-title-row"},[n("div",{staticClass:"item-title"},[e._v(e._s(t.payee_name))])]),e._v(" "),n("div",{staticClass:"item-text"},[e._v(e._s(e.formatTransactionDate(t.paid_at)))])]),e._v(" "),n("div",{staticClass:"item-after",attrs:{slot:"inner-end"},slot:"inner-end"},[e._v(e._s(e.formatTransactionAmount(t)))])])}))},staticRenderFns:[],props:{transactions:Array},methods:{formatTransactionDate:formatTransactionDate,formatTransactionAmount:formatTransactionAmount}};return[{path:"/wallet/",component:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("f7-page",{attrs:{name:"wallet__index",id:"wallet__index"},on:{"page:beforein":e.onPageBeforeIn,"page:beforeout":e.onPageBeforeOut}},[n("f7-navbar",{attrs:{innerClass:"wallet-index-navbar-inner"}},[n("tommy-nav-menu"),e._v(" "),n("f7-nav-title",[e._v(e._s(e.$t("wallet.index.title","Tommy Wallet")))]),e._v(" "),n("f7-nav-right",[n("f7-link",{attrs:{"icon-f7":"gear",href:"/wallet/settings/"}})],1)],1),e._v(" "),n("div",{staticClass:"wallet-tabs-links"},[n("div",{staticClass:"wallet-tab-link-wrap"},[n("f7-link",{attrs:{"tab-link":"#wallet-tab-wallets","tab-link-active":""}},[n("i",{staticClass:"wallet-tab-link-icon wallet-tab-link-icon-wallet"}),e._v(" "),n("div",{staticClass:"wallet-tab-link-label"},[e._v(e._s(e.$t("wallet.index.tab_link_wallets","Wallets")))])])],1),e._v(" "),n("div",{staticClass:"wallet-tab-link-wrap"},[n("f7-link",{attrs:{"tab-link":"",noLinkClass:""}},[n("i",{staticClass:"wallet-tab-link-icon wallet-tab-link-icon-balance"}),e._v(" "),n("div",{staticClass:"wallet-tab-link-label"},[e._v(e._s(e.$t("wallet.index.tab_link_balance","Balance")))]),e._v(" "),e.balance?n("div",{staticClass:"wallet-balance-value"},[e._v(e._s(e.balance))]):e._e()])],1),e._v(" "),n("div",{staticClass:"wallet-tab-link-wrap"},[n("f7-link",{attrs:{"tab-link":"#wallet-tab-transactions"}},[n("i",{staticClass:"wallet-tab-link-icon wallet-tab-link-icon-transactions"}),e._v(" "),n("div",{staticClass:"wallet-tab-link-label"},[e._v(e._s(e.$t("wallet.index.tab_link_transactions","Transactions")))])])],1)]),e._v(" "),n("f7-tabs",{staticClass:"wallet-tabs"},[n("f7-tab",{attrs:{"tab-active":"",id:"wallet-tab-wallets"}},[e.wallets&&e.wallets.length?n("f7-block-title",[e._v(e._s(e.$t("wallet.index.tab_wallets_title","Wallets")))]):e._e(),e._v(" "),e.wallets&&e.wallets.length?n("f7-list",{staticClass:"wallet-list wallets-list",attrs:{"media-list":"","no-hairlines":"","no-chevron":""}},e._l(e.wallets,function(t,a){return n("f7-list-item",{key:a,attrs:{link:"/wallet/card/"+t.id+"/?name="+t.name}},[t.icon_url?n("img",{attrs:{slot:"media",src:t.icon_url},slot:"media"}):n("i",{staticClass:"wallet-icon-placeholder",attrs:{slot:"media"},slot:"media"}),e._v(" "),n("div",{staticClass:"item-details",attrs:{slot:"inner-start"},slot:"inner-start"},[n("div",{staticClass:"item-title-row"},[n("div",{staticClass:"item-title"},[e._v(e._s(t.name))])]),e._v(" "),t.type?n("div",{staticClass:"item-text"},[e._v(e._s(t.type))]):e._e()]),e._v(" "),n("div",{staticClass:"item-after",attrs:{slot:"inner-end"},slot:"inner-end"},[e._v(e._s(e.currencyMap(t.currency))+e._s(t.balance))])])})):e._e(),e._v(" "),e.wallets&&!e.wallets.length?n("f7-block",{staticClass:"text-align-center",staticStyle:{"font-size":"18px",color:"#999"}},[n("p",[e._v(e._s(e.$t("wallet.index.no_accounts_message")))])]):e._e(),e._v(" "),e.showTestButton?n("f7-block",[n("p",[n("a",{staticClass:"button button-big button-round button-fill",attrs:{href:"#",id:"wallet__createTestTransaction"},on:{click:e.createTestTransaction}},[e._v("Test")])]),e._v(" "),n("p",[n("a",{staticClass:"button button-big button-round button-fill",attrs:{href:"#",id:"wallet__createTestErrorTransaction"},on:{click:e.createTestErrorTransaction}},[e._v("Test insufficient funds")])])]):e._e()],1),e._v(" "),n("f7-tab",{attrs:{id:"wallet-tab-balance"}}),e._v(" "),n("f7-tab",{attrs:{id:"wallet-tab-transactions"},on:{"tab:show":function(){e.transactions&&e.getTransactions()}}},[e.transactions&&e.transactions.length?[n("f7-block-title",[e._v(e._s(e.$t("wallet.index.tab_transactions_title","Transactions")))]),e._v(" "),n("wallet-transaction-list",{attrs:{transactions:e.transactions}})]:e._e(),e._v(" "),e.transactions&&!e.transactions.length?[n("div",{staticClass:"wallet-transactions-empty-message"},[n("img",{attrs:{src:e.$addonAssetsUrl+"empty-transactions.svg"}}),e._v(" "),n("div",[e._v(e._s(e.$t("wallet.index.no_transactions_message","Sorry. You do not have any transactions history yet.")))])])]:e._e()],2)],1)],1)},staticRenderFns:[],components:{walletTransactionList:t},data:function data(){return{balance:null,showTestButton:!1,wallets:null,transactions:null}},mounted:function mounted(){var t=this;t.getBalance(),t.getWallets(),t.getTransactions()},beforeDestroy:function beforeDestroy(){this.$f7router.view.$navbarEl.removeClass("wallet-index-navbar")},methods:{currencyMap:currencyMap,createTestTransaction:function createTestTransaction(){window.tommy.initWalletTransaction({addon:"wallet",payee_name:"Apple / iMac Pro",currency:"CNY",amount:100})},createTestErrorTransaction:function createTestErrorTransaction(){window.tommy.initWalletTransaction({addon:"wallet",payee_name:"Mercedes S600",currency:"USD",amount:1e5})},getTransactions:function getTransactions(){var a=this;n.getWalletTransactions().then(function(t){a.transactions=t})},getWallets:function getWallets(){var a=this;n.getWalletCards().then(function(t){a.wallets=t})},getBalance:function getBalance(){var a=this;n.getWallet().then(function(t){t.show_balance?a.balance=t.balance:a.balance=null})},onPageBeforeIn:function onPageBeforeIn(t,a){var e=this;e.$f7router.view.$navbarEl.addClass("wallet-index-navbar"),"previous"===a.from&&(e.getWallets(),e.getBalance(),e.getTransactions())},onPageBeforeOut:function onPageBeforeOut(){this.$f7router.view.$navbarEl.removeClass("wallet-index-navbar")}}}},{path:"/wallet/settings/",component:{render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__settings",id:"wallet__settings"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("wallet.settings.title","Settings")))])],1),t._v(" "),e("f7-list",{staticClass:"wallet-settings-list"},[e("f7-list-item",{attrs:{title:""+t.$t("wallet.settings.balance_label","Show Balance")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.showBalance},on:{change:t.toggleShowBalance},slot:"after"})],1),t._v(" "),e("f7-list-item",{attrs:{title:""+t.$t("wallet.settings.inform_label","Inform")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.enableNotifications},on:{change:t.toggleNotifications},slot:"after"})],1)],1)],1)},staticRenderFns:[],data:function data(){return{showBalance:n.wallet.show_balance,enableNotifications:n.wallet.enable_notifications}},methods:{toggleShowBalance:function toggleShowBalance(t){n.updateWalletSettings({show_balance:t.target.checked})},toggleNotifications:function toggleNotifications(t){n.updateWalletSettings({enable_notifications:t.target.checked})}}}},{path:"/wallet/transaction/:id/",component:{render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__transaction_details",id:"wallet__transaction_details"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("wallet.transaction_details.title","Transaction Details")))])],1),t._v(" "),t.transaction?[e("div",{staticClass:"wallet-transaction-header"},[e("div",{staticClass:"wallet-transaction-header-wrap"},[e("div",{staticClass:"wallet-transaction-icon"},[t.transaction.icon_url?e("img",{attrs:{src:t.transaction.icon_url}}):e("i",{staticClass:"wallet-transaction-icon-placeholder"})]),t._v(" "),e("div",{staticClass:"wallet-transaction-payment-info"},[e("div",{staticClass:"wallet-transaction-payment-name"},[t._v(t._s(t.transaction.payee_name))]),t._v(" "),e("div",{staticClass:"wallet-transaction-payment-amount"},[t._v(t._s(t.formatTransactionAmount(t.transaction)))])])]),t._v(" "),e("div",{staticClass:"wallet-transaction-status"},[t._v(t._s(t.formatTransactionStatus(t.$t("wallet.transaction_status."+t.transaction.status.toLowerCase(),t.transaction.status))))])]),t._v(" "),e("f7-list",{staticClass:"wallet-transaction-details-list",attrs:{"no-hairlines":""}},[t.transaction.card_name?e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.payment_label","Payment"),after:t.transaction.card_name}}):t._e(),t._v(" "),e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.time_label","Time"),after:t.formatTransactionDate(t.transaction.paid_at)}}),t._v(" "),e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.payee_label","Payee"),after:t.transaction.payee_name}})],1)]:t._e()],2)},staticRenderFns:[],props:{id:[String,Number]},data:function data(){return{transaction:null}},mounted:function mounted(){var a=this;n.getWalletTransaction(a.id).then(function(t){a.transaction=t})},methods:{formatTransactionAmount:formatTransactionAmount,formatTransactionStatus:function formatTransactionStatus(t){return t[0].toUpperCase()+t.substr(1)},formatTransactionDate:formatTransactionDate}}},{path:"/wallet/card/:id/",component:{render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__card_details",id:"wallet__card_details"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.card?t.card.name:t.$f7route.query.name))])],1),t._v(" "),t.transactions?e("wallet-transaction-list",{attrs:{transactions:t.transactions}}):t._e()],1)},staticRenderFns:[],components:{walletTransactionList:t},props:{id:[String,Number]},data:function data(){return{transactions:null}},mounted:function mounted(){var a=this;n.getWalletTransactions(a.id).then(function(t){a.transactions=t})}}}]}();