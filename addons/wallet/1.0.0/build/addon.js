var addon=function(t){var a={};function e(n){if(a[n])return a[n].exports;var l=a[n]={i:n,l:!1,exports:{}};return t[n].call(l.exports,l,l.exports,e),l.l=!0,l.exports}return e.m=t,e.c=a,e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var l in t)e.d(n,l,function(a){return t[a]}.bind(null,l));return n},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},e.p="",e(e.s=1)}([,function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__index",id:"wallet__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut}},[e("f7-navbar",{attrs:{innerClass:"wallet__index-navbar-inner"}},[e("tommy-nav-menu"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("wallet.index.title","Tommy Wallet")))]),t._v(" "),e("f7-nav-right",[e("f7-link",{attrs:{"icon-f7":"gear",href:"/wallet/settings/"}})],1)],1),t._v(" "),e("div",{staticClass:"wallet__tabs-links"},[e("div",{staticClass:"wallet__tab-link-wrap"},[e("f7-link",{attrs:{"tab-link":"#wallet__tab-wallets","tab-link-active":""}},[e("i",{staticClass:"wallet__tab-link-icon wallet__tab-link-icon-wallet"}),t._v(" "),e("div",{staticClass:"wallet__tab-link-label"},[t._v(t._s(t.$t("wallet.index.tab_link_wallets","Wallets")))])])],1),t._v(" "),e("div",{staticClass:"wallet__tab-link-wrap"},[e("f7-link",{attrs:{"tab-link":"",noLinkClass:""}},[e("i",{staticClass:"wallet__tab-link-icon wallet__tab-link-icon-balance"}),t._v(" "),e("div",{staticClass:"wallet__tab-link-label"},[t._v(t._s(t.$t("wallet.index.tab_link_balance","Balance")))]),t._v(" "),t.balance?e("div",{staticClass:"wallet__balance-value"},[t._v(t._s(t.balance))]):t._e()])],1),t._v(" "),e("div",{staticClass:"wallet__tab-link-wrap"},[e("f7-link",{attrs:{"tab-link":"#wallet__tab-transactions"}},[e("i",{staticClass:"wallet__tab-link-icon wallet__tab-link-icon-transactions"}),t._v(" "),e("div",{staticClass:"wallet__tab-link-label"},[t._v(t._s(t.$t("wallet.index.tab_link_transactions","Transactions")))])])],1)]),t._v(" "),e("f7-tabs",{staticClass:"wallet__tabs"},[e("f7-tab",{attrs:{"tab-active":"",id:"wallet__tab-wallets"}},[t.wallets&&t.wallets.length?e("f7-block-title",[t._v(t._s(t.$t("wallet.index.tab_wallets_title","Wallets")))]):t._e(),t._v(" "),t.wallets&&t.wallets.length?e("f7-list",{staticClass:"wallet__list wallets-list",attrs:{"media-list":"","no-hairlines":"","no-chevron":""}},t._l(t.wallets,(function(a,n){return e("f7-list-item",{key:n,attrs:{link:"/wallet/card/"+a.id+"/?name="+a.name}},[a.icon_url?e("img",{attrs:{slot:"media",src:a.icon_url},slot:"media"}):e("i",{staticClass:"wallet__icon-placeholder",attrs:{slot:"media"},slot:"media"}),t._v(" "),e("div",{staticClass:"item-details",attrs:{slot:"inner-start"},slot:"inner-start"},[e("div",{staticClass:"item-title-row"},[e("div",{staticClass:"item-title"},[t._v(t._s(a.name))])]),t._v(" "),a.type?e("div",{staticClass:"item-text"},[t._v(t._s(a.type))]):t._e()]),t._v(" "),e("div",{staticClass:"item-after",attrs:{slot:"inner-end"},slot:"inner-end"},[t._v(t._s(t.currencyMap(a.currency))+t._s(a.balance))])])})),1):t._e(),t._v(" "),t.wallets&&!t.wallets.length?e("f7-block",{staticClass:"text-align-center",staticStyle:{"font-size":"18px",color:"#999"}},[e("p",[t._v(t._s(t.$t("wallet.index.no_accounts_message")))])]):t._e(),t._v(" "),t.showTestButton?e("f7-block",[e("p",[e("a",{staticClass:"button button-big button-round button-fill",attrs:{href:"#",id:"wallet__createTestTransaction"},on:{click:t.createTestTransaction}},[t._v("Test")])]),t._v(" "),e("p",[e("a",{staticClass:"button button-big button-round button-fill",attrs:{href:"#",id:"wallet__createTestErrorTransaction"},on:{click:t.createTestErrorTransaction}},[t._v("Test insufficient funds")])])]):t._e()],1),t._v(" "),e("f7-tab",{attrs:{id:"wallet__tab-balance"}}),t._v(" "),e("f7-tab",{attrs:{id:"wallet__tab-transactions"},on:{"tab:show":function(){t.transactions&&t.getTransactions()}}},[t.transactions&&t.transactions.length?[e("f7-block-title",[t._v(t._s(t.$t("wallet.index.tab_transactions_title","Transactions")))]),t._v(" "),e("wallet-transaction-list",{attrs:{transactions:t.transactions}})]:t._e(),t._v(" "),t.transactions&&!t.transactions.length?[e("div",{staticClass:"wallet__transactions-empty-message"},[e("img",{attrs:{src:t.$addonAssetsUrl+"empty-transactions.svg"}}),t._v(" "),e("div",[t._v(t._s(t.$t("wallet.index.no_transactions_message","Sorry. You do not have any transactions history yet.")))])])]:t._e()],2)],1)],1)};n._withStripped=!0;var l=window.tommy.api,s={wallet:{},getWallet:function(){return l.call({endpoint:"wallet",method:"GET",data:{}}).then((function(t){return s.wallet=t,t}))},updateWalletSettings:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).forEach((function(a){s.wallet[a]=t[a]})),l.call({endpoint:"wallet",method:"PUT",data:t})},getWalletCards:function(){return l.call({endpoint:"wallet/cards",method:"GET",data:{}})},getWalletTransactions:function(t){return l.call({endpoint:"wallet/transactions",method:"GET",data:{card_id:t}}).then((function(t){return t.sort((function(t,a){var e=new Date(t.paid_at).getTime();return new Date(a.paid_at).getTime()>e?1:-1}))}))},getWalletTransaction:function(t){return l.call({endpoint:"wallet/transactions/".concat(t),method:"GET",data:{}})},getBalanceHistory:function(){},createWalletTransaction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.call({endpoint:"wallet/transactions",method:"POST",data:t})}},i=s,r={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"₼",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BRL:"R$",BSD:"$",BTC:"฿",BTN:"Nu.",BWP:"P",BYR:"Br",BYN:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHF:"CHF",CLP:"$",CNY:"¥",COP:"$",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"лв",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",STN:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYU:"$U",UZS:"лв",VEF:"Bs",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",YER:"﷼",ZAR:"R",ZWD:"Z$"},o=function(t){return t&&r[t]?r[t]:""},c=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-list",{staticClass:"wallet__list transaction-list",attrs:{"media-list":"","no-hairlines":"","no-chevron":""}},t._l(t.transactions,(function(a,n){return e("f7-list-item",{key:n,attrs:{link:"/wallet/transaction/"+a.id+"/"}},[a.icon_url?e("img",{attrs:{slot:"media",src:a.icon_url},slot:"media"}):e("i",{staticClass:"wallet__icon-placeholder",attrs:{slot:"media"},slot:"media"}),t._v(" "),e("div",{staticClass:"item-details",attrs:{slot:"inner-start"},slot:"inner-start"},[e("div",{staticClass:"item-title-row"},[e("div",{staticClass:"item-title"},[t._v(t._s(a.payee_name))])]),t._v(" "),e("div",{staticClass:"item-text"},[t._v(t._s(t.formatTransactionDate(a.paid_at)))])]),t._v(" "),e("div",{staticClass:"item-after",attrs:{slot:"inner-end"},slot:"inner-end"},[t._v(t._s(t.formatTransactionAmount(a)))])])})),1)};c._withStripped=!0;var _=function(t){return"".concat("paid"===t.status||"failed"===t.status?"-":"+"," ").concat(o(t.currency)).concat(t.amount)},d=function(t){if(!t)return"";var a=new Date(t),e=a.getFullYear(),n=a.getMonth()+1;n<10&&(n="0".concat(n));var l=a.getDate();l<10&&(l="0".concat(l));var s=a.getHours();s<10&&(s="0".concat(s));var i=a.getMinutes();return i<10&&(i="0".concat(i)),"".concat(e,"-").concat(n,"-").concat(l," ").concat(s,":").concat(i)};function u(t,a,e,n,l,s,i,r){var o,c="function"==typeof t?t.options:t;if(a&&(c.render=a,c.staticRenderFns=e,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),i?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),l&&l.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=o):l&&(o=r?function(){l.call(this,this.$root.$options.shadowRoot)}:l),o)if(c.functional){c._injectStyles=o;var _=c.render;c.render=function(t,a){return o.call(a),_(t,a)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,o):[o]}return{exports:t,options:c}}var f=u({props:{transactions:Array},methods:{formatTransactionDate:d,formatTransactionAmount:_}},c,[],!1,null,null,null);f.options.__file="addons/wallet/1.0.0/src/components/wallet-transaction-list.vue";var v=f.exports,w=u({components:{walletTransactionList:v},data:function(){return{balance:null,showTestButton:!1,wallets:null,transactions:null}},mounted:function(){this.getBalance(),this.getWallets(),this.getTransactions()},beforeDestroy:function(){this.$f7router.view.$navbarEl.removeClass("wallet__index-navbar")},methods:{currencyMap:o,createTestTransaction:function(){window.tommy.initWalletTransaction({addon:"wallet",payee_name:"Apple / iMac Pro",currency:"CNY",amount:100})},createTestErrorTransaction:function(){window.tommy.initWalletTransaction({addon:"wallet",payee_name:"Mercedes S600",currency:"USD",amount:1e5})},getTransactions:function(){var t=this;i.getWalletTransactions().then((function(a){t.transactions=a}))},getWallets:function(){var t=this;i.getWalletCards().then((function(a){t.wallets=a}))},getBalance:function(){var t=this;i.getWallet().then((function(a){a.show_balance?t.balance=a.balance:t.balance=null}))},onPageBeforeIn:function(t,a){this.$f7router.view.$navbarEl.addClass("wallet__index-navbar"),"previous"===a.from&&(this.getWallets(),this.getBalance(),this.getTransactions())},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("wallet__index-navbar")}}},n,[],!1,null,null,null);w.options.__file="addons/wallet/1.0.0/src/pages/index.vue";var m=w.exports,p=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__settings",id:"wallet__settings"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("wallet.settings.title","Settings")))])],1),t._v(" "),e("f7-list",{staticClass:"wallet__settings-list"},[e("f7-list-item",{attrs:{title:""+t.$t("wallet.settings.balance_label","Show Balance")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.showBalance},on:{change:t.toggleShowBalance},slot:"after"})],1),t._v(" "),e("f7-list-item",{attrs:{title:""+t.$t("wallet.settings.inform_label","Inform")}},[e("f7-toggle",{attrs:{slot:"after",checked:t.enableNotifications},on:{change:t.toggleNotifications},slot:"after"})],1)],1)],1)};p._withStripped=!0;var b=u({data:function(){return{showBalance:i.wallet.show_balance,enableNotifications:i.wallet.enable_notifications}},methods:{toggleShowBalance:function(t){i.updateWalletSettings({show_balance:t.target.checked})},toggleNotifications:function(t){i.updateWalletSettings({enable_notifications:t.target.checked})}}},p,[],!1,null,null,null);b.options.__file="addons/wallet/1.0.0/src/pages/settings.vue";var g=b.exports,h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__transaction_details",id:"wallet__transaction_details"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.$t("wallet.transaction_details.title","Transaction Details")))])],1),t._v(" "),t.transaction?[e("div",{staticClass:"wallet__transaction-header"},[e("div",{staticClass:"wallet__transaction-header-wrap"},[e("div",{staticClass:"wallet__transaction-icon"},[t.transaction.icon_url?e("img",{attrs:{src:t.transaction.icon_url}}):e("i",{staticClass:"wallet__transaction-icon-placeholder"})]),t._v(" "),e("div",{staticClass:"wallet__transaction-payment-info"},[e("div",{staticClass:"wallet__transaction-payment-name"},[t._v(t._s(t.transaction.payee_name))]),t._v(" "),e("div",{staticClass:"wallet__transaction-payment-amount"},[t._v(t._s(t.formatTransactionAmount(t.transaction)))])])]),t._v(" "),e("div",{staticClass:"wallet__transaction-status"},[t._v(t._s(t.formatTransactionStatus(t.$t("wallet.transaction_status."+t.transaction.status.toLowerCase(),t.transaction.status))))])]),t._v(" "),e("f7-list",{staticClass:"wallet__transaction-details-list",attrs:{"no-hairlines":""}},[t.transaction.card_name?e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.payment_label","Payment"),after:t.transaction.card_name}}):t._e(),t._v(" "),e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.time_label","Time"),after:t.formatTransactionDate(t.transaction.paid_at)}}),t._v(" "),e("f7-list-item",{attrs:{title:t.$t("wallet.transaction_details.payee_label","Payee"),after:t.transaction.payee_name}})],1)]:t._e()],2)};h._withStripped=!0;var T=u({props:{id:[String,Number]},data:function(){return{transaction:null}},mounted:function(){var t=this;i.getWalletTransaction(t.id).then((function(a){t.transaction=a}))},methods:{formatTransactionAmount:_,formatTransactionStatus:function(t){return t[0].toUpperCase()+t.substr(1)},formatTransactionDate:d}},h,[],!1,null,null,null);T.options.__file="addons/wallet/1.0.0/src/pages/transaction-details.vue";var C=T.exports,$=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("f7-page",{attrs:{name:"wallet__card_details",id:"wallet__card_details"}},[e("f7-navbar",[e("tommy-nav-back"),t._v(" "),e("f7-nav-title",[t._v(t._s(t.card?t.card.name:t.$f7route.query.name))])],1),t._v(" "),t.transactions?e("wallet-transaction-list",{attrs:{transactions:t.transactions}}):t._e()],1)};$._withStripped=!0;var S=u({components:{walletTransactionList:v},props:{id:[String,Number]},data:function(){return{transactions:null}},mounted:function(){var t=this;i.getWalletTransactions(t.id).then((function(a){t.transactions=a}))}},$,[],!1,null,null,null);S.options.__file="addons/wallet/1.0.0/src/pages/card-details.vue";var D=[{path:"/wallet/",component:m},{path:"/wallet/settings/",component:g},{path:"/wallet/transaction/:id/",component:C},{path:"/wallet/card/:id/",component:S.exports}];a.default=D}]).default;