var addon=function(){var s=window.tommy.api,m={cache:{templates:null},createTemplate:function createTemplate(t,e){var a={addon:"forms",kind:"FormsTemplate",with_filters:!0,tags:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],filters:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],data:JSON.stringify(e)};return s.createFragment(a)},getTemplates:function getTemplates(t){return s.getFragments({addon:"forms",kind:"FormsTemplate",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1}).then(function(t){return m.cache.templates=t})},getTemplate:function getTemplate(t,e){return s.getFragment(e,{addon:"forms",kind:"FormsTemplate",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1})},updateTemplate:function updateTemplate(t){return t.data=JSON.stringify(t.data),s.updateFragment(t.id,t)},deleteTemplate:function deleteTemplate(t){return s.deleteFragment(t)},createAssignment:function createAssignment(t,e){var a={addon:"forms",kind:"FormsAssignment",with_filters:!0,tags:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],filters:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],data:JSON.stringify(Object.assign({enabled:!0,anonymous:!1},e))};return s.createFragment(a)},getAssignments:function getAssignments(t){return s.getFragments({addon:"forms",kind:"FormsAssignment",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1}).then(function(t){return m.cache.assignments=t})},getAssignment:function getAssignment(t,e){return s.getFragment(e,{addon:"forms",kind:"FormsAssignment",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1})},updateAssignment:function updateAssignment(t){return t.data=JSON.stringify(t.data),s.updateFragment(t.id,t)},deleteAssignment:function deleteAssignment(t){return s.deleteFragment(t)},createShortcut:function createShortcut(t,e){var a={addon:"forms",kind:"FormsShortcut",with_filters:!0,tags:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],filters:[{context:"members",name:t.first_name+" "+t.last_name,user_id:t.id}],data:JSON.stringify(Object.assign({},e))};return s.createFragment(a)},getShortcuts:function getShortcuts(t){return s.getFragments({addon:"forms",kind:"FormsShortcut",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1}).then(function(t){return m.cache.assignments=t})},getShortcut:function getShortcut(t,e){return s.getFragment(e,{addon:"forms",kind:"FormsShortcut",with_filters:!0,with_permission_to:!0,user_id:t.id},{cache:!1})},updateShortcut:function updateShortcut(t){return t.data=JSON.stringify(t.data),s.updateFragment(t.id,t)},deleteShortcut:function deleteShortcut(t){return s.deleteFragment(t)}};return[{path:"/forms/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",[a("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[a("tommy-nav-menu"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("forms.index.title","Forms")))]),e._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{"icon-f7":"gear"}})],1)],1),e._v(" "),a("div",{staticClass:"forms-scrollable-tabbar no-swipe-panel"},[a("div",{staticClass:"forms-tabbar-inner"},[a("a",{staticClass:"tab-link tab-link-active",attrs:{href:"#tab-templates"}},[e._v(e._s(e.$t("forms.index.menu_templates_label")))]),e._v(" "),a("a",{staticClass:"tab-link",attrs:{href:"#tab-assigned"}},[e._v(e._s(e.$t("forms.index.menu_assigned_label")))]),e._v(" "),a("a",{staticClass:"tab-link",attrs:{href:"#tab-completed"}},[e._v(e._s(e.$t("forms.index.menu_completed_label")))]),e._v(" "),a("a",{staticClass:"tab-link",attrs:{href:"#tab-shortcuts"}},[e._v(e._s(e.$t("forms.index.menu_shortcuts_label")))]),e._v(" "),a("a",{staticClass:"tab-link",attrs:{href:"#tab-my-forms"}},[e._v(e._s(e.$t("forms.index.menu_myforms_label")))])])]),e._v(" "),e.fabBackdropVisible?a("div",{staticClass:"forms-fab-backdrop",attrs:{slot:"fixed"},slot:"fixed"}):e._e(),e._v(" "),a("f7-fab",{staticClass:"forms-fab",nativeOn:{"fab:open":function(t){e.fabBackdropVisible=!0},"fab:close":function(t){e.fabBackdropVisible=!1}}},[a("i",{staticClass:"icon forms-fab-icon-plus"}),e._v(" "),a("i",{staticClass:"icon forms-fab-icon-close"}),e._v(" "),a("f7-fab-buttons",{attrs:{position:"left"}},[a("f7-fab-button",{attrs:{"fab-close":"",href:"/forms/shortcut-create/"}},[a("i",{staticClass:"icon forms-fab-icon-pointer"}),e._v(" "),a("span",[e._v(e._s(e.$t("forms.index_add.shortcut_button")))])]),e._v(" "),a("f7-fab-button",{attrs:{"fab-close":"",href:"/forms/assignment-create/"}},[a("i",{staticClass:"icon forms-fab-icon-people"}),e._v(" "),a("span",[e._v(e._s(e.$t("forms.index_add.assign_button")))])]),e._v(" "),a("f7-fab-button",{attrs:{"fab-close":"",href:"/forms/template-create/"}},[a("i",{staticClass:"icon forms-fab-icon-template"}),e._v(" "),a("span",[e._v(e._s(e.$t("forms.index_add.template_button")))])])],1)],1),e._v(" "),a("f7-tabs",[a("f7-tab",{attrs:{"tab-active":"",id:"tab-templates"}},[a("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},e._l(e.templates,function(t){return a("f7-list-item",{key:t.id,attrs:{title:t.data.name,text:t.data.description,swipeout:"",link:"/forms/template-details/"+t.id+"/","route-props":{template:t}}},[a("div",{staticClass:"forms-template-icon s70",style:{"background-image":t.iconUrl?"url("+t.iconUrl+")":null},attrs:{slot:"media"},slot:"media"}),e._v(" "),a("f7-swipeout-actions",{attrs:{right:""}},[a("f7-swipeout-button",{staticClass:"forms-swipeout-button-green",attrs:{href:"/forms/assignment-create/?templateId="+t.id,"route-props":{template:t}}},[e._v(e._s(e.$t("forms.index.assign_button")))]),e._v(" "),a("f7-swipeout-button",{staticClass:"forms-swipeout-button-blue",attrs:{href:"/forms/template-edit/"+t.id+"/"}},[e._v(e._s(e.$t("forms.index.edit_button")))])],1)],1)}))],1),e._v(" "),a("f7-tab",{attrs:{id:"tab-assigned"}},e._l(e.assignments,function(t){return a("f7-link",{key:t.id,staticClass:"forms-card",attrs:{"no-link-class":"",href:"/forms/assignment-details/"+t.id+"/","route-props":{assignment:t,template:e.getTemplateById(t.data.templateId)}}},[a("div",{staticClass:"forms-card-header"},[a("div",{staticClass:"forms-card-date"},[e._v(e._s(e.$moment(t.created_at).format("DD MMM YYYY")))]),e._v(" "),t.data.enabled?a("div",{staticClass:"forms-card-status"},[e._v(e._s(e.$t("forms.assignment.enabled_label")))]):e._e()]),e._v(" "),a("div",{staticClass:"forms-card-content"},[a("div",{staticClass:"forms-card-rows"},[a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-template"}),e._v(" "),a("span",[e._v(e._s(e.getTemplateNameById(t.data.templateId)))])]),e._v(" "),a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-user"}),e._v(" "),a("span",[e._v("Safety Office")])]),e._v(" "),a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-tag"}),e._v(" "),a("span",[e._v("Custom Tags")])])])])])})),e._v(" "),a("f7-tab",{attrs:{id:"tab-completed"}},[a("a",{staticClass:"forms-card",attrs:{href:"#"}},[a("div",{staticClass:"forms-card-header"},[a("div",{staticClass:"forms-card-date"},[e._v("31st August 2018")])]),e._v(" "),a("div",{staticClass:"forms-card-content"},[a("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},[a("f7-list-item",{attrs:{title:"Home Service Feedback",text:"Collect user feedback"}},[a("div",{staticClass:"forms-template-icon s70",attrs:{slot:"media"},slot:"media"})])],1),e._v(" "),a("div",{staticClass:"forms-card-rows"},[a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-user-round"}),e._v(" "),a("span",[e._v("Mason Fok")])])])],1)])]),e._v(" "),a("f7-tab",{attrs:{id:"tab-shortcuts"}},e._l(e.shortcuts,function(t){return a("f7-link",{key:t.id,staticClass:"forms-card",attrs:{"no-link-class":"",href:"/forms/shortcut-edit/"+t.id+"/","route-props":{shortcut:t,template:e.getTemplateById(t.data.templateId)}}},[a("div",{staticClass:"forms-card-header"},[a("div",{staticClass:"forms-card-date"},[e._v(e._s(e.$moment(t.created_at).format("DD MMM YYYY")))])]),e._v(" "),a("div",{staticClass:"forms-card-content"},[a("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},[a("f7-list-item",{attrs:{title:e.getTemplateNameById(t.data.templateId),text:e.getTemplateDescriptionById(t.data.templateId)}},[a("div",{staticClass:"forms-template-icon s70",attrs:{slot:"media"},slot:"media"})])],1),e._v(" "),a("div",{staticClass:"forms-card-rows"},[a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-user"}),e._v(" "),a("span",[e._v("Safety Office")])]),e._v(" "),a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-tag"}),e._v(" "),a("span",[e._v("Custom Tags")])]),e._v(" "),a("div",{staticClass:"forms-card-row"},[a("i",{staticClass:"forms-card-icon-eye"}),e._v(" "),a("span",[e._v(e._s(t.data.display.map(function(t){return e.$t("forms.shortcuts_display_options."+t+"_label")}).join(", ")))])])])],1)])})),e._v(" "),a("f7-tab",{attrs:{id:"tab-my-forms"}},[a("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},[a("f7-list-item",{attrs:{divider:"",title:"Assigned"}}),e._v(" "),a("f7-list-item",{attrs:{title:"Home Service Feedback",text:"Collect user feedback",link:""}},[a("div",{staticClass:"forms-template-icon s70",attrs:{slot:"media"},slot:"media"}),e._v(" "),a("div",[a("span",{staticClass:"forms-templates-list-badge"},[e._v("17 June 2018")])])]),e._v(" "),a("f7-list-item",{attrs:{divider:"",title:"Available"}}),e._v(" "),a("f7-list-item",{attrs:{title:"Safety Check",text:"Collect user feedback",link:""}},[a("div",{staticClass:"forms-template-icon s70",attrs:{slot:"media"},slot:"media"})]),e._v(" "),a("f7-list-item",{attrs:{title:"Risk Assessment",text:"Collect user feedback",link:""}},[a("div",{staticClass:"forms-template-icon s70",attrs:{slot:"media"},slot:"media"})])],1)],1)],1)],1)},staticRenderFns:[],data:function data(){return{fabBackdropVisible:!1,templates:null,assignments:null,completed:null,shortcuts:null,my_forms:null}},mounted:function mounted(){var t=this;t.getTemplates(),t.getAssignments(),t.getShortcuts(),t.$events.$on("forms:assignmentcreated",t.getAssignments),t.$events.$on("forms:assignmentupdated",t.getAssignments),t.$events.$on("forms:assignmentdeleted",t.getAssignments),t.$events.$on("forms:templatecreated",t.getTemplates),t.$events.$on("forms:templateupdated",t.getTemplates),t.$events.$on("forms:templatedeleted",t.getTemplates),t.$events.$on("forms:shortcutcreated",t.getShortcuts),t.$events.$on("forms:shortcutupdated",t.getShortcuts),t.$events.$on("forms:shortcutdeleted",t.getShortcuts)},beforeDestroy:function beforeDestroy(){var t=this;t.$events.$off("forms:assignmentcreated",t.getAssignments),t.$events.$off("forms:assignmentupdated",t.getAssignments),t.$events.$off("forms:assignmentdeleted",t.getAssignments),t.$events.$off("forms:templatecreated",t.getTemplates),t.$events.$off("forms:templateupdated",t.getTemplates),t.$events.$off("forms:templatedeleted",t.getTemplates),t.$events.$off("forms:shortcutcreated",t.getShortcuts),t.$events.$off("forms:shortcutupdated",t.getShortcuts),t.$events.$off("forms:shortcutdeleted",t.getShortcuts)},methods:{getTemplateById:function getTemplateById(e){var a;return this.templates?(this.templates.forEach(function(t){t.id===e&&(a=t)}),a):""},getTemplateNameById:function getTemplateNameById(e){if(!this.templates)return"";var a="";return this.templates.forEach(function(t){t.id===e&&(a=t.data.name)}),a},getTemplateDescriptionById:function getTemplateDescriptionById(e){if(!this.templates)return"";var a="";return this.templates.forEach(function(t){t.id===e&&(a=t.data.description)}),a},getAssignments:function getAssignments(){var e=this;m.getAssignments(e.$root.user).then(function(t){e.assignments=t})},getTemplates:function getTemplates(){var e=this;m.getTemplates(e.$root.user).then(function(t){e.templates=t})},getShortcuts:function getShortcuts(){var e=this;m.getShortcuts(e.$root.user).then(function(t){e.shortcuts=t})}}}},{path:"/forms/template-create/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",[a("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("forms.template_details.template_new_title")))]),e._v(" "),a("f7-nav-right",[e.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:e.save}},[a("i",{staticClass:"icon f7-icons"},[e._v("check")])]):e._e()],1)],1),e._v(" "),a("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:e.$t("forms.template_edit.template_icon_label"),link:""}},[a("div",{staticClass:"forms-template-icon s60",style:{"background-image":e.iconUrl?"url("+e.iconUrl+")":null}})])],1),e._v(" "),a("f7-list",{staticClass:"forms-list forms-inputs-list",attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{label:e.$t("forms.template_edit.template_name_label"),placeholder:e.$t("forms.template_edit.template_name_label"),type:"text",value:e.name},on:{input:function(t){e.name=t.target.value}}}),e._v(" "),a("f7-list-input",{attrs:{label:e.$t("forms.template_edit.template_description_label"),placeholder:e.$t("forms.template_edit.template_description_label"),type:"textarea",resizable:"",value:e.description},on:{input:function(t){e.description=t.target.value}}})],1)],1)},staticRenderFns:[],data:function data(){return{iconUrl:"",name:"",description:""}},computed:{allowSave:function allowSave(){var t=this.name,e=this.description;return!!(t&&t.trim().length&&e&&e.trim().length)}},methods:{save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.name,a=t.description;m.createTemplate(t.$root.user,{name:e,description:a}).then(function(){t.$f7router.back(),t.$events.$emit("forms:templatecreated")})}}}}},{path:"/forms/template-details/:id/",component:{render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",[a("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.$t("forms.template_details.template_view_title")))])],1),t._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:t.template.data.name}},[a("div",{staticClass:"forms-template-icon s60",style:{"background-image":t.template.iconUrl?"url("+t.template.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})])],1),t._v(" "),a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{header:t.$t("forms.template_edit.template_description_label")}},[a("div",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.template.data.description))])]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("forms.template_details.template_details_created_label"),after:t.$moment(t.template.created_at).format("DD MMM YYYY")}}),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("forms.index.version_label"),after:"???"}})],1)],1)},staticRenderFns:[],props:{template:Object,id:[String,Number]}}},{path:"/forms/template-edit/:id/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",[a("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("forms.template_edit.title")))]),e._v(" "),a("f7-nav-right",[e.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:e.save}},[a("i",{staticClass:"icon f7-icons"},[e._v("check")])]):e._e()],1)],1),e._v(" "),e.template?a("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:e.$t("forms.template_edit.template_icon_label"),link:""}},[a("div",{staticClass:"forms-template-icon s60",style:{"background-image":e.iconUrl?"url("+e.iconUrl+")":null}})])],1):e._e(),e._v(" "),e.template?a("f7-list",{staticClass:"forms-list forms-inputs-list",attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{label:e.$t("forms.template_edit.template_name_label"),placeholder:e.$t("forms.template_edit.template_name_label"),type:"text",value:e.name},on:{input:function(t){e.name=t.target.value}}}),e._v(" "),a("f7-list-input",{attrs:{label:e.$t("forms.template_edit.template_description_label"),placeholder:e.$t("forms.template_edit.template_description_label"),type:"textarea",resizable:"",value:e.description},on:{input:function(t){e.description=t.target.value}}}),e._v(" "),a("f7-list-item",{attrs:{link:"",title:e.$t("forms.template_edit.template_completes_label"),after:199}}),e._v(" "),a("f7-list-item",{attrs:{link:"",title:e.$t("forms.template_edit.template_assignments_label"),after:10}}),e._v(" "),a("f7-list-item",{attrs:{link:"",title:e.$t("forms.template_edit.template_shortcuts_label"),after:2}})],1):e._e(),e._v(" "),e.template?a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-button",{attrs:{color:"red"},on:{click:e.deleteTemplate}},[e._v(" "+e._s(e.$t("forms.template_edit.delete_button"))+" ")])],1):e._e()],1)},staticRenderFns:[],props:{id:[String,Number]},data:function data(){return{template:null,iconUrl:"",name:"",description:""}},computed:{allowSave:function allowSave(){var t=this.name,e=this.description;return!!(t&&t.trim().length&&e&&e.trim().length)}},mounted:function mounted(){this.getTemplate()},methods:{deleteTemplate:function deleteTemplate(){var t=this;t.$f7.dialog.confirm(t.$t("forms.template_delete_confirm.text"),function(){m.deleteTemplate(t.template.id).then(function(){t.$f7router.back(),t.$events.$emit("forms:templatedeleted")})})},getTemplate:function getTemplate(){var i=this;m.getTemplate(i.$root.user,i.id).then(function(t){var e=t.data,a=e.name,s=e.description,n=e.iconUrl;i.template=t,i.name=a,i.description=s,i.iconUrl=n})},save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.name,a=t.description;Object.assign(t.template.data,{name:e,description:a}),m.updateTemplate(t.template).then(function(){t.$f7router.back(),t.$events.$emit("forms:templateupdated")})}}}}},{path:"/forms/assignment-create/",component:{render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("f7-page",[s("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[s("tommy-nav-back"),a._v(" "),s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.create_title")))]),a._v(" "),s("f7-nav-right",[a.allowSave?s("f7-link",{attrs:{href:"#","icon-only":""},on:{click:a.save}},[s("i",{staticClass:"icon f7-icons"},[a._v("check")])]):a._e()],1)],1),a._v(" "),s("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.template_label"),after:a.templateName},on:{click:function(t){a.templateSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.type_label"),after:a.$t("forms.shortcuts_type_options."+a.type+"_label")},on:{click:function(t){a.typeSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.deadline_label"),after:a.$moment(a.deadline).format("DD MMM YYYY")},on:{click:function(t){a.openDeadLineCalendar()}}}),a._v(" "),s("f7-list-item",{attrs:{divider:"",title:a.$t("forms.assignment.repeat_label")}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.assignment.enabled_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.repeat},on:{change:function(t){a.repeat=t.target.checked}},slot:"after"})],1),a._v(" "),a.repeat?s("f7-list-item",{staticClass:"assignment-frequency-selector",attrs:{link:"",title:a.$t("forms.assignment.frequency_label"),after:a.$t("forms.assignment.frequency_"+a.repeatFrequency+"_label")},on:{click:function(t){a.popoverFrequencyOpened=!0}}},[s("f7-popover",{attrs:{target:".assignment-frequency-selector",opened:a.popoverFrequencyOpened},on:{"popover:close":function(t){a.popoverFrequencyOpened=!1}}},[s("f7-list",a._l(["minutes","hours","days"],function(t,e){return s("f7-list-item",{key:e,attrs:{radio:"",title:a.$t("forms.assignment.frequency_"+t+"_label"),checked:a.repeatFrequency===t},on:{change:function(){a.repeatFrequency=t,a.popoverFrequencyOpened=!1}}})}))],1)],1):a._e(),a._v(" "),a.repeat?s("f7-list-item",{staticClass:"assignment-every-selector",attrs:{link:"",title:a.$t("forms.assignment.every_label"),after:a.repeatEvery+" "+a.$t("forms.assignment.frequency_"+a.repeatFrequency+"_label")},on:{click:function(t){a.popoverEveryOpened=!0}}},[s("f7-popover",{attrs:{target:".assignment-frequency-selector",opened:a.popoverEveryOpened},on:{"popover:close":function(t){a.popoverEveryOpened=!1}}},[s("f7-list",{staticStyle:{height:"300px"}},a._l(60,function(t){return s("f7-list-item",{key:t,attrs:{radio:"",title:t,checked:a.repeatEvery===t},on:{change:function(){a.repeatEvery=t,a.popoverEveryOpened=!1}}})}))],1)],1):a._e()],1),a._v(" "),s("f7-popup",{attrs:{opened:a.typeSelectOpened},on:{"popup:close":function(t){a.typeSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.type_label")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),a._l(["single","multi","recent"],function(t,e){return[s("f7-list",{key:e,attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{radio:"",checked:a.type===t,title:a.$t("forms.shortcuts_type_options."+t+"_label")},on:{change:function(){a.type=t,a.typeSelectOpened=!1}}}),a._v(" "),s("f7-block-footer",[a._v(a._s(a.$t("forms.shortcuts_type_options."+t+"_text")))])],1)]})],2)],1),a._v(" "),s("f7-popup",{attrs:{opened:a.templateSelectOpened},on:{"popup:close":function(t){a.templateSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details_template_select.title")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),s("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},a._l(a.templates,function(t){return s("f7-list-item",{key:t.id,attrs:{title:t.data.name,text:t.data.description,radio:"",checked:t.id===a.templateId},on:{change:function(){a.templateId=t.id,a.templateSelectOpened=!1}}},[s("div",{staticClass:"forms-template-icon s70",style:{"background-image":t.iconUrl?"url("+t.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})])}))],1)],1)],1)},staticRenderFns:[],data:function data(){var t=this.$f7route.query.templateId;return{typeSelectOpened:!1,templateSelectOpened:!1,popoverFrequencyOpened:!1,popoverEveryOpened:!1,templates:m.cache.templates,templateId:t?parseInt(t,10):null,type:"single",deadline:(new Date).getTime()+6048e5,repeat:!1,repeatFrequency:"hours",repeatEvery:2}},computed:{allowSave:function allowSave(){return!!this.templateId},templateName:function templateName(){var e=this;if(!e.templateId)return e.$t("forms.index.notset_label");if(!e.templates)return"";var t=e.templates.filter(function(t){return t.id===e.templateId})[0];return t?t.data.name:""}},mounted:function mounted(){var a=this;a.templates||m.getTemplates(a.$root.user).then(function(t){a.templates=t}),a.calendar=a.$f7.calendar.create({value:[new Date(a.deadline)],openIn:"customModal",backdrop:!0,closeOnSelect:!0,on:{change:function change(t,e){a.deadline=e[0]}}})},methods:{openDeadLineCalendar:function openDeadLineCalendar(){this.calendar.open()},save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.templateId,a=t.type,s=t.deadline,n=t.repeat,i=t.repeatFrequency,r=t.repeatEvery;m.createAssignment(t.$root.user,{templateId:e,type:a,deadline:s,repeat:n,repeatFrequency:i,repeatEvery:r}).then(function(){t.$f7router.back(),t.$events.$emit("forms:assignmentcreated")})}}}}},{path:"/forms/assignment-details/:id/",component:{render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("f7-page",[a("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[a("tommy-nav-back"),e._v(" "),a("f7-nav-title",[e._v(e._s(e.$t("forms.assignment.assignment_label")))])],1),e._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[e.template?a("f7-list-item",{attrs:{title:e.template.data.name}},[a("div",{staticClass:"forms-template-icon s60",style:{"background-image":e.template.iconUrl?"url("+e.template.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})]):e._e()],1),e._v(" "),a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:e.$t("forms.assignment.enabled_label")}},[a("f7-toggle",{attrs:{checked:e.assignment.data.enabled||void 0===e.assignment.data.enabled},on:{change:function(t){e.toggleEnabled(t.target.checked)}}})],1),e._v(" "),a("f7-list-item",{attrs:{title:e.$t("forms.assignment.type_label"),after:e.$t("forms.shortcuts_type_options."+e.assignment.data.type+"_label")}}),e._v(" "),a("f7-list-item",{attrs:{title:e.$t("forms.template_details.template_details_created_label"),after:e.$moment(e.assignment.created_at).format("DD MMM YYYY")}}),e._v(" "),a("f7-list-item",{attrs:{title:e.$t("forms.assignment.deadline_label"),after:e.$moment(e.assignment.data.deadline).format("DD MMM YYYY")}}),e._v(" "),a("f7-list-item",{attrs:{title:e.$t("forms.template_details.template_details_anonymous_label"),after:e.$t("label."+(e.assignment.data.anonymous?"yes":"no"))}}),e._v(" "),a("f7-list-item",{attrs:{link:"",title:e.$t("forms.template_edit.template_completes_label"),after:"5"}})],1),e._v(" "),a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-button",{attrs:{href:"/forms/assignment-edit/"+e.assignment.id+"/","route-props":{assignment:e.assignment}}},[e._v(" "+e._s(e.$t("forms.index.edit_button"))+" ")]),e._v(" "),a("f7-list-button",{attrs:{color:"red"},on:{click:e.deleteAssignment}},[e._v(" "+e._s(e.$t("forms.template_edit.delete_button"))+" ")])],1)],1)},staticRenderFns:[],props:{template:Object,assignment:Object,id:[String,Number]},methods:{toggleEnabled:function toggleEnabled(t){var e=this,a=Object.assign({},e.assignment);a.data.enabled=t,m.updateAssignment(a).then(function(){e.$events.$emit("forms:assignmentupdated")})},deleteAssignment:function deleteAssignment(){var t=this;t.$f7.dialog.confirm(t.$t("forms.assignment_delete_confirm.text"),function(){m.deleteAssignment(t.assignment.id).then(function(){t.$events.$emit("forms:assignmentdeleted"),t.$f7router.back()})})}}}},{path:"/forms/assignment-edit/:id/",component:{render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("f7-page",[s("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[s("tommy-nav-back"),a._v(" "),s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.create_title")))]),a._v(" "),s("f7-nav-right",[a.allowSave?s("f7-link",{attrs:{href:"#","icon-only":""},on:{click:a.save}},[s("i",{staticClass:"icon f7-icons"},[a._v("check")])]):a._e()],1)],1),a._v(" "),s("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.template_label"),after:a.templateName},on:{click:function(t){a.templateSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.type_label"),after:a.$t("forms.shortcuts_type_options."+a.type+"_label")},on:{click:function(t){a.typeSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.assignment.deadline_label"),after:a.$moment(a.deadline).format("DD MMM YYYY")},on:{click:function(t){a.openDeadLineCalendar()}}}),a._v(" "),s("f7-list-item",{attrs:{divider:"",title:a.$t("forms.assignment.repeat_label")}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.assignment.enabled_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.repeat},on:{change:function(t){a.repeat=t.target.checked}},slot:"after"})],1),a._v(" "),a.repeat?s("f7-list-item",{staticClass:"assignment-frequency-selector",attrs:{link:"",title:a.$t("forms.assignment.frequency_label"),after:a.$t("forms.assignment.frequency_"+a.repeatFrequency+"_label")},on:{click:function(t){a.popoverFrequencyOpened=!0}}},[s("f7-popover",{attrs:{target:".assignment-frequency-selector",opened:a.popoverFrequencyOpened},on:{"popover:close":function(t){a.popoverFrequencyOpened=!1}}},[s("f7-list",a._l(["minutes","hours","days"],function(t,e){return s("f7-list-item",{key:e,attrs:{radio:"",title:a.$t("forms.assignment.frequency_"+t+"_label"),checked:a.repeatFrequency===t},on:{change:function(){a.repeatFrequency=t,a.popoverFrequencyOpened=!1}}})}))],1)],1):a._e(),a._v(" "),a.repeat?s("f7-list-item",{staticClass:"assignment-every-selector",attrs:{link:"",title:a.$t("forms.assignment.every_label"),after:a.repeatEvery+" "+a.$t("forms.assignment.frequency_"+a.repeatFrequency+"_label")},on:{click:function(t){a.popoverEveryOpened=!0}}},[s("f7-popover",{attrs:{target:".assignment-frequency-selector",opened:a.popoverEveryOpened},on:{"popover:close":function(t){a.popoverEveryOpened=!1}}},[s("f7-list",{staticStyle:{height:"300px"}},a._l(60,function(t){return s("f7-list-item",{key:t,attrs:{radio:"",title:t,checked:a.repeatEvery===t},on:{change:function(){a.repeatEvery=t,a.popoverEveryOpened=!1}}})}))],1)],1):a._e()],1),a._v(" "),s("f7-popup",{attrs:{opened:a.typeSelectOpened},on:{"popup:close":function(t){a.typeSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.type_label")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),a._l(["single","multi","recent"],function(t,e){return[s("f7-list",{key:e,attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{radio:"",checked:a.type===t,title:a.$t("forms.shortcuts_type_options."+t+"_label")},on:{change:function(){a.type=t,a.typeSelectOpened=!1}}}),a._v(" "),s("f7-block-footer",[a._v(a._s(a.$t("forms.shortcuts_type_options."+t+"_text")))])],1)]})],2)],1),a._v(" "),s("f7-popup",{attrs:{opened:a.templateSelectOpened},on:{"popup:close":function(t){a.templateSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details_template_select.title")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),s("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},a._l(a.templates,function(t){return s("f7-list-item",{key:t.id,attrs:{title:t.data.name,text:t.data.description,radio:"",checked:t.id===a.templateId},on:{change:function(){a.templateId=t.id,a.templateSelectOpened=!1}}},[s("div",{staticClass:"forms-template-icon s70",style:{"background-image":t.iconUrl?"url("+t.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})])}))],1)],1)],1)},staticRenderFns:[],props:{assignment:Object},data:function data(){var t=this.assignment;return{typeSelectOpened:!1,templateSelectOpened:!1,popoverFrequencyOpened:!1,popoverEveryOpened:!1,templates:m.cache.templates,templateId:t.data.templateId,type:t.data.type,deadline:t.data.deadline,repeat:t.data.repeat,repeatFrequency:t.data.repeatFrequency,repeatEvery:t.data.repeatEvery}},computed:{allowSave:function allowSave(){return!!this.templateId},templateName:function templateName(){var e=this;if(!e.templateId)return e.$t("forms.index.notset_label");if(!e.templates)return"";var t=e.templates.filter(function(t){return t.id===e.templateId})[0];return t?t.data.name:""}},mounted:function mounted(){var a=this;a.templates||m.getTemplates(a.$root.user).then(function(t){a.templates=t}),a.calendar=a.$f7.calendar.create({value:[new Date(a.deadline)],openIn:"customModal",backdrop:!0,closeOnSelect:!0,on:{change:function change(t,e){a.deadline=e[0]}}})},methods:{openDeadLineCalendar:function openDeadLineCalendar(){this.calendar.open()},save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.templateId,a=t.type,s=t.deadline,n=t.repeat,i=t.repeatFrequency,r=t.repeatEvery;m.updateAssignment({id:t.assignment.id,data:Object.assign({},t.assignment.data,{templateId:e,type:a,deadline:s,repeat:n,repeatFrequency:i,repeatEvery:r})}).then(function(){t.$f7router.back("/forms/",{force:!0}),t.$events.$emit("forms:assignmentupdated")})}}}}},{path:"/forms/shortcut-create/",component:{render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("f7-page",[s("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[s("tommy-nav-back"),a._v(" "),s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details.title")))]),a._v(" "),s("f7-nav-right",[a.allowSave?s("f7-link",{attrs:{href:"#","icon-only":""},on:{click:a.save}},[s("i",{staticClass:"icon f7-icons"},[a._v("check")])]):a._e()],1)],1),a._v(" "),s("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_icon_label"),link:""}},[s("div",{staticClass:"forms-template-icon s60",style:{"background-image":a.iconUrl?"url("+a.iconUrl+")":null}})])],1),a._v(" "),s("f7-list",{staticClass:"forms-list forms-inputs-list",attrs:{"no-hairlines":""}},[s("f7-list-input",{attrs:{"inline-label":"",label:a.$t("forms.shortcut_details.shortcut_name_label"),placeholder:a.$t("forms.shortcut_details.shortcut_name_label"),type:"text",value:a.name},on:{input:function(t){a.name=t.target.value}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_availbale_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.available},on:{change:function(t){a.available=t.target.checked}},slot:"after"})],1),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.shortcut_details.shortcut_template_label"),after:a.templateName},on:{click:function(t){a.templateSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_display_label"),"smart-select":"","smart-select-params":{openIn:"sheet",on:{change:function change(t,e){a.setDisplay(e)}}},after:a.display.map(function(t){return a.$t("forms.shortcuts_display_options."+t+"_label")}).join(", ")}},[s("select",{attrs:{multiple:"multiple"}},[s("option",{attrs:{value:"menu"},domProps:{selected:0<=a.display.indexOf("menu")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.menu_label")))]),a._v(" "),s("option",{attrs:{value:"team"},domProps:{selected:0<=a.display.indexOf("team")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.team_label")))]),a._v(" "),s("option",{attrs:{value:"contact"},domProps:{selected:0<=a.display.indexOf("contact")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.contact_label")))])])]),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.shortcut_details.shortcut_type_label"),after:a.$t("forms.shortcuts_type_options."+a.type+"_label")},on:{click:function(t){a.typeSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_anonymous_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.anonymous},on:{change:function(t){a.anonymous=t.target.checked}},slot:"after"})],1)],1),a._v(" "),s("f7-popup",{attrs:{opened:a.typeSelectOpened},on:{"popup:close":function(t){a.typeSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.type_label")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),a._l(["single","multi","recent"],function(t,e){return[s("f7-list",{key:e,attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{radio:"",checked:a.type===t,title:a.$t("forms.shortcuts_type_options."+t+"_label")},on:{change:function(){a.type=t,a.typeSelectOpened=!1}}}),a._v(" "),s("f7-block-footer",[a._v(a._s(a.$t("forms.shortcuts_type_options."+t+"_text")))])],1)]})],2)],1),a._v(" "),s("f7-popup",{attrs:{opened:a.templateSelectOpened},on:{"popup:close":function(t){a.templateSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details_template_select.title")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),s("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},a._l(a.templates,function(t){return s("f7-list-item",{key:t.id,attrs:{title:t.data.name,text:t.data.description,radio:"",checked:t.id===a.templateId},on:{change:function(){a.templateId=t.id,a.templateSelectOpened=!1}}},[s("div",{staticClass:"forms-template-icon s70",style:{"background-image":t.iconUrl?"url("+t.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})])}))],1)],1)],1)},staticRenderFns:[],data:function data(){var t=this.$f7route.query.templateId;return{typeSelectOpened:!1,templateSelectOpened:!1,templates:m.cache.templates,iconUrl:"",name:"",available:!0,templateId:t?parseInt(t,10):null,display:["menu"],type:"single",anonymous:!0}},computed:{allowSave:function allowSave(){var t=this.templateId,e=this.name;return!(!t||!e.trim().length)},templateName:function templateName(){var e=this;if(!e.templateId)return e.$t("forms.index.notset_label");if(!e.templates)return"";var t=e.templates.filter(function(t){return t.id===e.templateId})[0];return t?t.data.name:""}},mounted:function mounted(){var e=this;e.templates||m.getTemplates(e.$root.user).then(function(t){e.templates=t})},methods:{setDisplay:function setDisplay(t){this.display=t},save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.iconUrl,a=t.name,s=t.available,n=t.templateId,i=t.display,r=t.type,l=t.anonymous,o=t.deadline;m.createShortcut(t.$root.user,{iconUrl:e,name:a,available:s,templateId:n,display:i,type:r,anonymous:l,deadline:o}).then(function(){t.$f7router.back(),t.$events.$emit("forms:shortcutcreated")})}}}}},{path:"/forms/shortcut-edit/:id/",component:{render:function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("f7-page",[s("f7-navbar",{attrs:{innerClass:"forms-blue-navbar-inner"}},[s("tommy-nav-back"),a._v(" "),s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details.edit_title")))]),a._v(" "),s("f7-nav-right",[a.allowSave?s("f7-link",{attrs:{href:"#","icon-only":""},on:{click:a.save}},[s("i",{staticClass:"icon f7-icons"},[a._v("check")])]):a._e()],1)],1),a._v(" "),s("f7-list",{staticClass:"no-margin forms-list",attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_icon_label"),link:""}},[s("div",{staticClass:"forms-template-icon s60",style:{"background-image":a.iconUrl?"url("+a.iconUrl+")":null}})])],1),a._v(" "),s("f7-list",{staticClass:"forms-list forms-inputs-list",attrs:{"no-hairlines":""}},[s("f7-list-input",{attrs:{"inline-label":"",label:a.$t("forms.shortcut_details.shortcut_name_label"),placeholder:a.$t("forms.shortcut_details.shortcut_name_label"),type:"text",value:a.name},on:{input:function(t){a.name=t.target.value}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_availbale_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.available},on:{change:function(t){a.available=t.target.checked}},slot:"after"})],1),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.shortcut_details.shortcut_template_label"),after:a.templateName},on:{click:function(t){a.templateSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_display_label"),"smart-select":"","smart-select-params":{openIn:"sheet",on:{change:function change(t,e){a.setDisplay(e)}}},after:a.display.map(function(t){return a.$t("forms.shortcuts_display_options."+t+"_label")}).join(", ")}},[s("select",{attrs:{multiple:"multiple"}},[s("option",{attrs:{value:"menu"},domProps:{selected:0<=a.display.indexOf("menu")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.menu_label")))]),a._v(" "),s("option",{attrs:{value:"team"},domProps:{selected:0<=a.display.indexOf("team")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.team_label")))]),a._v(" "),s("option",{attrs:{value:"contact"},domProps:{selected:0<=a.display.indexOf("contact")}},[a._v(a._s(a.$t("forms.shortcuts_display_options.contact_label")))])])]),a._v(" "),s("f7-list-item",{attrs:{link:"",title:a.$t("forms.shortcut_details.shortcut_type_label"),after:a.$t("forms.shortcuts_type_options."+a.type+"_label")},on:{click:function(t){a.typeSelectOpened=!0}}}),a._v(" "),s("f7-list-item",{attrs:{title:a.$t("forms.shortcut_details.shortcut_anonymous_label")}},[s("f7-toggle",{attrs:{slot:"after",checked:a.anonymous},on:{change:function(t){a.anonymous=t.target.checked}},slot:"after"})],1)],1),a._v(" "),s("f7-list",{attrs:{"no-hairlines":""}},[s("f7-list-button",{attrs:{color:"red"},on:{click:a.deleteShortcut}},[a._v(" "+a._s(a.$t("forms.template_edit.delete_button"))+" ")])],1),a._v(" "),s("f7-popup",{attrs:{opened:a.typeSelectOpened},on:{"popup:close":function(t){a.typeSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.assignment.type_label")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),a._l(["single","multi","recent"],function(t,e){return[s("f7-list",{key:e,attrs:{"no-hairlines":""}},[s("f7-list-item",{attrs:{radio:"",checked:a.type===t,title:a.$t("forms.shortcuts_type_options."+t+"_label")},on:{change:function(){a.type=t,a.typeSelectOpened=!1}}}),a._v(" "),s("f7-block-footer",[a._v(a._s(a.$t("forms.shortcuts_type_options."+t+"_text")))])],1)]})],2)],1),a._v(" "),s("f7-popup",{attrs:{opened:a.templateSelectOpened},on:{"popup:close":function(t){a.templateSelectOpened=!1}}},[s("f7-page",[s("f7-navbar",[s("f7-nav-title",[a._v(a._s(a.$t("forms.shortcut_details_template_select.title")))]),a._v(" "),s("f7-nav-right",[s("f7-link",{attrs:{"popup-close":"","icon-f7":"close"}})],1)],1),a._v(" "),s("f7-list",{staticClass:"forms-templates-list",attrs:{"media-list":"","no-hairlines":""}},a._l(a.templates,function(t){return s("f7-list-item",{key:t.id,attrs:{title:t.data.name,text:t.data.description,radio:"",checked:t.id===a.templateId},on:{change:function(){a.templateId=t.id,a.templateSelectOpened=!1}}},[s("div",{staticClass:"forms-template-icon s70",style:{"background-image":t.iconUrl?"url("+t.iconUrl+")":null},attrs:{slot:"media"},slot:"media"})])}))],1)],1)],1)},staticRenderFns:[],props:{shortcut:Object},data:function data(){var t=this.shortcut.data,e=t.iconUrl,a=t.name,s=t.available,n=t.templateId,i=t.display,r=t.type,l=t.anonymous;return{typeSelectOpened:!1,templateSelectOpened:!1,templates:m.cache.templates,iconUrl:e,name:a,available:s,templateId:n,display:i,type:r,anonymous:l}},computed:{allowSave:function allowSave(){var t=this.templateId,e=this.name;return!(!t||!e.trim().length)},templateName:function templateName(){var e=this;if(!e.templateId)return e.$t("forms.index.notset_label");if(!e.templates)return"";var t=e.templates.filter(function(t){return t.id===e.templateId})[0];return t?t.data.name:""}},mounted:function mounted(){var e=this;e.templates||m.getTemplates(e.$root.user).then(function(t){e.templates=t})},methods:{setDisplay:function setDisplay(t){this.display=t},deleteShortcut:function deleteShortcut(){var t=this;t.$f7.dialog.confirm(t.$t("forms.shortcut_delete_confirm.text"),function(){m.deleteShortcut(t.shortcut.id).then(function(){t.$f7router.back(),t.$events.$emit("forms:shortcutdeleted")})})},save:function save(){var t=this;if(!t.saving){t.saving=!0;var e=t.iconUrl,a=t.name,s=t.available,n=t.templateId,i=t.display,r=t.type,l=t.anonymous;m.updateShortcut({id:t.shortcut.id,data:Object.assign({},t.shortcut.data,{iconUrl:e,name:a,available:s,templateId:n,display:i,type:r,anonymous:l})}).then(function(){t.$f7router.back(),t.$events.$emit("forms:shortcutupdated")})}}}}}]}();