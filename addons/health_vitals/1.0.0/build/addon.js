var addon=function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([,function(t,e,a){"use strict";function n(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{id:"health_vitals__index"}},[a("f7-navbar",[a("tommy-nav-menu"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title","Health Vitals")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/panel/","icon-only":""}},[a("i",{staticClass:"icon health-vitals-icon-settings"})])],1)],1),t._v(" "),a("div",{staticClass:"health-vitals-cards"},[t.user?a("div",{staticClass:"health-vitals-card health-vitals-user-card"},[t.user?a("tommy-circle-avatar",{attrs:{data:t.user}}):t._e(),t._v(" "),a("div",{staticClass:"health-vitals-user-card-content"},[a("div",{staticClass:"name"},[t._v(t._s(t.user.name||(t.user.first_name||"")+" "+(t.user.last_name||"")))]),t._v(" "),a("div",{staticClass:"props"},[t.userAge?a("div",{staticClass:"prop"},[a("div",{staticClass:"prop-label"},[t._v(t._s(t.t("profile_age_label")))]),t._v(" "),a("div",{staticClass:"prop-value"},[t._v(t._s(t.userAge))])]):t._e()])])],1):t._e(),t._v(" "),t.blood_glucose?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/blood_glucose/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.2")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.blood_glucose.date).format("DD MMM YYYY"))+" "+t._s(t.blood_glucose.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"blood-glucose-icon-"+t.blood_glucose.state+".svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.blood_glucose.value)+" "),a("sub",[t._v(t._s(t.t("blood_glucose_units")))])])])])]):t._e(),t._v(" "),t.water_tracker||!1===t.water_tracker?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/water_tracker/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.4")))]),t._v(" "),t.water_tracker?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.water_tracker.date).format("DD MMM YYYY"))+" "+t._s(t.water_tracker.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[t.water_tracker.value<200?a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-cup.svg"}}):t.water_tracker.value<350?a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-glass.svg"}}):a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-bottle.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.water_tracker.value)+" "),a("sub",[t._v(t._s(t.t("water_units.5")))])])])]):t._e(),t._v(" "),!1===t.water_tracker?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.medication_reminder?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/medication_reminder/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.0")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.medication_reminder.date).format("DD MMM YYYY")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[100===t.medication_reminder.takenPercentage?a("img",{attrs:{src:t.$addonAssetsUrl+"icon-check.svg"}}):a("f7-gauge",{attrs:{size:46,value:t.medication_reminder.takenPercentage/100,"border-bg-color":"#FAE1C9","border-color":"#FF4500","border-width":8}})],1),t._v(" "),a("span",{staticClass:"health-vitals-card-icon-text"},[t._v(t._s(t.t("taken","Taken")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.medication_reminder.takenPercentage)+"%")])])])]):t._e(),t._v(" "),t.temperature||!1===t.temperature?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/temperature/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.5")))]),t._v(" "),t.temperature?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.temperature.date).format("DD MMM YYYY"))+" "+t._s(t.temperature.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"temperature-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.temperature.value)+" "),a("sub",[t._v(t._s(t.t("body_temperature_units.0")))])])])]):t._e(),t._v(" "),!1===t.temperature?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.pedometer?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/pedometer/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.6")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.pedometer.date).format("DD MMM YYYY"))+" "+t._s(t.pedometer.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"pedometer-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.pedometer.value)+" "),a("sub",[t._v(t._s(t.t("pedometer_units")))])])])])]):t._e(),t._v(" "),t.height||!1===t.height?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/height/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.7")))]),t._v(" "),t.height?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.height.date).format("DD MMM YYYY"))+" "+t._s(t.height.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"height-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.height.value)+" "),a("sub",[t._v(t._s(t.t("height_units.0")))])])])]):t._e(),t._v(" "),!1===t.height?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.heart_rate?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/heart_rate/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.3")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.heart_rate.date).format("DD MMM YYYY"))+" "+t._s(t.heart_rate.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"heart-rate-icon-"+t.heart_rate.state+".svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.heart_rate.value)+" "),a("sub",[t._v(t._s(t.t("heart_rate_units")))])])])])]):t._e(),t._v(" "),t.blood_pressure||!1===t.blood_pressure?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/blood_pressure/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.1")))]),t._v(" "),t.blood_pressure?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.blood_pressure.date).format("DD MMM YYYY"))+" "+t._s(t.blood_pressure.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.blood_pressure.value[0])+"/"+t._s(t.blood_pressure.value[1]))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[a("sub",[t._v(t._s(t.t("blood_pressure_units")))])])])]):t._e(),t._v(" "),!1===t.blood_pressure?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.weight||!1===t.weight?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/weight/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.8")))]),t._v(" "),t.weight?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.weight.date).format("DD MMM YYYY"))+" "+t._s(t.weight.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"weight-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.weight.value)+" "),a("sub",[t._v(t._s(t.t("weight_units.0")))])])])]):t._e(),t._v(" "),!1===t.weight?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e()])],1)}a.r(e),n._withStripped=!0;var i={id:void 0,user:void 0};function s(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var l=window.tommy.api,r=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsWaterTrackerItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},o=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsTemperatureItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},c=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsPedometerItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},d=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsHeightItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},v=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsWeightItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},u=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsHeartRateItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},m=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsBloodPressureItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},h=function(t){return l.getFragments({addon:"health_vitals",kind:"VitalsBloodGlucoseItem",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},_=function(t){return new Promise((function(e,a){var n=l.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0},{cache:!1}),r=l.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0},{cache:!1});Promise.all([n,r]).then((function(t){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,2),i=n[0],l=n[1],r={};i.forEach((function(t){var e=new Date(t.data.startDate);if(!(e.getTime()>(new Date).getTime())){var a=new Date(t.data.endDate);a.getTime()>(new Date).getTime()&&(a=new Date).setHours(0,0,0,0);for(var n=(a.getTime()-e.getTime())/864e5+1,i=0;i<n;i+=1){var l,o=new Date(e).getTime()+864e5*i,c=new Date(o).toJSON();r[c]||(r[c]=[]),(l=r[c]).push.apply(l,s(t.data.dosage.map((function(e){return{id:t.id,name:t.data.name,time:e.time}}))))}}})),Object.keys(r).forEach((function(t){r[t].sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1}))}));var o=Object.keys(r).sort((function(t,e){return new Date(t).getTime()<new Date(e).getTime()?-1:1})),c=o[o.length-1];if(c){var d=r[c],v=d.filter((function(t){var e,a=new Date(c);return a.setHours(0,0,0,0),l.forEach((function(n){if(!e){var i=new Date(n.data.date||n.start_at);i.setHours(0,0,0,0),t.id===n.data.medication_id&&t.time===n.data.time&&a.getTime()===i.getTime()&&n.data.taken&&(e=!0)}})),e}));e({date:new Date(c),takenPercentage:Math.round(v.length/d.length*100)})}else a()}))}))},f={water_tracker:null,temperature:null,pedometer:null,height:null,weight:null,heart_rate:null,blood_pressure:null,blood_glucose:null,medication_reminder:null};function p(t,e,a,n,i,s,l,r){var o,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=o):i&&(o=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(t,e){return o.call(e),d(t,e)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,o):[o]}return{exports:t,options:c}}var g=p({data:function(){return{actorId:this.$f7route.query.actor_id,user:null,water_tracker:f.water_tracker,temperature:f.temperature,pedometer:f.pedometer,height:f.height,weight:f.weight,heart_rate:f.heart_rate,blood_pressure:f.blood_pressure,blood_glucose:f.blood_glucose,medication_reminder:f.medication_reminder}},mounted:function(){var t=this;t.actorId?(i.id=parseInt(t.actorId,10),t.$api.getContact(t.actorId).then((function(e){t.user=e,i.user=e,t.getData()})).catch((function(){t.getData()}))):(t.user=t.$root.user,delete i.id,delete i.user,t.getData())},computed:{userAge:function(){if(this.user){var t=this.user.dob;if(t){var e=this.$moment(new Date(t));return this.$moment(new Date).diff(e,"years")}}}},methods:{t:function(t,e){return this.$t("health_vitals.index.".concat(t),e)},getData:function(){var t=this;r(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.water_tracker=!1,void(f.water_tracker=!1);t.water_tracker=e[0].data,f.water_tracker=t.water_tracker})),o(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.temperature=!1,void(f.temperature=!1);t.temperature=e[0].data,f.temperature=t.temperature})),c(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.pedometer=!1,void(f.pedometer=!1);t.pedometer=e[0].data,f.pedometer=t.pedometer})),d(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.height=!1,void(f.height=!1);t.height=e[0].data,f.height=t.height})),v(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.weight=!1,void(f.weight=!1);t.weight=e[0].data,f.weight=t.weight})),u(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.heart_rate=!1,void(f.heart_rate=!1);t.heart_rate=e[0].data,f.heart_rate=t.heart_rate})),m(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.blood_pressure=!1,void(f.blood_pressure=!1);t.blood_pressure=e[0].data,f.blood_pressure=t.blood_pressure})),h(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.blood_glucose=!1,void(f.blood_glucose=!1);t.blood_glucose=e[0].data,f.blood_glucose=t.blood_glucose})),_(t.$root.user).then((function(e){if(!e)return t.medication_reminder=!1,void(f.medication_reminder=!1);t.medication_reminder=e,f.medication_reminder=t.medication_reminder})).catch((function(){}))}}},n,[],!1,null,null,null);function b(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-panel",{staticClass:"health-vitals-panel",attrs:{right:"",cover:""}},[a("f7-view",{attrs:{init:!1}},[a("f7-page",[a("f7-navbar",[a("f7-nav-left",[a("f7-link",{attrs:{"panel-close":""}},[a("i",{staticClass:"material-icons md-36"},[t._v("keyboard_arrow_left")])])],1)],1),t._v(" "),a("f7-list",{staticClass:"health-vitals-panel-list",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:t.$t("health_vitals.blood_glucose.title"),link:"/health_vitals/blood_glucose/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"blood_glucose/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.blood_pressure.title"),link:"/health_vitals/blood_pressure/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"blood_pressure/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.heart_rate.title"),link:"/health_vitals/heart_rate/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"heart_rate/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.height.title"),link:"/health_vitals/height/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"height/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.temperature.title"),link:"/health_vitals/temperature/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"temperature/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.water_tracker.title"),link:"/health_vitals/water_tracker/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"water_tracker/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.weight.title"),link:"/health_vitals/weight/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"weight/icon.png"},slot:"media"})])],1)],1)],1)],1)}g.options.__file="addons/health_vitals/1.0.0/src/pages/index.vue";var y=g.exports;b._withStripped=!0;var D=p({},b,[],!1,null,null,null);function E(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.data[0].data.value)),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit||0))))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.data[0].data.date).format("DD MMM YYYY"))+" "+t._s(t.data[0].data.time))])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,n){return a("div",{key:n,class:"vitals-element-card vitals-"+t.vitalsElement+"-card "+t.cardExtraClass(e)},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-icon vitals-"+t.vitalsElement+"-card-icon"},[t.cardCustomIconName(e)?a("img",{attrs:{src:t.$addonAssetsUrl+"/"+t.vitalsElement+"/"+t.cardCustomIconName(e)+".svg"}}):a("img",{attrs:{src:t.$addonAssetsUrl+"/"+t.vitalsElement+"/card-icon.svg"}})]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value)+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit||0))))])])])])})),0):t._e()],1)}D.options.__file="addons/health_vitals/1.0.0/src/pages/right-panel.vue";var w=D.exports;E._withStripped=!0;var k=window.tommy.api,$=function(t,e,a){var n,s=2<arguments.length&&void 0!==a?a:{},l=s.page,r=s.limit,o=s.dateFrom,c=s.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),o&&c&&(n=[new Date(o).toJSON(),new Date(c).toJSON()]),k.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:i.id||e.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:l||1,limit:r||50,date_range:n},{cache:!1})},x=function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var n=new Date(a.date);n.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=i.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:n.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],data:JSON.stringify(a)};return i.id&&(l.actor_id=i.id,l.actor_type="User"),k.createFragment(l)},C=function(t){return k.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},S=function(t,e){var a=1<arguments.length&&void 0!==e?e:{};return k.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(a)}})};function O(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=p({props:{vitalsElement:String,indexCardExtraClass:[String,Function],indexCardCustomIconName:[String,Function]},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},methods:{cardCustomIconName:function(t){return this.indexCardCustomIconName?"function"==typeof this.indexCardCustomIconName?this.indexCardCustomIconName(t):this.indexCardCustomIconName:""},cardExtraClass:function(t){return this.indexCardExtraClass?"function"==typeof this.indexCardExtraClass?this.indexCardExtraClass(t):this.indexCardExtraClass:""},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;$(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),n=O(t.data.time.split(":"),2),i=n[0],s=n[1];a.setHours(parseInt(i,10),parseInt(s,10));var l=new Date(e.data.date),r=O(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this,a=e.$$(t.target).closest(".page-content");a.length&&(100<a[0].scrollTop?e.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")):e.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},E,[],!1,null,null,null);function M(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.value,min:"1",label:t.t("vital_label")},on:{input:function(e){t.value=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("vital_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.t("date_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"time-input",label:t.t("time_label")}}),t._v(" "),t._l(t.manualAddExtraFields,(function(e,n){return["smartselect"===e.type?a("f7-list-item",{key:n,attrs:{title:e.label(t.$t),"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0}}},[a("select",{on:{change:function(a){return t.onExtraFieldChange(a,e)}}},t._l(e.values(t.$t),(function(e,n){return a("option",{key:n,domProps:{value:e.value}},[t._v(t._s(e.display))])})),0)]):t._e(),t._v(" "),"select"===e.type?a("f7-list-input",{key:n,attrs:{type:e.type,value:this[e.propName],label:e.label(t.$t),"input-style":e.inputStyle,"inline-label":""},on:{change:function(a){return t.onExtraFieldChange(a,e)}}},t._l(e.values(t.$t),(function(e,n){return a("option",{key:n,domProps:{value:e.value}},[t._v(t._s(e.display))])})),0):t._e()]}))],2)],1)}T.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/index.vue";var j=T.exports;function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function I(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(a),!0).forEach((function(e){P(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function P(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}M._withStripped=!0;var V=p({props:{vitalsElement:String,manualAddExtraFields:Array},data:function(){var t={};return this.manualAddExtraFields&&this.manualAddExtraFields.forEach((function(e){t[e.propName]=e.defaultValue})),I({value:"",date:"",time:""},t)},computed:{allowSave:function(){return this.value&&0<this.value}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[new Date],on:{change:function(e,a){t.date=new Date(a[0]),t.date.setHours(0,0,0,0)}}});var e=(new Date).getHours();e<10&&(e="0".concat(e));var a=(new Date).getMinutes();a<10&&(a="0".concat(a)),t.$f7.picker.create({inputEl:t.$el.querySelector("#time-input"),value:[e.toString(),a.toString()],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(e,a){t.time=a.join(":")}}})},methods:{onExtraFieldChange:function(t,e){this[e.propName]=t.target.value},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},save:function(){var t=this,e=t.value,a=t.date,n=t.time,i={};t.manualAddExtraFields&&t.manualAddExtraFields.forEach((function(e){i[e.propName]=t[e.propName]})),x(t.vitalsElement,t.$root.user,I({value:e,date:new Date(a).toJSON(),time:n,unit:0},i)).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},M,[],!1,null,null,null);function A(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)}V.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/add.vue";var N=V.exports,F={receiveMessage:!(A._withStripped=!0)},U=p({props:{vitalsElement:String},data:function(){return{settings:F}},mounted:function(){var t=this;C(t.vitalsElement).then((function(e){e&&(t.settings=e,F=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,F=this.settings,S(this.vitalsElement,this.settings)}}},A,[],!1,null,null,null);function H(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))]),t._v(" "),t.clickedExtra?a("span",{domProps:{innerHTML:t._s(t.clickedExtra)}}):t._e()]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)}U.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/settings.vue";var R=U.exports;function J(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function q(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?J(Object(a),!0).forEach((function(e){B(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function B(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}H._withStripped=!0;var G=p({props:{vitalsElement:String,chartType:{type:String,default:"line"},chartColor:{type:String,default:"#5FA81A"},chartMarkerColor:String,chartClickedExtra:Function,chartWeekSumsDays:Boolean,chartMonthSumsDays:Boolean},data:function(){return{data:null,clicked:null,range:"day"}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;$(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var n=t.itemDate(e),i=t.itemDate(a);return n.getTime()-i.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){var t=this;return t.clicked?t.chartWeekSumsDays&&"week"===t.range||t.chartMonthSumsDays&&"month"===t.range?t.$moment(t.clicked.x).format("DD MMM YYYY"):t.$moment(t.clicked.x).format("DD MMM YYYY HH:mm"):""},clickedValue:function(){var t=this;if(!t.clicked)return"";var e=t.data[t.clicked.id];return"".concat(t.clicked.y," ").concat(t.t("vital_unit.".concat(e.data.unit)))},clickedExtra:function(){var t=this;if(!t.clicked)return"";if(t.chartClickedExtra){var e=t.data[t.clicked.id];return t.chartClickedExtra(e,t.$t)}return""},todayValues:function(){var t=this;if(!t.data)return null;var e=new Date;return e.setHours(0,0,0,0),t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()})).map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))},weekValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth(),e.getDate()-7);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.chartWeekSumsDays?t.sumValuesByDay(a):a.map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))},monthValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth()-1,e.getDate());var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.chartWeekSumsDays?t.sumValuesByDay(a):a.map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))}},methods:{sumValuesByDay:function(t){var e=this,a=[],n=e.itemDate(t[0]);n.setHours(0,0,0,0);var i=0;return t.forEach((function(t){var s=e.itemDate(t);s.setHours(0,0,0,0),s.getTime()!==n.getTime()&&(i+=1,n=s),a[i]||(a[i]={x:n,y:0,id:e.data.indexOf(t)}),a[i].y+=parseInt(t.data.value,10)})),a},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),n=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,n),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:t.chartType||"line"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:null},time:{timezoneOffset:(new Date).getTimezoneOffset()},plotOptions:{line:{marker:{enabled:!0,fillColor:t.chartMarkerColor||t.chartColor}}}},n={color:t.chartColor,cursor:"pointer",point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,q({},a,{series:[q({},n,{data:t.todayValues})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,q({},a,{series:[q({},n,{data:t.weekValues})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,q({},a,{series:[q({},n,{data:t.monthValues})]}))}}}},H,[],!1,null,null,null);G.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/history.vue";var W=G.exports,z=[{path:"/health_vitals/blood_glucose/",component:j},{path:"/health_vitals/blood_glucose/add/",component:N},{path:"/health_vitals/blood_glucose/settings/",component:R},{path:"/health_vitals/blood_glucose/history/",component:W}];function L(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.data[0].data.value[0])+"/"+t._s(t.data[0].data.value[1])),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit[0]||0))))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.data[0].data.date).format("DD MMM YYYY"))+" "+t._s(t.data[0].data.time))])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,n){return a("div",{key:n,class:"vitals-element-card vitals-"+t.vitalsElement+"-card"},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value[0])+"/"+t._s(e.data.value[1])+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit[0]||0))))])]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value[2])+" "),a("sub",[t._v(t._s(t.t("bpm_unit."+(e.data.unit[2]||0))))])])])])})),0):t._e()],1)}z.forEach((function(t){t.options={props:{vitalsElement:"blood_glucose",indexCardCustomIconName:function(t){return t&&t.data&&t.data.state?"card-icon-".concat(t.data.state):""},manualAddExtraFields:[{type:"smartselect",propName:"state",defaultValue:"none",label:function(t){return t("health_vitals.blood_glucose.manual_enter.vital_variants_label")},values:function(t){return[{value:"none",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.0")},{value:"beforemeal",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.1")},{value:"aftermeal",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.2")}]}}],chartColor:"#FEBFB8",chartMarkerColor:"#FD7E70",chartClickedExtra:function(t,e){var a=t.data.state;return'\n          <span class="vitals-blood_glucose-chart-clicked-state-icon-'.concat(a,'"></span>\n          <span class="vitals-blood_glucose-chart-clicked-state-text">').concat(e("health_vitals.blood_glucose.history.vital_variants.".concat(["none","beforemeal","aftermeal"].indexOf(a))),"</span>\n        ").trim()}}}}));var X=z;L._withStripped=!0;var K=window.tommy.api,Q=function(t,e,a){var n,s=2<arguments.length&&void 0!==a?a:{},l=s.page,r=s.limit,o=s.dateFrom,c=s.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),o&&c&&(n=[new Date(o).toJSON(),new Date(c).toJSON()]),K.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:i.id||e.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:l||1,limit:r||50,date_range:n},{cache:!1})},Z=function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var n=new Date(a.date);n.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=i.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:n.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],data:JSON.stringify(a)};return i.id&&(l.actor_id=i.id,l.actor_type="User"),K.createFragment(l)},tt=function(t){return K.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},et=function(t,e){var a=1<arguments.length&&void 0!==e?e:{};return K.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(a)}})};function at(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nt=p({props:{vitalsElement:String,indexCardCustomIconName:[String,Function]},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;Q(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),n=at(t.data.time.split(":"),2),i=n[0],s=n[1];a.setHours(parseInt(i,10),parseInt(s,10));var l=new Date(e.data.date),r=at(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this,a=e.$$(t.target).closest(".page-content");a.length&&(100<a[0].scrollTop?e.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")):e.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},L,[],!1,null,null,null);function it(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.sys,min:"1",label:t.t("sys_label")},on:{input:function(e){t.sys=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("sys_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.dia,min:"1",label:t.t("dia_label")},on:{input:function(e){t.dia=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("dia_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.bpm,min:"1",label:t.t("bpm_label")},on:{input:function(e){t.bpm=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("bpm_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.t("date_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"time-input",label:t.t("time_label")}})],1)],1)}nt.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/index.vue";var st=nt.exports;it._withStripped=!0;var lt=p({props:{vitalsElement:String},data:function(){return{sys:"",dia:"",bpm:"",date:"",time:""}},computed:{allowSave:function(){var t=this;return t.sys&&0<t.sys&&t.dia&&0<t.dia&&t.bpm&&0<t.bpm}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[new Date],on:{change:function(e,a){t.date=new Date(a[0]),t.date.setHours(0,0,0,0)}}});var e=(new Date).getHours();e<10&&(e="0".concat(e));var a=(new Date).getMinutes();a<10&&(a="0".concat(a)),t.$f7.picker.create({inputEl:t.$el.querySelector("#time-input"),value:[e.toString(),a.toString()],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(e,a){t.time=a.join(":")}}})},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},save:function(){var t=this,e=t.sys,a=t.dia,n=t.bpm,i=t.date,s=t.time;Z(t.vitalsElement,t.$root.user,{value:[e,a,n],date:new Date(i).toJSON(),time:s,unit:[0,0,0]}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},it,[],!1,null,null,null);function rt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)}lt.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/add.vue";var ot=lt.exports,ct={receiveMessage:!(rt._withStripped=!0)},dt=p({props:{vitalsElement:String},data:function(){return{settings:ct}},mounted:function(){var t=this;tt(t.vitalsElement).then((function(e){e&&(t.settings=e,ct=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,ct=this.settings,et(this.vitalsElement,this.settings)}}},rt,[],!1,null,null,null);function vt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))])]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)}dt.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/settings.vue";var ut=dt.exports;function mt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function ht(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(a),!0).forEach((function(e){_t(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function _t(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}vt._withStripped=!0;var ft=p({props:{vitalsElement:String},data:function(){return{data:null,clicked:null,range:"day",chartColors:["#5FA81A","#F5A623","#FF4500"]}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;Q(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var n=t.itemDate(e),i=t.itemDate(a);return n.getTime()-i.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){var t=this;return t.clicked?t.chartWeekSumsDays&&"week"===t.range||t.chartMonthSumsDays&&"month"===t.range?t.$moment(t.clicked.x).format("DD MMM YYYY"):t.$moment(t.clicked.x).format("DD MMM YYYY HH:mm"):""},clickedValue:function(){var t=this;if(!t.clicked)return"";var e=t.data[t.clicked.id].data.value;return"".concat(e[0],"/").concat(e[1]," ").concat(t.t("vital_units.0")," ").concat(e[2]," ").concat(t.t("vital_units.2"))}},methods:{todayValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var n=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:n,id:e.data.indexOf(a)}}))},weekValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),a.setMonth(a.getMonth(),a.getDate()-7),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var n=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:n,id:e.data.indexOf(a)}}))},monthValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),a.setMonth(a.getMonth()-1,a.getDate()),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var n=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:n,id:e.data.indexOf(a)}}))},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),n=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,n),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:"line"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:null},time:{timezoneOffset:(new Date).getTimezoneOffset()},plotOptions:{line:{marker:{enabled:!0}}}},n={cursor:"pointer",marker:{symbol:"circle"},point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,ht({},a,{series:[ht({},n,{color:t.chartColors[0],data:t.todayValues(0)}),ht({},n,{color:t.chartColors[1],data:t.todayValues(1)}),ht({},n,{color:t.chartColors[2],data:t.todayValues(2)})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,ht({},a,{series:[ht({},n,{color:t.chartColors[0],data:t.weekValues(0)}),ht({},n,{color:t.chartColors[1],data:t.weekValues(1)}),ht({},n,{color:t.chartColors[2],data:t.weekValues(2)})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,ht({},a,{series:[ht({},n,{color:t.chartColors[0],data:t.monthValues(0)}),ht({},n,{color:t.chartColors[1],data:t.monthValues(1)}),ht({},n,{color:t.chartColors[2],data:t.monthValues(2)})]}))}}}},vt,[],!1,null,null,null);ft.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/history.vue";var pt=[{path:"/health_vitals/blood_pressure/",component:st},{path:"/health_vitals/blood_pressure/add/",component:ot},{path:"/health_vitals/blood_pressure/settings/",component:ut},{path:"/health_vitals/blood_pressure/history/",component:ft.exports}];pt.forEach((function(t){t.options={props:{vitalsElement:"blood_pressure"}}}));var gt=pt,bt=[{path:"/health_vitals/heart_rate/",component:j},{path:"/health_vitals/heart_rate/add/",component:N},{path:"/health_vitals/heart_rate/settings/",component:R},{path:"/health_vitals/heart_rate/history/",component:W}];bt.forEach((function(t){t.options={props:{vitalsElement:"heart_rate",indexCardCustomIconName:function(t){return t&&t.data&&t.data.state?"card-icon-".concat(t.data.state):""},manualAddExtraFields:[{type:"smartselect",propName:"state",defaultValue:"rest",label:function(t){return t("health_vitals.heart_rate.manual_enter.vital_variants_label")},values:function(t){return[{value:"rest",display:t("health_vitals.heart_rate.manual_enter.vital_variants.0")},{value:"walk",display:t("health_vitals.heart_rate.manual_enter.vital_variants.1")},{value:"run",display:t("health_vitals.heart_rate.manual_enter.vital_variants.2")}]}}],chartColor:"#FEBFB8",chartMarkerColor:"#FD7E70",chartClickedExtra:function(t,e){var a=t.data.state;return'\n          <span class="vitals-heart_rate-chart-clicked-state-icon-'.concat(a,'"></span>\n          <span class="vitals-heart_rate-chart-clicked-state-text">').concat(e("health_vitals.heart_rate.history.vital_variants.".concat(["rest","walk","run"].indexOf(a))),"</span>\n        ").trim()}}}}));var yt=bt,Dt=[{path:"/health_vitals/height/",component:j},{path:"/health_vitals/height/add/",component:N},{path:"/health_vitals/height/settings/",component:R},{path:"/health_vitals/height/history/",component:W}];function Et(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.closestVaccine?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.t("next_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.daysDiff(t.closestVaccine))),a("span",[t._v(t._s(t.t("days_label")))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.closestVaccine.data.scheduledDate||t.closestVaccine.data.sheduledDate).format("DD MMM YYYY"))+", "+t._s(t.closestVaccine.data.name))])]):t._e(),t._v(" "),t.data&&!t.closestVaccine?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)}Dt.forEach((function(t){t.options={props:{vitalsElement:"height"}}}));var wt=Dt;Et._withStripped=!0;var kt=window.tommy.api,$t=function(t){return kt.getFragments({addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0},{cache:!1})},xt=function(t,e){var a=i.user||t,n={addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,start_at:new Date(e.scheduledDate).toJSON(),tags:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:i.id||t.id}],filters:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:i.id||t.id}],data:JSON.stringify(e)};return i.id&&(n.actor_id=i.id,n.actor_type="User"),kt.createFragment(n)},Ct=function(t,e,a){var n=i.user||t,s={addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,start_at:new Date(a.scheduledDate).toJSON(),tags:[{context:"members",name:n.name||"".concat(n.first_name||""," ").concat(n.last_name||""),user_id:i.id||t.id}],filters:[{context:"members",name:n.name||"".concat(n.first_name||""," ").concat(n.last_name||""),user_id:i.id||t.id}],data:JSON.stringify(a)};return i.id&&(s.actor_id=i.id,s.actor_type="User"),kt.updateFragment(e,s)},St=function(t,e){return kt.deleteFragment(e)},Ot=function(t){return kt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},Tt=function(t,e){var a=1<arguments.length&&void 0!==e?e:{};return kt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(a)}})};var Mt=p({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{closestVaccine:function(){if(!this.data)return null;var t,e=function(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.data);e.sort((function(t,e){return new Date(t.data.scheduledDate||t.data.sheduledDate).getTime()<new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()?-1:1}));var a=(new Date).getTime();return e.forEach((function(e){if(!t){var n=new Date(e.data.scheduledDate||e.data.sheduledDate).getTime();a<n&&(t=e)}})),t},orderedData:function(){return this.data?this.data.sort((function(t,e){var a=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime();return new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()<a?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},daysDiff:function(t){var e=(new Date).getTime(),a=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime();return Math.ceil((a-e)/1e3/60/60/25)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},checkReminders:function(){var t=this;t.data.forEach((function(e){t.isOverDue(e)&&t.$f7.dialog.create({text:'\n            <div class="text-align-center">\n              <img src="'.concat(t.$addonAssetsUrl).concat(t.vitalsElement,'/remind.svg" height="85"/>\n            </div>\n            <p class="text-align-center">').concat(t.$t("health_vitals.immunisations.due_alert.text"),"<br><b>").concat(e.data.name,"</b></p>\n          "),buttons:[{text:t.$t("health_vitals.immunisations.due_alert.confirm_button")}]}).open()}))},getData:function(){var t=this;$t(t.$root.user).then((function(e){t.data=e.filter((function(t){return!t.data.archived})),t.checkReminders()}))},onPageScroll:function(t){var e=this,a=e.$$(t.target).closest(".page-content");a.length&&(100<a[0].scrollTop?e.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")):e.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},Et,[],!1,null,null,null);function jt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.tAdd("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.tAdd("vaccine_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.tAdd("date_label")}}),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("prevent_disease_title")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text",inputStyle:"text-align: left",value:t.prevent,placeholder:t.tDetails("prevent_disease_title")},on:{input:function(e){t.prevent=e.target.value}}}),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("precautions_title")}}),t._v(" "),a("f7-list-input",{attrs:{type:"textarea",resizable:"",inputStyle:"text-align: left",value:t.precautions,placeholder:t.tDetails("precautions_title")},on:{input:function(e){t.precautions=e.target.value}}})],1)],1)}Mt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/index.vue";var Yt=Mt.exports;jt._withStripped=!0;var It=p({props:{vitalsElement:String},data:function(){return{name:"",prevent:"",precautions:"",scheduledDate:new Date}},computed:{allowSave:function(){return this.name&&0<this.name.length}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[t.scheduledDate],closeOnSelect:!0,on:{change:function(e,a){t.scheduledDate=new Date(a[0]),t.scheduledDate.setHours(0,0,0,0)}}})},methods:{tAdd:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".add_vaccine.").concat(t),e)},tDetails:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".immunisation_details.").concat(t),e)},save:function(){var t=this,e=t.name,a=t.scheduledDate,n=t.prevent,i=t.precautions;xt(t.$root.user,{name:e,scheduledDate:new Date(a).toJSON(),prevent:n,precautions:i}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},jt,[],!1,null,null,null);function Pt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page vitals-"+t.vitalsElement+"-details-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.tDetails("title")))])],1),t._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:t.tDetails("vaccine_label"),after:t.name}}),t._v(" "),a("f7-list-item",{attrs:{title:t.tDetails("date_label"),after:t.$moment(t.scheduledDate).format("DD MMM, YYYY")}}),t._v(" "),a("f7-list-item",{attrs:{title:t.tDetails("status_label"),after:t.statusText()}}),t._v(" "),t.injected&&t.injectedDate?a("f7-list-item",{attrs:{title:t.tDetails("injection_date_label"),after:t.$moment(t.injectedDate).format("DD MMM, YYYY")}}):t._e(),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("prevent_disease_title")}}),t._v(" "),a("f7-list-item",[t._v(t._s(t.prevent))]),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("precautions_title")}}),t._v(" "),a("f7-list-item",[t._v(t._s(t.precautions))])],1),t._v(" "),t.archived?t._e():a("div",{staticClass:"immunisations-details-buttons"},[!t.injected&&t.isOverDue()?a("a",{staticClass:"immunisations-details-button-red",attrs:{href:"#"},on:{click:t.injectVaccine}},[t._v(t._s(t.tDetails("confirm_injection_button")))]):t._e(),t._v(" "),a("a",{attrs:{href:"#"},on:{click:t.archiveVaccine}},[t._v(t._s(t.tDetails("archive_button")))])]),t._v(" "),t.archived?a("div",{staticClass:"immunisations-details-buttons"},[a("a",{staticClass:"immunisations-details-button-red",attrs:{href:"#"},on:{click:t.deleteVaccine}},[t._v(t._s(t.$t("health_vitals.immunisations.archive.delete_button")))])]):t._e()],1)}It.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/add.vue";var Vt=It.exports;Pt._withStripped=!0;var At=p({props:{vitalsElement:String,vaccine:Object},data:function(){var t=this.vaccine.data,e=t.name,a=t.prevent,n=t.precautions,i=t.scheduledDate,s=t.sheduledDate,l=t.injected,r=t.injectedDate,o=t.archived;return{id:this.vaccine.id,name:e,prevent:a,precautions:n,scheduledDate:i||s,injected:l,injectedDate:r,archived:o}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[t.scheduledDate],closeOnSelect:!0,on:{change:function(e,a){t.scheduledDate=new Date(a[0]),t.scheduledDate.setHours(0,0,0,0)}}})},methods:{tAdd:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".add_vaccine.").concat(t),e)},tDetails:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".immunisation_details.").concat(t),e)},statusText:function(){var t=this;return t.injected?t.tDetails("status_options.1"):t.isOverDue()?t.tDetails("status_options.0"):t.tDetails("status_options.2")},isOverDue:function(){if(this.injected)return!1;var t=new Date,e=new Date(this.scheduledDate||this.sheduledDate);return t.getTime()>=e.getTime()},archiveVaccine:function(){var t=this,e=t.name,a=t.prevent,n=t.precautions,i=t.scheduledDate,s=t.injected,l=t.injectedDate;t.$f7.dialog.confirm(t.$t("health_vitals.immunisations.archive_delete_confirm_prompt.text"),(function(){Ct(t.$root.user,t.id,{name:e,prevent:a,precautions:n,scheduledDate:i,injected:s,injectedDate:l,archived:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}))},deleteVaccine:function(){var t=this;t.$f7.dialog.confirm(t.$t("health_vitals.immunisations.archive_delete_confirm_prompt.text"),(function(){St(t.$root.user,t.id).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}))},injectVaccine:function(){var t,e=this,a=e.$f7.dialog.create({title:e.$t("health_vitals.immunisations.injection_confirm.date_label"),text:'<div class="immunisations-dialog-calendar"></div>',buttons:[{text:e.$t("health_vitals.immunisations.injection_confirm.cancel_button")},{text:e.$t("health_vitals.immunisations.injection_confirm.confirm_button"),bold:!0,onClick:function(){!function(){e.injected=!0,e.injectedDate=t.value[0];var a=e.name,n=e.prevent,i=e.precautions,s=e.scheduledDate,l=e.injected,r=e.injectedDate,o=e.archived;Ct(e.$root.user,e.id,{name:a,prevent:n,precautions:i,scheduledDate:s,injected:l,injectedDate:r.toJSON(),archived:o}).then((function(){e.$events.$emit("".concat(e.vitalsElement,":updateRecords")),e.$f7router.back()}))}()}}]});a.open(),t=e.$f7.calendar.create({containerEl:a.$el.find(".immunisations-dialog-calendar"),value:[new Date]})},save:function(){var t=this,e=t.name,a=t.scheduledDate,n=t.prevent,i=t.precautions;xt(t.$root.user,{name:e,scheduledDate:new Date(a).toJSON(),prevent:n,precautions:i}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},Pt,[],!1,null,null,null);function Nt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1),t._v(" "),a("f7-list-item",{attrs:{link:"/vitals_immunisations/archive/",title:t.t("archive_label")}})],1)],1)}At.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/details.vue";var Ft=At.exports,Ut={receiveMessage:!(Nt._withStripped=!0)},Ht=p({props:{vitalsElement:String},data:function(){return{settings:Ut}},mounted:function(){var t=this;Ot(t.vitalsElement).then((function(e){e&&(t.settings=e,Ut=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,Ut=this.settings,Tt(this.vitalsElement,this.settings)}}},Nt,[],!1,null,null,null);function Rt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title","History")))])],1),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available","When you have previous records, they will show here.")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)}Ht.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/settings.vue";var Jt=Ht.exports;Rt._withStripped=!0;var qt=p({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{orderedData:function(){return this.data?this.data.sort((function(t,e){var a=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime();return new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()<a?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},getData:function(){var t=this;$t(t.$root.user).then((function(e){t.data=[],t.data=e.filter((function(t){var e=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime(),a=(new Date).getTime();return!t.data.archived&&e<a}))}))}}},Rt,[],!1,null,null,null);function Bt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-archive-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"})]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)}qt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/history.vue";var Gt=qt.exports;Bt._withStripped=!0;var Wt=p({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{orderedData:function(){return this.data?this.data.sort((function(t,e){var a=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime();return new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()<a?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".archive.").concat(t),e)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},getData:function(){var t=this;$t(t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data.archived}))}))}}},Bt,[],!1,null,null,null);Wt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/archive.vue";var zt=[{path:"/health_vitals/immunisations/",component:Yt},{path:"/health_vitals/immunisations/add/",component:Vt},{path:"/health_vitals/immunisations/details/",component:Ft},{path:"/health_vitals/immunisations/settings/",component:Jt},{path:"/health_vitals/immunisations/history/",component:Gt},{path:"/health_vitals/immunisations/archive/",component:Wt.exports}];function Lt(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":"","route-props":{goalValue:t.settings?t.settings.goal_value:0}}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/plan/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{staticClass:"vitals-medicaton_reminder-header-date"},[a("span",{staticClass:"month"},[t._v(t._s(t.$moment().format("MMMM")))]),t._v(" "),a("span",{staticClass:"day"},[t._v(t._s(t.$moment().format("D")))])])]),t._v(" "),t.data&&!t.todayData?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.todayData?a("div",{staticClass:"medication-index-cards"},t._l(t.todayData,(function(e,n){return a("div",{key:n,staticClass:"medication-index-card"},[a("div",{staticClass:"medication-index-card-icon",class:{taken:t.isTaken(e),"not-taken":t.isNotTaken(e),"need-to-take":t.isNeedToTake(e)}}),t._v(" "),a("div",{staticClass:"medication-index-card-content"},[a("div",{staticClass:"medication-index-card-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"medication-index-card-dosage"},[t._v(t._s(e.value)+" "+t._s(t.t("dosage_unit."+e.unit)))])]),t._v(" "),a("div",{staticClass:"medication-index-card-time"},[t._v(t._s(e.time))])])})),0):t._e()],1)}zt.forEach((function(t){t.options={props:{vitalsElement:"immunisations"}}}));var Xt=zt;Lt._withStripped=!0;var Kt=window.tommy.api,Qt=function(t,e,a,n){var s=(new Date).toJSON(),l=i.user||t,r={addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,start_at:s,tags:[{context:"members",name:l.name||"".concat(l.first_name||""," ").concat(l.last_name||""),user_id:t.id}],filters:[{context:"members",name:l.name||"".concat(l.first_name||""," ").concat(l.last_name||""),user_id:i.id||t.id}],data:JSON.stringify({medication_id:e,taken:n,time:a,date:s})};return i.id&&(r.actor_id=i.id,r.actor_type="User"),Kt.createFragment(r)},Zt=function(t,e){var a,n=1<arguments.length&&void 0!==e?e:{},s=n.dateFrom,l=n.dateTo;return s&&l&&(a=[new Date(s).toJSON(),new Date(l).toJSON()]),Kt.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0,date_range:a},{cache:!1})},te=function(t,e){return Kt.getFragment(e,{addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0},{cache:!1})},ee=function(t){return Kt.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:i.id||t.id,actor_id:i.id,actor_type:i.id?"User":void 0},{cache:!1})},ae=function(t,e){var a=i.user||t,n={addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,start_at:new Date(e.startDate).toJSON(),end_at:new Date(e.endDate).toJSON(),tags:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:i.id||t.id}],filters:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:i.id||t.id}],data:JSON.stringify(e)};return i.id&&(n.actor_id=i.id,n.actor_type="User"),Kt.createFragment(n)},ne=function(t,e,a){var n=i.user||t,s={addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,start_at:new Date(a.startDate).toJSON(),tags:[{context:"members",name:n.name||"".concat(n.first_name||""," ").concat(n.last_name||""),user_id:i.id||t.id}],filters:[{context:"members",name:n.name||"".concat(n.first_name||""," ").concat(n.last_name||""),user_id:i.id||t.id}],data:JSON.stringify(a)};return i.id&&(s.actor_id=i.id,s.actor_type="User"),Kt.updateFragment(e,s)},ie=function(t,e){return Kt.deleteFragment(e)},se=function(t){return Kt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},le=function(t,e){var a=1<arguments.length&&void 0!==e?e:{};return Kt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(a)}})};var re=p({props:{vitalsElement:String},data:function(){return{data:null,takenData:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{todayData:function(){if(!this.data)return null;var t=(new Date).getTime(),e=[];return this.data.forEach((function(a){if(a.data.reminder){var n=new Date(a.data.startDate).getTime(),i=new Date(a.data.endDate).getTime();n<=t&&t<=i&&a.data.dosage.forEach((function(t){e.push({id:a.id,name:a.data.name,time:t.time,unit:t.unit,value:t.value})}))}})),e.sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1})),e.length?e:null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this,e=new Date;e.setHours(0,0,0,0),Promise.all([new Promise((function(e,a){ee(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))})),new Promise((function(a,n){Zt(t.$root.user,{dateFrom:e,dateTo:new Date(e.getTime()+864e5)}).then((function(t){a(t)})).catch((function(t){n(t)}))}))]).then((function(e){var a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,2),n=a[0],i=a[1];t.takenData=i,t.data=n,t.checkReminders()})).catch((function(t){console.log(t)}))},isNeedToTake:function(t){if(!this.todayData)return!1;if(this.isTaken(t)||this.isNotTaken(t))return!1;var e,a=t.time.split(":").map((function(t){return parseInt(t,10)})),n=new Date,i=n.getHours(),s=n.getMinutes();return(i>a[0]||i===a[0]&&s>=a[1])&&(e=!0),e},isTaken:function(t){var e;if(!this.takenData)return!1;var a=new Date;return a.setHours(0,0,0,0),this.takenData.forEach((function(n){if(!e){var i=new Date(n.data.date||n.start_at);i.setHours(0,0,0,0),t.id===n.data.medication_id&&t.time===n.data.time&&a.getTime()===i.getTime()&&n.data.taken&&(e=!0)}})),e},isNotTaken:function(t){var e;if(!this.takenData)return!1;var a=new Date;return a.setHours(0,0,0,0),this.takenData.forEach((function(n){if(!e){var i=new Date(n.data.date||n.start_at);i.setHours(0,0,0,0),t.id!==n.data.medication_id||t.time!==n.data.time||a.getTime()!==i.getTime()||n.data.taken||(e=!0)}})),e},checkReminders:function(){var t=this;t.todayData&&t.todayData.forEach((function(e){t.isNeedToTake(e)&&t.$f7.dialog.create({text:'\n            <div class="text-align-center">\n              <img src="'.concat(t.$addonAssetsUrl).concat(t.vitalsElement,'/remind.svg" height="80"/>\n            </div>\n            <p class="text-align-center">').concat(t.$t("health_vitals.medication_reminder.medication_time.text")," ").concat(e.name,"</p>\n          "),buttons:[{text:t.$t("health_vitals.medication_reminder.medication_time.snooze_button"),onClick:function(){Qt(t.$root.user,e.id,e.time,!1).then((function(){t.getData()}))}},{text:t.$t("health_vitals.medication_reminder.medication_time.confirm_button"),bold:!0,onClick:function(){Qt(t.$root.user,e.id,e.time,!0).then((function(){t.getData()}))}}]}).open()}))},onPageScroll:function(t){var e=this,a=e.$$(t.target).closest(".page-content");a.length&&(100<a[0].scrollTop?e.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")):e.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},Lt,[],!1,null,null,null);function oe(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.t("vital_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-start",label:t.t("startdate_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-end",label:t.t("enddate_label")}}),t._v(" "),a("f7-list-item",{attrs:{"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0},title:t.t("frequency_label"),after:t.t("frequency_units.0")}},[a("select",{domProps:{value:t.frequency},on:{change:function(e){t.frequency=parseInt(e.target.value,10)}}},t._l(8,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(t.t("frequency_units."+(e-1))))])})),0)]),t._v(" "),t._l(t.frequency,(function(e){return a("f7-list-item",{key:e,staticClass:"vitals-medication_reminder-dosage-input"},[a("div",{staticClass:"input"},[a("input",{staticClass:"time-input",attrs:{type:"text"},domProps:{value:t.dosage[e-1].time}})]),t._v(" "),a("div",{staticClass:"input",staticStyle:{width:"100px"}},[a("input",{attrs:{type:"number",placeholder:t.t("dosage_label")},domProps:{value:t.dosage[e-1].value},on:{input:function(a){t.dosage[e-1].value=a.target.value}}})]),t._v(" "),a("div",{staticClass:"input input-dropdown"},[a("select",{domProps:{value:t.dosage[e-1].unit||"bag"},on:{change:function(a){t.dosage[e-1].unit=a.target.value}}},[a("option",{attrs:{value:"bag"}},[t._v(t._s(t.t("dosage_unit.bag")))]),t._v(" "),a("option",{attrs:{value:"ml"}},[t._v(t._s(t.t("dosage_unit.ml")))]),t._v(" "),a("option",{attrs:{value:"pill"}},[t._v(t._s(t.t("dosage_unit.pill")))]),t._v(" "),a("option",{attrs:{value:"mg"}},[t._v(t._s(t.t("dosage_unit.mg")))]),t._v(" "),a("option",{attrs:{value:"drop"}},[t._v(t._s(t.t("dosage_unit.drop")))])])])])}))],2)],1)}re.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/index.vue";var ce=re.exports;oe._withStripped=!0;var de=p({props:{vitalsElement:String},data:function(){var t=new Date;return t.setHours(0,0,0,0),{name:"",frequency:1,startDate:t,endDate:new Date(t.getTime()+864e6),dosage:[{value:"",unit:"bag",time:"10:00"}]}},computed:{allowSave:function(){if(this.name&&this.name.trim().length){var t=!0;if(this.dosage.forEach((function(e){(!e.value||e.value<1)&&(t=!1)})),t)return!0}return!1}},watch:{frequency:function(){for(var t=this,e=t.dosage[t.dosage.length-1].value,a=t.dosage[t.dosage.length-1].unit,n=t.dosage[t.dosage.length-1].time,i=0;i<t.frequency;i+=1)t.dosage[i]||(t.dosage[i]={value:e,unit:a,time:n});t.$nextTick((function(){t.createPickers()}))}},mounted:function(){var t,e=this;e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-start"),value:[e.startDate],minDate:new Date,on:{change:function(a,n){e.startDate=new Date(n[0]),e.startDate.setHours(0,0,0,0),t&&(t.params.minDate=e.startDate,new Date(t.value[0]).getTime()<new Date(e.startDate).getTime()&&t.setValue([e.startDate]))}}}),t=e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-end"),value:[e.endDate],on:{change:function(t,a){e.endDate=new Date(a[0]),e.endDate.setHours(0,0,0,0)}}}),e.createPickers()},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_add.").concat(t),e)},createPickers:function(){var t=this;t.$$(t.$el).find(".vitals-medication_reminder-dosage-input .time-input").each((function(e,a){a.f7PickerCreated||(a.f7PickerCreated=!0,t.$f7.picker.create({inputEl:a,value:[t.dosage[e].time.split(":")[0],t.dosage[e].time.split(":")[1]],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(a,n){t.dosage[e].time=n.join(":")}}}))}))},save:function(){var t=this,e=t.name,a=t.startDate,n=t.endDate,i=t.dosage,s=t.frequency;ae(t.$root.user,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(n).toJSON(),dosage:i.filter((function(t,e){return e<s})),frequency:s,reminder:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},oe,[],!1,null,null,null);function ve(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),t.loaded?a("div",{staticClass:"medication-toolbar",attrs:{slot:"fixed"},slot:"fixed"},[a("a",{attrs:{href:"#"},on:{click:t.deleteMedication}},[t._v(t._s(t.t("delete_button")))]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(){return t.reminder?t.stopReminder():t.startReminder()}}},[t._v(t._s(t.t(t.reminder?"pause_button":"start_button")))])]):t._e(),t._v(" "),t.loaded?a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.t("vital_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-start",label:t.t("startdate_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-end",label:t.t("enddate_label")}}),t._v(" "),a("f7-list-item",{attrs:{"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0},title:t.t("frequency_label"),after:t.t("frequency_units.0")}},[a("select",{domProps:{value:t.frequency},on:{change:function(e){t.frequency=parseInt(e.target.value,10)}}},t._l(8,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(t.t("frequency_units."+(e-1))))])})),0)]),t._v(" "),t._l(t.frequency,(function(e){return a("f7-list-item",{key:e,staticClass:"vitals-medication_reminder-dosage-input"},[a("div",{staticClass:"input"},[a("input",{staticClass:"time-input",attrs:{type:"text"},domProps:{value:t.dosage[e-1].time}})]),t._v(" "),a("div",{staticClass:"input",staticStyle:{width:"100px"}},[a("input",{attrs:{type:"number",placeholder:t.t("dosage_label")},domProps:{value:t.dosage[e-1].value},on:{input:function(a){t.dosage[e-1].value=a.target.value}}})]),t._v(" "),a("div",{staticClass:"input input-dropdown"},[a("select",{domProps:{value:t.dosage[e-1].unit||"bag"},on:{change:function(a){t.dosage[e-1].unit=a.target.value}}},[a("option",{attrs:{value:"bag"}},[t._v(t._s(t.t("dosage_unit.bag")))]),t._v(" "),a("option",{attrs:{value:"ml"}},[t._v(t._s(t.t("dosage_unit.ml")))]),t._v(" "),a("option",{attrs:{value:"pill"}},[t._v(t._s(t.t("dosage_unit.pill")))]),t._v(" "),a("option",{attrs:{value:"mg"}},[t._v(t._s(t.t("dosage_unit.mg")))]),t._v(" "),a("option",{attrs:{value:"drop"}},[t._v(t._s(t.t("dosage_unit.drop")))])])])])}))],2):t._e()],1)}de.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/add.vue";var ue=de.exports;ve._withStripped=!0;var me=p({props:{id:String,vitalsElement:String},data:function(){var t=new Date;return t.setHours(0,0,0,0),{loaded:!1,name:"",frequency:1,startDate:t,endDate:new Date(t.getTime()+864e6),reminder:!0,dosage:[{value:"",unit:"bag",time:"10:00"}]}},computed:{allowSave:function(){if(this.name&&this.name.trim().length){var t=!0;if(this.dosage.forEach((function(e){(!e.value||e.value<1)&&(t=!1)})),t)return!0}return!1}},watch:{frequency:function(){for(var t=this,e=t.dosage[t.dosage.length-1].value,a=t.dosage[t.dosage.length-1].unit,n=t.dosage[t.dosage.length-1].time,i=0;i<t.frequency;i+=1)t.dosage[i]||(t.dosage[i]={value:e,unit:a,time:n});t.$nextTick((function(){t.createPickers()}))}},mounted:function(){var t,e=this;te(e.$root.user,e.id).then((function(a){e.name=a.data.name,e.frequency=a.data.frequency,e.startDate=a.data.startDate,e.endDate=a.data.endDate,e.dosage=a.data.dosage,e.reminder=a.data.reminder,e.loaded=!0,e.$nextTick((function(){e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-start"),value:[e.startDate],minDate:new Date,on:{change:function(a,n){e.startDate=new Date(n[0]),e.startDate.setHours(0,0,0,0),t&&(t.params.minDate=e.startDate,new Date(t.value[0]).getTime()<new Date(e.startDate).getTime()&&t.setValue([e.startDate]))}}}),t=e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-end"),value:[e.endDate],on:{change:function(t,a){e.endDate=new Date(a[0]),e.endDate.setHours(0,0,0,0)}}}),e.createPickers()}))}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_edit.").concat(t),e)},createPickers:function(){var t=this;t.$$(t.$el).find(".vitals-medication_reminder-dosage-input .time-input").each((function(e,a){a.f7PickerCreated||(a.f7PickerCreated=!0,t.$f7.picker.create({inputEl:a,value:[t.dosage[e].time.split(":")[0],t.dosage[e].time.split(":")[1]],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(a,n){t.dosage[e].time=n.join(":")}}}))}))},deleteMedication:function(){var t=this;ie(t.$root.user,t.id).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},stopReminder:function(){var t=this,e=t.name,a=t.startDate,n=t.endDate,i=t.dosage,s=t.frequency;ne(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(n).toJSON(),dosage:i,frequency:s,reminder:!1}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},startReminder:function(){var t=this,e=t.name,a=t.startDate,n=t.endDate,i=t.dosage,s=t.frequency;ne(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(n).toJSON(),dosage:i,frequency:s,reminder:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},save:function(){var t=this,e=t.name,a=t.startDate,n=t.endDate,i=t.dosage,s=t.frequency,l=t.reminder;void 0===l&&(l=!0),ne(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(n).toJSON(),dosage:i,frequency:s,reminder:l}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},ve,[],!1,null,null,null);function he(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)}me.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/edit.vue";var _e=me.exports,fe={receiveMessage:!(he._withStripped=!0)},pe=p({props:{vitalsElement:String},data:function(){return{settings:fe}},mounted:function(){var t=this;se(t.vitalsElement).then((function(e){e&&(t.settings=e,fe=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,fe=this.settings,le(this.vitalsElement,this.settings)}}},he,[],!1,null,null,null);function ge(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{staticClass:"medication-history-header"},[t.data&&t.takenData?[a("div",{staticClass:"medication-history-header-icon",class:{"not-taken":!t.isLastDayTaken}}),t._v(" "),a("div",{staticClass:"medication-history-header-text"},[t._v(t._s(t.isLastDayTaken?t.t("notice_text.0"):t.t("notice_text.1")))])]:t._e()],2),t._v(" "),t._l(t.orderedData,(function(e,n){return a("div",{key:n,staticClass:"medication-history-card",on:{click:function(e){return t.toggleCard(n)}}},[a("div",{staticClass:"medication-history-card-date"},[a("span",[t._v(t._s(t.$moment(n).format("DD MMM YYYY")))]),t._v(" "),t.isOpenedCard(n)?a("span",[t._v(t._s(t.percentageTaken(e,n))+"%")]):t._e(),t._v(" "),a("f7-icon",{attrs:{f7:t.isOpenedCard(n)?"chevron_up":"chevron_right",size:"16"}})],1),t._v(" "),t.isOpenedCard(n)?t._l(e,(function(e,i){return a("div",{key:i,staticClass:"medication-history-card-content"},[a("div",{staticClass:"medication-history-card-icon",class:{taken:t.isTaken(e,n),"not-taken":t.isNotTaken(e,n)}}),t._v(" "),a("div",{staticClass:"medication-history-card-title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"medication-history-card-value"},[t._v(t._s(e.time))])])})):a("div",{staticClass:"medication-history-card-content"},[100===t.percentageTaken(e,n)?a("div",{staticClass:"medication-history-card-icon taken"}):a("f7-gauge",{attrs:{size:46,value:t.percentageTaken(e,n)/100,"border-bg-color":"#FAE1C9","border-color":"#FF4500","border-width":8}}),t._v(" "),a("div",{staticClass:"medication-history-card-title"},[t._v(t._s(t.t("dosage_status")))]),t._v(" "),a("div",{staticClass:"medication-history-card-value"},[t._v(t._s(t.percentageTaken(e,n))+"%")])],1)],2)}))],2)}pe.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/settings.vue";var be=pe.exports;function ye(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}ge._withStripped=!0;var De=p({props:{vitalsElement:String},data:function(){return{data:null,takenData:null,openedCards:[]}},mounted:function(){this.getData()},computed:{isLastDateTaken:function(){var t=this,e=t.$moment().format("YYYY-MM-DD");return!t.orderedData||!t.orderedData[e]||100===t.percentageTaken(t.orderedData[e])},orderedData:function(){var t=this;if(t.data){var e={};t.data.forEach((function(a){var n=new Date(a.data.startDate);if(!(n.getTime()>(new Date).getTime())){var i=new Date(a.data.endDate);i.getTime()>(new Date).getTime()&&(i=new Date).setHours(0,0,0,0);for(var s=(i.getTime()-n.getTime())/864e5+1,l=0;l<s;l+=1){var r,o=new Date(n).getTime()+864e5*l,c=t.$moment(o).format("YYYY-MM-DD");e[c]||(e[c]=[]),(r=e[c]).push.apply(r,ye(a.data.dosage.map((function(t){return{id:a.id,name:a.data.name,time:t.time}}))))}}})),Object.keys(e).forEach((function(t){e[t].sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1}))}));var a=Object.keys(e).sort((function(t,e){var a=new Date(t).getTime();return new Date(e).getTime()<a?-1:1})),n={};return a.forEach((function(t){n[t]=e[t]})),n}}},methods:{isOpenedCard:function(t){return 0<=this.openedCards.indexOf(t)},toggleCard:function(t){0<=this.openedCards.indexOf(t)?this.openedCards.splice(this.openedCards.indexOf(t),1):this.openedCards.push(t)},percentageTaken:function(t,e){var a=this,n=t.filter((function(t){return a.isTaken(t,e)}));return Math.round(n.length/t.length*100)},isTaken:function(t,e){var a;if(!this.takenData)return!1;var n=new Date(e);return n.setHours(0,0,0,0),this.takenData.forEach((function(e){if(!a){var i=new Date(e.data.date||e.start_at);i.setHours(0,0,0,0),t.id===e.data.medication_id&&t.time===e.data.time&&n.getTime()===i.getTime()&&e.data.taken&&(a=!0)}})),a},isNotTaken:function(t,e){var a;if(!this.takenData)return!1;var n=new Date(e);return n.setHours(0,0,0,0),this.takenData.forEach((function(e){if(!a){var i=new Date(e.data.date||e.start_at);i.setHours(0,0,0,0),t.id!==e.data.medication_id||t.time!==e.data.time||n.getTime()!==i.getTime()||e.data.taken||(a=!0)}})),a},getData:function(){var t=this;Promise.all([new Promise((function(e,a){ee(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))})),new Promise((function(e,a){Zt(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))}))]).then((function(e){var a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e,2),n=a[0],i=a[1];t.takenData=i,t.data=n})).catch((function(t){console.log(t)}))},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)}}},ge,[],!1,null,null,null);function Ee(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-plan-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),t._l(t.medications,(function(e){return a("a",{key:e.id,staticClass:"medication-card",attrs:{href:"/health_vitals/"+t.vitalsElement+"/edit/"+e.id+"/"}},[a("div",{staticClass:"medication-card-date"},[t._v(t._s(t.$moment(e.data.startDate).format("D MMM YYYY"))+" - "+t._s(t.$moment(e.data.endDate).format("D MMM YYYY")))]),t._v(" "),a("div",{staticClass:"medication-card-content"},[a("div",{staticClass:"medication-card-icon"}),t._v(" "),a("div",{staticClass:"medication-card-name"},[t._v(t._s(e.data.name))])])])}))],2)}De.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/history.vue";var we=De.exports;Ee._withStripped=!0;var ke=p({props:{vitalsElement:String},data:function(){return{medications:null}},mounted:function(){this.getMedications(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getMedications)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getMedications)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_plan.").concat(t),e)},getMedications:function(){var t=this;ee(t.$root.user).then((function(e){t.medications=e}))}}},Ee,[],!1,null,null,null);ke.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/plan.vue";var $e=[{path:"/health_vitals/medication_reminder/",component:ce},{path:"/health_vitals/medication_reminder/plan/",component:ke.exports},{path:"/health_vitals/medication_reminder/add/",component:ue},{path:"/health_vitals/medication_reminder/edit/:id/",component:_e},{path:"/health_vitals/medication_reminder/settings/",component:be},{path:"/health_vitals/medication_reminder/history/",component:we}];$e.forEach((function(t){t.options={props:{vitalsElement:"medication_reminder"}}}));var xe=$e,Ce=[{path:"/health_vitals/pedometer/",component:j},{path:"/health_vitals/pedometer/add/",component:N},{path:"/health_vitals/pedometer/settings/",component:R},{path:"/health_vitals/pedometer/history/",component:W}];Ce.forEach((function(t){t.options={props:{vitalsElement:"pedometer",chartType:"column",chartColor:"#1498CE",chartWeekSumsDays:!0,chartMonthSumsDays:!0}}}));var Se=Ce,Oe=[{path:"/health_vitals/temperature/",component:j},{path:"/health_vitals/temperature/add/",component:N},{path:"/health_vitals/temperature/settings/",component:R},{path:"/health_vitals/temperature/history/",component:W}];function Te(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":"","route-props":{goalValue:t.settings?t.settings.goal_value:0}}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[t.settings&&t.settings.goal_value?a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-row"},[a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-label"},[t._v(t._s(t.t("goal_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.settings.goal_value)),a("span",[t._v(t._s(t.t("vital_unit."+(t.settings.goal_unit||5))))])])]):t._e(),t._v(" "),a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-row"},[a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-label"},[t._v(t._s(t.t("achieved_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.todayValue)),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit||5))))])])])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,n){return a("div",{key:n,class:"vitals-element-card vitals-"+t.vitalsElement+"-card"},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-icon vitals-"+t.vitalsElement+"-card-icon"},[e.data.value<200?a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-cup.svg"}}):e.data.value<350?a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-glass.svg"}}):a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"}})]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value)+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit||0))))])])])])})),0):t._e()],1)}Oe.forEach((function(t){t.options={props:{vitalsElement:"temperature"}}}));var Me=Oe;Te._withStripped=!0;var je=window.tommy.api,Ye=function(t,e,a){var n,s=2<arguments.length&&void 0!==a?a:{},l=s.page,r=s.limit,o=s.dateFrom,c=s.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),o&&c&&(n=[new Date(o).toJSON(),new Date(c).toJSON()]),je.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:i.id||e.id,actor_id:i.id,actor_type:i.id?"User":void 0,page:l||1,limit:r||50,date_range:n},{cache:!1})},Ie=function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var n=new Date(a.date);n.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=i.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:n.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:i.id||e.id}],data:JSON.stringify(a)};return i.id&&(l.actor_id=i.id,l.actor_type="User"),je.createFragment(l)},Pe=function(t){return je.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},Ve=function(t,e){var a=1<arguments.length&&void 0!==e?e:{};return je.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(a)}})};function Ae(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,i=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(n=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);n=!0);}catch(t){i=!0,s=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw s}}return a}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ne=p({props:{vitalsElement:String},data:function(){return{data:null,settings:null}},mounted:function(){var t=this;t.getData(),t.$events.$on("".concat(t.vitalsElement,":updateRecords"),t.getData),Pe(t.vitalsElement).then((function(e){e&&(t.settings=e)}))},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{todayValue:function(){if(!this.data)return null;var t=0,e=new Date;return e.setHours(0,0,0,0),this.data.forEach((function(a){new Date(a.data.date).getTime()===e.getTime()&&(t+=a.data.value)})),t}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;Ye(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),n=Ae(t.data.time.split(":"),2),i=n[0],s=n[1];a.setHours(parseInt(i,10),parseInt(s,10));var l=new Date(e.data.date),r=Ae(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this,a=e.$$(t.target).closest(".page-content");a.length&&(100<a[0].scrollTop?e.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")):e.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(e.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},Te,[],!1,null,null,null);function Fe(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-list",{attrs:{"no-chevron":"","no-hairlines":"","no-hairlines-between":""}},[a("f7-list-item",{attrs:{link:"",title:""+t.t("option_a_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(150)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-cup.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_b_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(220)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-glass.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_c_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(350)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_d_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(400)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{class:"vitals-"+t.vitalsElement+"-manual-add-custom-button",attrs:{link:"",title:""+t.t("custom_button")},on:{click:t.addCustom}})],1)],1)}Ne.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/index.vue";var Ue=Ne.exports;Fe._withStripped=!0;var He=p({props:{vitalsElement:String},data:function(){return{}},computed:{allowSave:function(){return this.value&&0<this.value}},mounted:function(){},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},addCustom:function(){var t=this;t.$f7.dialog.create({text:t.$t("health_vitals.water_tracker.custom_amount.text"),content:'<div class="dialog-input-field item-input"><div class="item-input-wrap"><input type="number" class="dialog-input"></div></div>',buttons:[{text:t.$t("health_vitals.water_tracker.custom_amount.cancel_button"),keyCodes:[27]},{text:t.$t("health_vitals.water_tracker.custom_amount.confirm_button"),bold:!0,color:"red",keyCodes:[13]}],onClick:function(e,a){var n=e.$el.find(".dialog-input").val();1===a&&n&&t.addValue(parseFloat(n))},destroyOnClose:!0}).open()},addValue:function(t){var e=this,a=new Date,n=(new Date).getHours();n<10&&(n="0".concat(n));var i=(new Date).getMinutes();i<10&&(i="0".concat(i));var s="".concat(n,":").concat(i);a.setHours(0,0,0,0),Ie(e.vitalsElement,e.$root.user,{value:t,date:new Date(a).toJSON(),time:s,unit:5}).then((function(){e.$events.$emit("".concat(e.vitalsElement,":updateRecords")),e.$f7router.back()}))}}},Fe,[],!1,null,null,null);function Re(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1),t._v(" "),a("f7-list-item",{attrs:{title:t.t("plan_label"),link:"/vitals_water_tracker/plan/",after:t.settings.goal_value?""+t.settings.goal_value+t.t("vital_unit."+t.settings.goal_unit):"","route-props":{settings:t.settings}}})],1)],1)}He.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/add.vue";var Je=He.exports,qe={receiveMessage:!(Re._withStripped=!0),goal_value:0,goal_start_time:"08:00",goal_end_time:"22:00",goal_time_interval:60,goal_unit:5},Be=p({props:{vitalsElement:String},data:function(){return{settings:qe}},mounted:function(){var t=this;Pe(t.vitalsElement).then((function(e){e&&(t.settings=e,qe=t.settings)})),t.$events.$on("".concat(t.vitalsElement,":updateGoal"),t.updateGoal)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateGoal"),this.updateGoal)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},updateGoal:function(t){var e=this;e.settings.goal_value=t.value,e.settings.goal_start_time=t.start_time,e.settings.goal_end_time=t.end_time,e.settings.goal_time_interval=t.time_interval,e.settings.goal_unit=t.unit,qe=e.settings,Ve(e.vitalsElement,e.settings)},onMessagesChanges:function(t){this.settings.receiveMessage=t,qe=this.settings,Ve(this.vitalsElement,this.settings)}}},Re,[],!1,null,null,null);function Ge(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))])]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)}Be.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/settings.vue";var We=Be.exports;function ze(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Le(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(a),!0).forEach((function(e){Xe(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ze(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Xe(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Ge._withStripped=!0;var Ke=p({props:{vitalsElement:String,goalValue:Number},data:function(){return{data:null,clicked:null,range:"day"}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;Ye(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var n=t.itemDate(e),i=t.itemDate(a);return n.getTime()-i.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){return this.clicked?this.$moment(this.clicked.x).format("DD MMM YYYY"):""},clickedValue:function(){var t=this;if(!t.clicked)return"";var e=t.data[t.clicked.id];return"".concat(t.clicked.y," ").concat(t.t("vital_unit.".concat(e.data.unit)))},todayValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)},weekValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth(),e.getDate()-7);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)},monthValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth()-1,e.getDate());var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)}},methods:{sumValuesByDay:function(t){var e=this,a=[],n=e.itemDate(t[0]);n.setHours(0,0,0,0);var i=0;return t.forEach((function(t){var s=e.itemDate(t);s.setHours(0,0,0,0),s.getTime()!==n.getTime()&&(i+=1,n=s),a[i]||(a[i]={x:n,y:0,id:e.data.indexOf(t)}),a[i].y+=parseInt(t.data.value,10)})),a},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),n=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,n),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:"column"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:Le({title:null},t.goalValue?{plotLines:[{color:"#71A7E7",width:2,value:t.goalValue}]}:{}),time:{timezoneOffset:(new Date).getTimezoneOffset()}},n={color:"#71A7E7",cursor:"pointer",point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,Le({},a,{series:[Le({},n,{data:t.todayValues})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,Le({},a,{series:[Le({},n,{data:t.weekValues})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,Le({},a,{series:[Le({},n,{data:t.monthValues})]}))}}}},Ge,[],!1,null,null,null);function Qe(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-plan-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.value,min:"1",label:t.t("vital_label")},on:{input:function(e){t.updateGoalValue("value",parseFloat(e.target.value))}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("vital_unit."+t.unit)))])])],1),t._v(" "),a("f7-block-title",[t._v(t._s(t.t("reminder_label")))]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("start_label"),after:t.start_time,link:""},on:{click:function(e){t.openTimePicker("start_time",t.t("start_label"))}}}),t._v(" "),a("f7-list-item",{attrs:{title:t.t("end_label"),after:t.end_time,link:""},on:{click:function(e){t.openTimePicker("end_time",t.t("end_label"))}}}),t._v(" "),a("f7-list-item",{attrs:{title:t.t("interval_label"),after:t.formatTimeInterval(t.time_interval),link:""},on:{click:function(e){t.openTimePicker("time_interval",t.t("interval_label"))}}})],1)],1)}Ke.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/history.vue";var Ze=Ke.exports;Qe._withStripped=!0;var ta=p({props:{vitalsElement:String,settings:Object},data:function(){var t=this.settings;return{value:t.goal_value,start_time:t.goal_start_time,end_time:t.goal_end_time,time_interval:t.goal_time_interval,unit:t.goal_unit,allowSave:!1}},mounted:function(){},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".drinking_plan.").concat(t),e)},formatTimeInterval:function(t){var e=Math.floor(t/60),a=t-60*Math.floor(t/60);return e<10&&(e="0".concat(e)),a<10&&(a="0".concat(a)),"".concat(e,":").concat(a)},updateGoalValue:function(t,e){this[t]=e,this.allowSave=!0},openTimePicker:function(t,e){var a,n=this,i=n[t],s=!1;"number"==typeof i&&(s=!0,i=n.formatTimeInterval(i)),n.$f7.dialog.create({title:e,text:'<div class="vitals-water_tracker-dialog-time-picker"></div>',buttons:[{text:n.$t("label.ok"),bold:!0,color:"red",onClick:function(){var e="".concat(a.value[0],":").concat(a.value[1]);s&&(e=60*a.value[0]+parseInt(a.value[1],10)),n.updateGoalValue(t,e)}}],on:{open:function(){a=n.$f7.picker.create({toolbar:!1,value:[i.split(":")[0],i.split(":")[1]],containerEl:".vitals-water_tracker-dialog-time-picker",cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}]})},close:function(){a.destroy()}}}).open()},save:function(){var t=this;t.$events.$emit("".concat(t.vitalsElement,":updateGoal"),{value:t.value,start_time:t.start_time,end_time:t.end_time,time_interval:t.time_interval,unit:t.unit}),t.$f7router.back()}}},Qe,[],!1,null,null,null);ta.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/plan.vue";var ea=[{path:"/health_vitals/water_tracker/",component:Ue},{path:"/health_vitals/water_tracker/add/",component:Je},{path:"/health_vitals/water_tracker/settings/",component:We},{path:"/health_vitals/water_tracker/history/",component:Ze},{path:"/health_vitals/water_tracker/plan/",component:ta.exports}];ea.forEach((function(t){t.options={props:{vitalsElement:"water_tracker"}}}));var aa=ea,na=[{path:"/health_vitals/weight/",component:j},{path:"/health_vitals/weight/add/",component:N},{path:"/health_vitals/weight/settings/",component:R},{path:"/health_vitals/weight/history/",component:W}];na.forEach((function(t){t.options={props:{vitalsElement:"weight"}}}));var ia=na;function sa(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var la=[{path:"/health_vitals/",component:y},{path:"/health_vitals/panel/",panel:{component:w}}].concat(sa(X),sa(gt),sa(yt),sa(wt),sa(Xt),sa(xe),sa(Se),sa(Me),sa(aa),sa(ia));e.default=la}]).default;