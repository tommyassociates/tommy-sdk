var addon=function(t){var e={};function a(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,a),n.l=!0,n.exports}return a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=1)}([,function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{attrs:{id:"health_vitals__index"}},[a("f7-navbar",[a("tommy-nav-menu"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title","Health Vitals")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/panel/","icon-only":""}},[a("i",{staticClass:"icon health-vitals-icon-settings"})])],1)],1),t._v(" "),a("div",{staticClass:"health-vitals-cards"},[t.user?a("div",{staticClass:"health-vitals-card health-vitals-user-card"},[t.user?a("tommy-circle-avatar",{attrs:{data:t.user}}):t._e(),t._v(" "),a("div",{staticClass:"health-vitals-user-card-content"},[a("div",{staticClass:"name"},[t._v(t._s(t.user.name||(t.user.first_name||"")+" "+(t.user.last_name||"")))]),t._v(" "),a("div",{staticClass:"props"},[t.userAge?a("div",{staticClass:"prop"},[a("div",{staticClass:"prop-label"},[t._v(t._s(t.t("profile_age_label")))]),t._v(" "),a("div",{staticClass:"prop-value"},[t._v(t._s(t.userAge))])]):t._e()])])],1):t._e(),t._v(" "),t.blood_glucose?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/blood_glucose/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.2")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.blood_glucose.date).format("DD MMM YYYY"))+" "+t._s(t.blood_glucose.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"blood-glucose-icon-"+t.blood_glucose.state+".svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.blood_glucose.value)+" "),a("sub",[t._v(t._s(t.t("blood_glucose_units")))])])])])]):t._e(),t._v(" "),t.water_tracker||!1===t.water_tracker?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/water_tracker/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.4")))]),t._v(" "),t.water_tracker?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.water_tracker.date).format("DD MMM YYYY"))+" "+t._s(t.water_tracker.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[t.water_tracker.value<200?a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-cup.svg"}}):t.water_tracker.value<350?a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-glass.svg"}}):a("img",{attrs:{src:t.$addonAssetsUrl+"water-tracker-icon-bottle.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.water_tracker.value)+" "),a("sub",[t._v(t._s(t.t("water_units.5")))])])])]):t._e(),t._v(" "),!1===t.water_tracker?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.medication_reminder?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/medication_reminder/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.0")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.medication_reminder.date).format("DD MMM YYYY")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[100===t.medication_reminder.takenPercentage?a("img",{attrs:{src:t.$addonAssetsUrl+"icon-check.svg"}}):a("f7-gauge",{attrs:{size:46,value:t.medication_reminder.takenPercentage/100,"border-bg-color":"#FAE1C9","border-color":"#FF4500","border-width":8}})],1),t._v(" "),a("span",{staticClass:"health-vitals-card-icon-text"},[t._v(t._s(t.t("taken","Taken")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.medication_reminder.takenPercentage)+"%")])])])]):t._e(),t._v(" "),t.temperature||!1===t.temperature?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/temperature/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.5")))]),t._v(" "),t.temperature?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.temperature.date).format("DD MMM YYYY"))+" "+t._s(t.temperature.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"temperature-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.temperature.value)+" "),a("sub",[t._v(t._s(t.t("body_temperature_units.0")))])])])]):t._e(),t._v(" "),!1===t.temperature?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.pedometer?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/pedometer/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.6")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.pedometer.date).format("DD MMM YYYY"))+" "+t._s(t.pedometer.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"pedometer-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.pedometer.value)+" "),a("sub",[t._v(t._s(t.t("pedometer_units")))])])])])]):t._e(),t._v(" "),t.height||!1===t.height?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/height/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.7")))]),t._v(" "),t.height?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.height.date).format("DD MMM YYYY"))+" "+t._s(t.height.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"height-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.height.value)+" "),a("sub",[t._v(t._s(t.t("height_units.0")))])])])]):t._e(),t._v(" "),!1===t.height?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.heart_rate?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/heart_rate/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.3")))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.heart_rate.date).format("DD MMM YYYY"))+" "+t._s(t.heart_rate.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"heart-rate-icon-"+t.heart_rate.state+".svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.heart_rate.value)+" "),a("sub",[t._v(t._s(t.t("heart_rate_units")))])])])])]):t._e(),t._v(" "),t.blood_pressure||!1===t.blood_pressure?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/blood_pressure/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.1")))]),t._v(" "),t.blood_pressure?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.blood_pressure.date).format("DD MMM YYYY"))+" "+t._s(t.blood_pressure.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.blood_pressure.value[0])+"/"+t._s(t.blood_pressure.value[1]))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[a("sub",[t._v(t._s(t.t("blood_pressure_units")))])])])]):t._e(),t._v(" "),!1===t.blood_pressure?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e(),t._v(" "),t.weight||!1===t.weight?a("a",{staticClass:"health-vitals-card",attrs:{href:"/health_vitals/weight/"}},[a("div",{staticClass:"health-vitals-card-title"},[t._v(t._s(t.t("vital_types.8")))]),t._v(" "),t.weight?a("div",{staticClass:"health-vitals-subcard"},[a("div",{staticClass:"health-vitals-subcard-title"},[t._v(t._s(t.$moment(t.weight.date).format("DD MMM YYYY"))+" "+t._s(t.weight.time))]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-content"},[a("div",{staticClass:"health-vitals-card-icon"},[a("img",{attrs:{src:t.$addonAssetsUrl+"weight-icon.svg"}})]),t._v(" "),a("div",{staticClass:"health-vitals-subcard-value"},[t._v(t._s(t.weight.value)+" "),a("sub",[t._v(t._s(t.t("weight_units.0")))])])])]):t._e(),t._v(" "),!1===t.weight?a("div",{staticClass:"health-vitals-subcard health-vitals-subcard-empty"},[t._v(t._s(t.t("no_data")))]):t._e()]):t._e()])],1)};i._withStripped=!0;var n={id:void 0,user:void 0};function s(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=window.tommy.api,o={getWaterTracker:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsWaterTrackerItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getTemperature:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsTemperatureItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getPedometer:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsPedometerItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getHeight:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsHeightItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getWeight:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsWeightItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getHeartRate:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsHeartRateItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getBloodPressure:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsBloodPressureItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getBloodGlucose:function(t){return r.getFragments({addon:"health_vitals",kind:"VitalsBloodGlucoseItem",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:1,limit:1,per:1},{cache:!1})},getMedicationReminder:function(t){return new Promise((function(e,a){var i=r.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1}),o=r.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1});Promise.all([i,o]).then((function(t){var i=l(t,2),n=i[0],r=i[1],o={};n.forEach((function(t){var e=new Date(t.data.startDate);if(!(e.getTime()>(new Date).getTime())){var a=new Date(t.data.endDate);a.getTime()>(new Date).getTime()&&(a=new Date).setHours(0,0,0,0);for(var i=(a.getTime()-e.getTime())/864e5+1,n=0;n<i;n+=1){var l,r=new Date(e).getTime()+864e5*n,c=new Date(r).toJSON();o[c]||(o[c]=[]),(l=o[c]).push.apply(l,s(t.data.dosage.map((function(e){return{id:t.id,name:t.data.name,time:e.time}}))))}}})),Object.keys(o).forEach((function(t){o[t].sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1}))}));var c=Object.keys(o).sort((function(t,e){return new Date(t).getTime()<new Date(e).getTime()?-1:1})),d=c[c.length-1];if(d){var v=o[d],u=v.filter((function(t){var e,a=new Date(d);return a.setHours(0,0,0,0),r.forEach((function(i){if(!e){var n=new Date(i.data.date||i.start_at);n.setHours(0,0,0,0),t.id===i.data.medication_id&&t.time===i.data.time&&a.getTime()===n.getTime()&&i.data.taken&&(e=!0)}})),e}));e({date:new Date(d),takenPercentage:Math.round(u.length/v.length*100)})}else a()}))}))}},c={water_tracker:null,temperature:null,pedometer:null,height:null,weight:null,heart_rate:null,blood_pressure:null,blood_glucose:null,medication_reminder:null};function d(t,e,a,i,n,s,l,r){var o,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),l?(o=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(l)},c._ssrRegister=o):n&&(o=r?function(){n.call(this,this.$root.$options.shadowRoot)}:n),o)if(c.functional){c._injectStyles=o;var d=c.render;c.render=function(t,e){return o.call(e),d(t,e)}}else{var v=c.beforeCreate;c.beforeCreate=v?[].concat(v,o):[o]}return{exports:t,options:c}}var v=d({data:function(){return{actorId:this.$f7route.query.actor_id,user:null,water_tracker:c.water_tracker,temperature:c.temperature,pedometer:c.pedometer,height:c.height,weight:c.weight,heart_rate:c.heart_rate,blood_pressure:c.blood_pressure,blood_glucose:c.blood_glucose,medication_reminder:c.medication_reminder}},mounted:function(){var t=this;t.actorId?(n.id=parseInt(t.actorId,10),t.$api.getContact(t.actorId).then((function(e){t.user=e,n.user=e,t.getData()})).catch((function(){t.getData()}))):(t.user=t.$root.user,delete n.id,delete n.user,t.getData())},computed:{userAge:function(){if(this.user){var t=this.user.dob;if(t){var e=this.$moment(new Date(t));return this.$moment(new Date).diff(e,"years")}}}},methods:{t:function(t,e){return this.$t("health_vitals.index.".concat(t),e)},getData:function(){var t=this;o.getWaterTracker(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.water_tracker=!1,void(c.water_tracker=!1);t.water_tracker=e[0].data,c.water_tracker=t.water_tracker})),o.getTemperature(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.temperature=!1,void(c.temperature=!1);t.temperature=e[0].data,c.temperature=t.temperature})),o.getPedometer(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.pedometer=!1,void(c.pedometer=!1);t.pedometer=e[0].data,c.pedometer=t.pedometer})),o.getHeight(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.height=!1,void(c.height=!1);t.height=e[0].data,c.height=t.height})),o.getWeight(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.weight=!1,void(c.weight=!1);t.weight=e[0].data,c.weight=t.weight})),o.getHeartRate(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.heart_rate=!1,void(c.heart_rate=!1);t.heart_rate=e[0].data,c.heart_rate=t.heart_rate})),o.getBloodPressure(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.blood_pressure=!1,void(c.blood_pressure=!1);t.blood_pressure=e[0].data,c.blood_pressure=t.blood_pressure})),o.getBloodGlucose(t.$root.user).then((function(e){if(!e||!e.length||!e[0].data)return t.blood_glucose=!1,void(c.blood_glucose=!1);t.blood_glucose=e[0].data,c.blood_glucose=t.blood_glucose})),o.getMedicationReminder(t.$root.user).then((function(e){if(!e)return t.medication_reminder=!1,void(c.medication_reminder=!1);t.medication_reminder=e,c.medication_reminder=t.medication_reminder})).catch((function(){}))}}},i,[],!1,null,null,null);v.options.__file="addons/health_vitals/1.0.0/src/pages/index.vue";var u=v.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-panel",{staticClass:"health-vitals-panel",attrs:{right:"",cover:""}},[a("f7-view",{attrs:{init:!1}},[a("f7-page",[a("f7-navbar",[a("f7-nav-left",[a("f7-link",{attrs:{"panel-close":""}},[a("i",{staticClass:"material-icons md-36"},[t._v("keyboard_arrow_left")])])],1)],1),t._v(" "),a("f7-list",{staticClass:"health-vitals-panel-list",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:t.$t("health_vitals.blood_glucose.title"),link:"/health_vitals/blood_glucose/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"blood_glucose/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.blood_pressure.title"),link:"/health_vitals/blood_pressure/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"blood_pressure/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.heart_rate.title"),link:"/health_vitals/heart_rate/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"heart_rate/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.height.title"),link:"/health_vitals/height/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"height/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.temperature.title"),link:"/health_vitals/temperature/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"temperature/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.water_tracker.title"),link:"/health_vitals/water_tracker/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"water_tracker/icon.png"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{title:t.$t("health_vitals.weight.title"),link:"/health_vitals/weight/","panel-close":""}},[a("img",{attrs:{slot:"media",src:t.$addonAssetsUrl+"weight/icon.png"},slot:"media"})])],1)],1)],1)],1)};h._withStripped=!0;var m=d({},h,[],!1,null,null,null);m.options.__file="addons/health_vitals/1.0.0/src/pages/right-panel.vue";var _=m.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.data[0].data.value)),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit||0))))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.data[0].data.date).format("DD MMM YYYY"))+" "+t._s(t.data[0].data.time))])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,i){return a("div",{key:i,class:"vitals-element-card vitals-"+t.vitalsElement+"-card "+t.cardExtraClass(e)},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-icon vitals-"+t.vitalsElement+"-card-icon"},[t.cardCustomIconName(e)?a("img",{attrs:{src:t.$addonAssetsUrl+"/"+t.vitalsElement+"/"+t.cardCustomIconName(e)+".svg"}}):a("img",{attrs:{src:t.$addonAssetsUrl+"/"+t.vitalsElement+"/card-icon.svg"}})]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value)+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit||0))))])])])])})),0):t._e()],1)};f._withStripped=!0;var p=window.tommy.api,g={getRecords:function(t,e){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.page,l=i.limit,r=i.dateFrom,o=i.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),r&&o&&(a=[new Date(r).toJSON(),new Date(o).toJSON()]),p.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:n.id||e.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:s||1,limit:l||50,date_range:a},{cache:!1})},addRecord:function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var i=new Date(a.date);i.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=n.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:i.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],data:JSON.stringify(a)};return n.id&&(l.actor_id=n.id,l.actor_type="User"),p.createFragment(l)},getSettings:function(t){return p.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},saveSettings:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("saveSettingsVitals"),console.log(e),p.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(e)}})}};function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y=d({props:{vitalsElement:String,indexCardExtraClass:[String,Function],indexCardCustomIconName:[String,Function]},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},methods:{cardCustomIconName:function(t){return this.indexCardCustomIconName?"function"==typeof this.indexCardCustomIconName?this.indexCardCustomIconName(t):this.indexCardCustomIconName:""},cardExtraClass:function(t){return this.indexCardExtraClass?"function"==typeof this.indexCardExtraClass?this.indexCardExtraClass(t):this.indexCardExtraClass:""},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;g.getRecords(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),i=b(t.data.time.split(":"),2),n=i[0],s=i[1];a.setHours(parseInt(n,10),parseInt(s,10));var l=new Date(e.data.date),r=b(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this.$$(t.target).closest(".page-content");e.length&&(e[0].scrollTop>100?this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")):this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},f,[],!1,null,null,null);y.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/index.vue";var D=y.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.value,min:"1",label:t.t("vital_label")},on:{input:function(e){t.value=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("vital_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.t("date_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"time-input",label:t.t("time_label")}}),t._v(" "),t._l(t.manualAddExtraFields,(function(e,i){return["smartselect"===e.type?a("f7-list-item",{key:i,attrs:{title:e.label(t.$t),"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0}}},[a("select",{on:{change:function(a){return t.onExtraFieldChange(a,e)}}},t._l(e.values(t.$t),(function(e,i){return a("option",{key:i,domProps:{value:e.value}},[t._v(t._s(e.display))])})),0)]):t._e(),t._v(" "),"select"===e.type?a("f7-list-input",{key:i,attrs:{type:e.type,value:this[e.propName],label:e.label(t.$t),"input-style":e.inputStyle,"inline-label":""},on:{change:function(a){return t.onExtraFieldChange(a,e)}}},t._l(e.values(t.$t),(function(e,i){return a("option",{key:i,domProps:{value:e.value}},[t._v(t._s(e.display))])})),0):t._e()]}))],2)],1)};function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){$(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function $(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}E._withStripped=!0;var x=d({props:{vitalsElement:String,manualAddExtraFields:Array},data:function(){var t={};return this.manualAddExtraFields&&this.manualAddExtraFields.forEach((function(e){t[e.propName]=e.defaultValue})),w({value:"",date:"",time:""},t)},computed:{allowSave:function(){return this.value&&this.value>0}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[new Date],on:{change:function(e,a){t.date=new Date(a[0]),t.date.setHours(0,0,0,0)}}});var e=(new Date).getHours();e<10&&(e="0".concat(e));var a=(new Date).getMinutes();a<10&&(a="0".concat(a)),t.$f7.picker.create({inputEl:t.$el.querySelector("#time-input"),value:[e.toString(),a.toString()],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(e,a){t.time=a.join(":")}}})},methods:{onExtraFieldChange:function(t,e){this[e.propName]=t.target.value},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},save:function(){var t=this,e=t.value,a=t.date,i=t.time,n={};t.manualAddExtraFields&&t.manualAddExtraFields.forEach((function(e){n[e.propName]=t[e.propName]})),g.addRecord(t.vitalsElement,t.$root.user,w({value:e,date:new Date(a).toJSON(),time:i,unit:0},n)).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},E,[],!1,null,null,null);x.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/add.vue";var C=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)};S._withStripped=!0;var O={receiveMessage:!1},M=d({props:{vitalsElement:String},data:function(){return{settings:O}},mounted:function(){var t=this;g.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e,console.log("getSettingsVitals",e),O=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,O=this.settings,g.saveSettings(this.vitalsElement,this.settings)}}},S,[],!1,null,null,null);M.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/settings.vue";var T=M.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))]),t._v(" "),t.clickedExtra?a("span",{domProps:{innerHTML:t._s(t.clickedExtra)}}):t._e()]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)};function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function V(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(a),!0).forEach((function(e){P(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function P(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}j._withStripped=!0;var I=d({props:{vitalsElement:String,chartType:{type:String,default:"line"},chartColor:{type:String,default:"#5FA81A"},chartMarkerColor:String,chartClickedExtra:Function,chartWeekSumsDays:Boolean,chartMonthSumsDays:Boolean},data:function(){return{data:null,clicked:null,range:"day"}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;g.getRecords(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var i=t.itemDate(e),n=t.itemDate(a);return i.getTime()-n.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){return this.clicked?this.chartWeekSumsDays&&"week"===this.range?this.$moment(this.clicked.x).format("DD MMM YYYY"):this.chartMonthSumsDays&&"month"===this.range?this.$moment(this.clicked.x).format("DD MMM YYYY"):this.$moment(this.clicked.x).format("DD MMM YYYY HH:mm"):""},clickedValue:function(){if(!this.clicked)return"";var t=this.data[this.clicked.id];return"".concat(this.clicked.y," ").concat(this.t("vital_unit.".concat(t.data.unit)))},clickedExtra:function(){if(!this.clicked)return"";if(this.chartClickedExtra){var t=this.data[this.clicked.id];return this.chartClickedExtra(t,this.$t)}return""},todayValues:function(){var t=this;if(!t.data)return null;var e=new Date;return e.setHours(0,0,0,0),t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()})).map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))},weekValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth(),e.getDate()-7);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.chartWeekSumsDays?t.sumValuesByDay(a):a.map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))},monthValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth()-1,e.getDate());var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.chartWeekSumsDays?t.sumValuesByDay(a):a.map((function(e){var a=t.itemDate(e);return{y:parseInt(e.data.value,10),x:a,id:t.data.indexOf(e)}}))}},methods:{sumValuesByDay:function(t){var e=this,a=[],i=e.itemDate(t[0]);i.setHours(0,0,0,0);var n=0;return t.forEach((function(t){var s=e.itemDate(t);s.setHours(0,0,0,0),s.getTime()!==i.getTime()&&(n+=1,i=s),a[n]||(a[n]={x:i,y:0,id:e.data.indexOf(t)}),a[n].y+=parseInt(t.data.value,10)})),a},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),i=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,i),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:t.chartType||"line"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:null},time:{timezoneOffset:(new Date).getTimezoneOffset()},plotOptions:{line:{marker:{enabled:!0,fillColor:t.chartMarkerColor||t.chartColor}}}},i={color:t.chartColor,cursor:"pointer",point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,V({},a,{series:[V({},i,{data:t.todayValues})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,V({},a,{series:[V({},i,{data:t.weekValues})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,V({},a,{series:[V({},i,{data:t.monthValues})]}))}}}},j,[],!1,null,null,null);I.options.__file="addons/health_vitals/1.0.0/src/addons-common/pages/history.vue";var A=I.exports,N=[{path:"/health_vitals/blood_glucose/",component:D},{path:"/health_vitals/blood_glucose/add/",component:C},{path:"/health_vitals/blood_glucose/settings/",component:T},{path:"/health_vitals/blood_glucose/history/",component:A}];N.forEach((function(t){t.options={props:{vitalsElement:"blood_glucose",indexCardCustomIconName:function(t){return t&&t.data&&t.data.state?"card-icon-".concat(t.data.state):""},manualAddExtraFields:[{type:"smartselect",propName:"state",defaultValue:"none",label:function(t){return t("health_vitals.blood_glucose.manual_enter.vital_variants_label")},values:function(t){return[{value:"none",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.0")},{value:"beforemeal",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.1")},{value:"aftermeal",display:t("health_vitals.blood_glucose.manual_enter.vital_variants.2")}]}}],chartColor:"#FEBFB8",chartMarkerColor:"#FD7E70",chartClickedExtra:function(t,e){var a=t.data.state;return'\n          <span class="vitals-blood_glucose-chart-clicked-state-icon-'.concat(a,'"></span>\n          <span class="vitals-blood_glucose-chart-clicked-state-text">').concat(e("health_vitals.blood_glucose.history.vital_variants.".concat(["none","beforemeal","aftermeal"].indexOf(a))),"</span>\n        ").trim()}}}}));var F=N,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.data[0].data.value[0])+"/"+t._s(t.data[0].data.value[1])),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit[0]||0))))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.data[0].data.date).format("DD MMM YYYY"))+" "+t._s(t.data[0].data.time))])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,i){return a("div",{key:i,class:"vitals-element-card vitals-"+t.vitalsElement+"-card"},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value[0])+"/"+t._s(e.data.value[1])+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit[0]||0))))])]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value[2])+" "),a("sub",[t._v(t._s(t.t("bpm_unit."+(e.data.unit[2]||0))))])])])])})),0):t._e()],1)};R._withStripped=!0;var H=window.tommy.api,U={getRecords:function(t,e){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.page,l=i.limit,r=i.dateFrom,o=i.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),r&&o&&(a=[new Date(r).toJSON(),new Date(o).toJSON()]),H.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:n.id||e.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:s||1,limit:l||50,date_range:a},{cache:!1})},addRecord:function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var i=new Date(a.date);i.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=n.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:i.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],data:JSON.stringify(a)};return n.id&&(l.actor_id=n.id,l.actor_type="User"),H.createFragment(l)},getSettings:function(t){return H.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},saveSettings:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return H.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(e)}})}};function J(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var q=d({props:{vitalsElement:String,indexCardCustomIconName:[String,Function]},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;U.getRecords(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),i=J(t.data.time.split(":"),2),n=i[0],s=i[1];a.setHours(parseInt(n,10),parseInt(s,10));var l=new Date(e.data.date),r=J(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this.$$(t.target).closest(".page-content");e.length&&(e[0].scrollTop>100?this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")):this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},R,[],!1,null,null,null);q.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/index.vue";var B=q.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.sys,min:"1",label:t.t("sys_label")},on:{input:function(e){t.sys=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("sys_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.dia,min:"1",label:t.t("dia_label")},on:{input:function(e){t.dia=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("dia_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.bpm,min:"1",label:t.t("bpm_label")},on:{input:function(e){t.bpm=e.target.value}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("bpm_unit.0")))])]),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.t("date_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"time-input",label:t.t("time_label")}})],1)],1)};W._withStripped=!0;var G=d({props:{vitalsElement:String},data:function(){return{sys:"",dia:"",bpm:"",date:"",time:""}},computed:{allowSave:function(){return this.sys&&this.sys>0&&this.dia&&this.dia>0&&this.bpm&&this.bpm>0}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[new Date],on:{change:function(e,a){t.date=new Date(a[0]),t.date.setHours(0,0,0,0)}}});var e=(new Date).getHours();e<10&&(e="0".concat(e));var a=(new Date).getMinutes();a<10&&(a="0".concat(a)),t.$f7.picker.create({inputEl:t.$el.querySelector("#time-input"),value:[e.toString(),a.toString()],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(e,a){t.time=a.join(":")}}})},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},save:function(){var t=this,e=t.sys,a=t.dia,i=t.bpm,n=t.date,s=t.time;U.addRecord(t.vitalsElement,t.$root.user,{value:[e,a,i],date:new Date(n).toJSON(),time:s,unit:[0,0,0]}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},W,[],!1,null,null,null);G.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/add.vue";var z=G.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)};L._withStripped=!0;var X={receiveMessage:!1},K=d({props:{vitalsElement:String},data:function(){return{settings:X}},mounted:function(){var t=this;U.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e,X=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,X=this.settings,U.saveSettings(this.vitalsElement,this.settings)}}},L,[],!1,null,null,null);K.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/settings.vue";var Q=K.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))])]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)};function tt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(a),!0).forEach((function(e){at(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function at(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Z._withStripped=!0;var it=d({props:{vitalsElement:String},data:function(){return{data:null,clicked:null,range:"day",chartColors:["#5FA81A","#F5A623","#FF4500"]}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;U.getRecords(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var i=t.itemDate(e),n=t.itemDate(a);return i.getTime()-n.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){return this.clicked?this.chartWeekSumsDays&&"week"===this.range?this.$moment(this.clicked.x).format("DD MMM YYYY"):this.chartMonthSumsDays&&"month"===this.range?this.$moment(this.clicked.x).format("DD MMM YYYY"):this.$moment(this.clicked.x).format("DD MMM YYYY HH:mm"):""},clickedValue:function(){if(!this.clicked)return"";var t=this.data[this.clicked.id].data.value;return"".concat(t[0],"/").concat(t[1]," ").concat(this.t("vital_units.0")," ").concat(t[2]," ").concat(this.t("vital_units.2"))}},methods:{todayValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var i=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:i,id:e.data.indexOf(a)}}))},weekValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),a.setMonth(a.getMonth(),a.getDate()-7),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var i=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:i,id:e.data.indexOf(a)}}))},monthValues:function(t){var e=this;if(!e.data)return null;var a=new Date;return a.setHours(0,0,0,0),a.setMonth(a.getMonth()-1,a.getDate()),e.data.filter((function(t){return e.itemDate(t).getTime()>a.getTime()})).map((function(a){var i=e.itemDate(a);return{y:parseInt(a.data.value[t],10),x:i,id:e.data.indexOf(a)}}))},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),i=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,i),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:"line"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:{title:null},time:{timezoneOffset:(new Date).getTimezoneOffset()},plotOptions:{line:{marker:{enabled:!0}}}},i={cursor:"pointer",marker:{symbol:"circle"},point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,et({},a,{series:[et({},i,{color:t.chartColors[0],data:t.todayValues(0)}),et({},i,{color:t.chartColors[1],data:t.todayValues(1)}),et({},i,{color:t.chartColors[2],data:t.todayValues(2)})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,et({},a,{series:[et({},i,{color:t.chartColors[0],data:t.weekValues(0)}),et({},i,{color:t.chartColors[1],data:t.weekValues(1)}),et({},i,{color:t.chartColors[2],data:t.weekValues(2)})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,et({},a,{series:[et({},i,{color:t.chartColors[0],data:t.monthValues(0)}),et({},i,{color:t.chartColors[1],data:t.monthValues(1)}),et({},i,{color:t.chartColors[2],data:t.monthValues(2)})]}))}}}},Z,[],!1,null,null,null);it.options.__file="addons/health_vitals/1.0.0/src/addons/blood_pressure/pages/history.vue";var nt=[{path:"/health_vitals/blood_pressure/",component:B},{path:"/health_vitals/blood_pressure/add/",component:z},{path:"/health_vitals/blood_pressure/settings/",component:Q},{path:"/health_vitals/blood_pressure/history/",component:it.exports}];nt.forEach((function(t){t.options={props:{vitalsElement:"blood_pressure"}}}));var st=nt,lt=[{path:"/health_vitals/heart_rate/",component:D},{path:"/health_vitals/heart_rate/add/",component:C},{path:"/health_vitals/heart_rate/settings/",component:T},{path:"/health_vitals/heart_rate/history/",component:A}];lt.forEach((function(t){t.options={props:{vitalsElement:"heart_rate",indexCardCustomIconName:function(t){return t&&t.data&&t.data.state?"card-icon-".concat(t.data.state):""},manualAddExtraFields:[{type:"smartselect",propName:"state",defaultValue:"rest",label:function(t){return t("health_vitals.heart_rate.manual_enter.vital_variants_label")},values:function(t){return[{value:"rest",display:t("health_vitals.heart_rate.manual_enter.vital_variants.0")},{value:"walk",display:t("health_vitals.heart_rate.manual_enter.vital_variants.1")},{value:"run",display:t("health_vitals.heart_rate.manual_enter.vital_variants.2")}]}}],chartColor:"#FEBFB8",chartMarkerColor:"#FD7E70",chartClickedExtra:function(t,e){var a=t.data.state;return'\n          <span class="vitals-heart_rate-chart-clicked-state-icon-'.concat(a,'"></span>\n          <span class="vitals-heart_rate-chart-clicked-state-text">').concat(e("health_vitals.heart_rate.history.vital_variants.".concat(["rest","walk","run"].indexOf(a))),"</span>\n        ").trim()}}}}));var rt=lt,ot=[{path:"/health_vitals/height/",component:D},{path:"/health_vitals/height/add/",component:C},{path:"/health_vitals/height/settings/",component:T},{path:"/health_vitals/height/history/",component:A}];ot.forEach((function(t){t.options={props:{vitalsElement:"height"}}}));var ct=ot,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.closestVaccine?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.t("next_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.daysDiff(t.closestVaccine))),a("span",[t._v(t._s(t.t("days_label")))])]),t._v(" "),a("div",{class:"vitals-element-index-header-date vitals-"+t.vitalsElement+"-index-header-date"},[t._v(t._s(t.$moment(t.closestVaccine.data.scheduledDate||t.closestVaccine.data.sheduledDate).format("DD MMM YYYY"))+", "+t._s(t.closestVaccine.data.name))])]):t._e(),t._v(" "),t.data&&!t.closestVaccine?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)};dt._withStripped=!0;var vt=window.tommy.api,ut={getVaccine:function(t,e){return vt.getFragment(e,{addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1})},getVaccines:function(t){return vt.getFragments({addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1})},addVaccine:function(t,e){var a=n.user||t,i={addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,start_at:new Date(e.scheduledDate).toJSON(),tags:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:n.id||t.id}],filters:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:n.id||t.id}],data:JSON.stringify(e)};return n.id&&(i.actor_id=n.id,i.actor_type="User"),vt.createFragment(i)},updateVaccine:function(t,e,a){var i=n.user||t,s={addon:"health_vitals",kind:"VitalsImmunisationsVaccine",with_filters:!0,start_at:new Date(a.scheduledDate).toJSON(),tags:[{context:"members",name:i.name||"".concat(i.first_name||""," ").concat(i.last_name||""),user_id:n.id||t.id}],filters:[{context:"members",name:i.name||"".concat(i.first_name||""," ").concat(i.last_name||""),user_id:n.id||t.id}],data:JSON.stringify(a)};return n.id&&(s.actor_id=n.id,s.actor_type="User"),vt.updateFragment(e,s)},deleteVaccine:function(t,e){return vt.deleteFragment(e)},getSettings:function(t){return vt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},saveSettings:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return vt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(e)}})}};function ht(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var mt=d({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{closestVaccine:function(){if(!this.data)return null;var t,e=ht(this.data);e.sort((function(t,e){return new Date(t.data.scheduledDate||t.data.sheduledDate).getTime()<new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()?-1:1}));var a=(new Date).getTime();return e.forEach((function(e){t||new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()>a&&(t=e)})),t},orderedData:function(){return this.data?this.data.sort((function(t,e){return new Date(t.data.scheduledDate||t.data.sheduledDate).getTime()>new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},daysDiff:function(t){var e=(new Date).getTime(),a=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime();return Math.ceil((a-e)/1e3/60/60/25)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},checkReminders:function(){var t=this;t.data.forEach((function(e){t.isOverDue(e)&&t.$f7.dialog.create({text:'\n            <div class="text-align-center">\n              <img src="'.concat(t.$addonAssetsUrl).concat(t.vitalsElement,'/remind.svg" height="85"/>\n            </div>\n            <p class="text-align-center">').concat(t.$t("health_vitals.immunisations.due_alert.text"),"<br><b>").concat(e.data.name,"</b></p>\n          "),buttons:[{text:t.$t("health_vitals.immunisations.due_alert.confirm_button")}]}).open()}))},getData:function(){var t=this;ut.getVaccines(t.$root.user).then((function(e){t.data=e.filter((function(t){return!t.data.archived})),t.checkReminders()}))},onPageScroll:function(t){var e=this.$$(t.target).closest(".page-content");e.length&&(e[0].scrollTop>100?this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")):this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},dt,[],!1,null,null,null);mt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/index.vue";var _t=mt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.tAdd("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.tAdd("vaccine_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input",label:t.tAdd("date_label")}}),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("prevent_disease_title")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text",inputStyle:"text-align: left",value:t.prevent,placeholder:t.tDetails("prevent_disease_title")},on:{input:function(e){t.prevent=e.target.value}}}),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("precautions_title")}}),t._v(" "),a("f7-list-input",{attrs:{type:"textarea",resizable:"",inputStyle:"text-align: left",value:t.precautions,placeholder:t.tDetails("precautions_title")},on:{input:function(e){t.precautions=e.target.value}}})],1)],1)};ft._withStripped=!0;var pt=d({props:{vitalsElement:String},data:function(){return{name:"",prevent:"",precautions:"",scheduledDate:new Date}},computed:{allowSave:function(){return this.name&&this.name.length>0}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[t.scheduledDate],closeOnSelect:!0,on:{change:function(e,a){t.scheduledDate=new Date(a[0]),t.scheduledDate.setHours(0,0,0,0)}}})},methods:{tAdd:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".add_vaccine.").concat(t),e)},tDetails:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".immunisation_details.").concat(t),e)},save:function(){var t=this,e=t.name,a=t.scheduledDate,i=t.prevent,n=t.precautions;ut.addVaccine(t.$root.user,{name:e,scheduledDate:new Date(a).toJSON(),prevent:i,precautions:n}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},ft,[],!1,null,null,null);pt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/add.vue";var gt=pt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page vitals-"+t.vitalsElement+"-details-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.tDetails("title")))])],1),t._v(" "),a("f7-list",{staticClass:"no-margin",attrs:{"no-hairlines":""}},[a("f7-list-item",{attrs:{title:t.tDetails("vaccine_label"),after:t.name}}),t._v(" "),a("f7-list-item",{attrs:{title:t.tDetails("date_label"),after:t.$moment(t.scheduledDate).format("DD MMM, YYYY")}}),t._v(" "),a("f7-list-item",{attrs:{title:t.tDetails("status_label"),after:t.statusText()}}),t._v(" "),t.injected&&t.injectedDate?a("f7-list-item",{attrs:{title:t.tDetails("injection_date_label"),after:t.$moment(t.injectedDate).format("DD MMM, YYYY")}}):t._e(),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("prevent_disease_title")}}),t._v(" "),a("f7-list-item",[t._v(t._s(t.prevent))]),t._v(" "),a("f7-list-item",{attrs:{divider:"",title:t.tDetails("precautions_title")}}),t._v(" "),a("f7-list-item",[t._v(t._s(t.precautions))])],1),t._v(" "),t.archived?t._e():a("div",{staticClass:"immunisations-details-buttons"},[!t.injected&&t.isOverDue()?a("a",{staticClass:"immunisations-details-button-red",attrs:{href:"#"},on:{click:t.injectVaccine}},[t._v(t._s(t.tDetails("confirm_injection_button")))]):t._e(),t._v(" "),a("a",{attrs:{href:"#"},on:{click:t.archiveVaccine}},[t._v(t._s(t.tDetails("archive_button")))])]),t._v(" "),t.archived?a("div",{staticClass:"immunisations-details-buttons"},[a("a",{staticClass:"immunisations-details-button-red",attrs:{href:"#"},on:{click:t.deleteVaccine}},[t._v(t._s(t.$t("health_vitals.immunisations.archive.delete_button")))])]):t._e()],1)};bt._withStripped=!0;var yt=d({props:{vitalsElement:String,vaccine:Object},data:function(){var t=this.vaccine.data,e=t.name,a=t.prevent,i=t.precautions,n=t.scheduledDate,s=t.sheduledDate,l=t.injected,r=t.injectedDate,o=t.archived;return{id:this.vaccine.id,name:e,prevent:a,precautions:i,scheduledDate:n||s,injected:l,injectedDate:r,archived:o}},mounted:function(){var t=this;t.$f7.calendar.create({inputEl:t.$el.querySelector("#date-input"),value:[t.scheduledDate],closeOnSelect:!0,on:{change:function(e,a){t.scheduledDate=new Date(a[0]),t.scheduledDate.setHours(0,0,0,0)}}})},methods:{tAdd:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".add_vaccine.").concat(t),e)},tDetails:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".immunisation_details.").concat(t),e)},statusText:function(){return this.injected?this.tDetails("status_options.1"):this.isOverDue()?this.tDetails("status_options.0"):this.tDetails("status_options.2")},isOverDue:function(){if(this.injected)return!1;var t=new Date,e=new Date(this.scheduledDate||this.sheduledDate);return t.getTime()>=e.getTime()},archiveVaccine:function(){var t=this,e=t.name,a=t.prevent,i=t.precautions,n=t.scheduledDate,s=t.injected,l=t.injectedDate;t.$f7.dialog.confirm(t.$t("health_vitals.immunisations.archive_delete_confirm_prompt.text"),(function(){ut.updateVaccine(t.$root.user,t.id,{name:e,prevent:a,precautions:i,scheduledDate:n,injected:s,injectedDate:l,archived:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}))},deleteVaccine:function(){var t=this;t.$f7.dialog.confirm(t.$t("health_vitals.immunisations.archive_delete_confirm_prompt.text"),(function(){ut.deleteVaccine(t.$root.user,t.id).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}))},injectVaccine:function(){var t,e=this;var a=e.$f7.dialog.create({title:e.$t("health_vitals.immunisations.injection_confirm.date_label"),text:'<div class="immunisations-dialog-calendar"></div>',buttons:[{text:e.$t("health_vitals.immunisations.injection_confirm.cancel_button")},{text:e.$t("health_vitals.immunisations.injection_confirm.confirm_button"),bold:!0,onClick:function(){!function(){e.injected=!0,e.injectedDate=t.value[0];var a=e.name,i=e.prevent,n=e.precautions,s=e.scheduledDate,l=e.injected,r=e.injectedDate,o=e.archived;ut.updateVaccine(e.$root.user,e.id,{name:a,prevent:i,precautions:n,scheduledDate:s,injected:l,injectedDate:r.toJSON(),archived:o}).then((function(){e.$events.$emit("".concat(e.vitalsElement,":updateRecords")),e.$f7router.back()}))}()}}]});a.open(),t=e.$f7.calendar.create({containerEl:a.$el.find(".immunisations-dialog-calendar"),value:[new Date]})},save:function(){var t=this,e=t.name,a=t.scheduledDate,i=t.prevent,n=t.precautions;ut.addVaccine(t.$root.user,{name:e,scheduledDate:new Date(a).toJSON(),prevent:i,precautions:n}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},bt,[],!1,null,null,null);yt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/details.vue";var Dt=yt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1),t._v(" "),a("f7-list-item",{attrs:{link:"/vitals_immunisations/archive/",title:t.t("archive_label")}})],1)],1)};Et._withStripped=!0;var kt={receiveMessage:!1},wt=d({props:{vitalsElement:String},data:function(){return{settings:kt}},mounted:function(){var t=this;ut.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e,kt=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,kt=this.settings,ut.saveSettings(this.vitalsElement,this.settings)}}},Et,[],!1,null,null,null);wt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/settings.vue";var $t=wt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title","History")))])],1),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available","When you have previous records, they will show here.")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)};xt._withStripped=!0;var Ct=d({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{orderedData:function(){return this.data?this.data.sort((function(t,e){return new Date(t.data.scheduledDate||t.data.sheduledDate).getTime()>new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},getData:function(){var t=this;ut.getVaccines(t.$root.user).then((function(e){t.data=[],t.data=e.filter((function(t){var e=new Date(t.data.scheduledDate||t.data.sheduledDate).getTime(),a=(new Date).getTime();return!t.data.archived&&a>e}))}))}}},xt,[],!1,null,null,null);Ct.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/history.vue";var St=Ct.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-archive-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"})]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.orderedData,(function(e){return a("a",{key:e.id,staticClass:"immunisations-card",attrs:{href:"#"},on:{click:function(a){return t.$f7router.navigate("/health_vitals/immunisations/details/",{props:{vaccine:e}})}}},[a("div",{staticClass:"immunisations-card-icon",class:{injected:t.isInjected(e),overdue:t.isOverDue(e)}}),t._v(" "),a("div",{staticClass:"immunisations-card-content"},[a("div",{staticClass:"immunisations-card-name"},[t._v(t._s(e.data.name))]),t._v(" "),a("div",{staticClass:"immunisations-card-date"},[t._v(t._s(t.$moment(e.data.scheduledDate||e.data.sheduledDate).format("DD MMM, YYYY")))])]),t._v(" "),a("f7-icon",{attrs:{f7:"chevron_right"}})],1)})),0):t._e()],1)};Ot._withStripped=!0;var Mt=d({props:{vitalsElement:String},data:function(){return{data:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{orderedData:function(){return this.data?this.data.sort((function(t,e){return new Date(t.data.scheduledDate||t.data.sheduledDate).getTime()>new Date(e.data.scheduledDate||e.data.sheduledDate).getTime()?-1:1})):null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".archive.").concat(t),e)},isOverDue:function(t){if(this.isInjected(t))return!1;var e=new Date,a=new Date(t.data.scheduledDate||t.data.sheduledDate);return e.getTime()>=a.getTime()},isInjected:function(t){return t.data.injected},getData:function(){var t=this;ut.getVaccines(t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data.archived}))}))}}},Ot,[],!1,null,null,null);Mt.options.__file="addons/health_vitals/1.0.0/src/addons/immunisations/pages/archive.vue";var Tt=[{path:"/health_vitals/immunisations/",component:_t},{path:"/health_vitals/immunisations/add/",component:gt},{path:"/health_vitals/immunisations/details/",component:Dt},{path:"/health_vitals/immunisations/settings/",component:$t},{path:"/health_vitals/immunisations/history/",component:St},{path:"/health_vitals/immunisations/archive/",component:Mt.exports}];Tt.forEach((function(t){t.options={props:{vitalsElement:"immunisations"}}}));var jt=Tt,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":"","route-props":{goalValue:t.settings?t.settings.goal_value:0}}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/plan/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{staticClass:"vitals-medicaton_reminder-header-date"},[a("span",{staticClass:"month"},[t._v(t._s(t.$moment().format("MMMM")))]),t._v(" "),a("span",{staticClass:"day"},[t._v(t._s(t.$moment().format("D")))])])]),t._v(" "),t.data&&!t.todayData?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.todayData?a("div",{staticClass:"medication-index-cards"},t._l(t.todayData,(function(e,i){return a("div",{key:i,staticClass:"medication-index-card"},[a("div",{staticClass:"medication-index-card-icon",class:{taken:t.isTaken(e),"not-taken":t.isNotTaken(e),"need-to-take":t.isNeedToTake(e)}}),t._v(" "),a("div",{staticClass:"medication-index-card-content"},[a("div",{staticClass:"medication-index-card-name"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"medication-index-card-dosage"},[t._v(t._s(e.value)+" "+t._s(t.t("dosage_unit."+e.unit)))])]),t._v(" "),a("div",{staticClass:"medication-index-card-time"},[t._v(t._s(e.time))])])})),0):t._e()],1)};Yt._withStripped=!0;var Vt=window.tommy.api,Pt={takeMedication:function(t,e,a,i){var s=(new Date).toJSON(),l=n.user||t,r={addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,start_at:s,tags:[{context:"members",name:l.name||"".concat(l.first_name||""," ").concat(l.last_name||""),user_id:t.id}],filters:[{context:"members",name:l.name||"".concat(l.first_name||""," ").concat(l.last_name||""),user_id:n.id||t.id}],data:JSON.stringify({medication_id:e,taken:i,time:a,date:s})};return n.id&&(r.actor_id=n.id,r.actor_type="User"),Vt.createFragment(r)},getTaken:function(t){var e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.dateFrom,s=a.dateTo;return i&&s&&(e=[new Date(i).toJSON(),new Date(s).toJSON()]),Vt.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderTaken",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0,date_range:e},{cache:!1})},getMedication:function(t,e){return Vt.getFragment(e,{addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1})},getMedications:function(t){return Vt.getFragments({addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,with_permission_to:!0,user_id:n.id||t.id,actor_id:n.id,actor_type:n.id?"User":void 0},{cache:!1})},addMedication:function(t,e){var a=n.user||t,i={addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,start_at:new Date(e.startDate).toJSON(),end_at:new Date(e.endDate).toJSON(),tags:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:n.id||t.id}],filters:[{context:"members",name:a.name||"".concat(a.first_name||""," ").concat(a.last_name||""),user_id:n.id||t.id}],data:JSON.stringify(e)};return n.id&&(i.actor_id=n.id,i.actor_type="User"),Vt.createFragment(i)},updateMedication:function(t,e,a){var i=n.user||t,s={addon:"health_vitals",kind:"VitalsMedicationReminderMedication",with_filters:!0,start_at:new Date(a.startDate).toJSON(),tags:[{context:"members",name:i.name||"".concat(i.first_name||""," ").concat(i.last_name||""),user_id:n.id||t.id}],filters:[{context:"members",name:i.name||"".concat(i.first_name||""," ").concat(i.last_name||""),user_id:n.id||t.id}],data:JSON.stringify(a)};return n.id&&(s.actor_id=n.id,s.actor_type="User"),Vt.updateFragment(e,s)},deleteMedication:function(t,e){return Vt.deleteFragment(e)},getSettings:function(t){return Vt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},saveSettings:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Vt.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(e)}})}};function It(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var At=d({props:{vitalsElement:String},data:function(){return{data:null,takenData:null}},mounted:function(){this.getData(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getData)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{todayData:function(){if(!this.data)return null;var t=(new Date).getTime(),e=[];return this.data.forEach((function(a){if(a.data.reminder){var i=new Date(a.data.startDate).getTime(),n=new Date(a.data.endDate).getTime();t>=i&&t<=n&&a.data.dosage.forEach((function(t){e.push({id:a.id,name:a.data.name,time:t.time,unit:t.unit,value:t.value})}))}})),e.sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1})),e.length?e:null}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this,e=new Date;function a(){return new Promise((function(e,a){Pt.getMedications(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))}))}e.setHours(0,0,0,0),Promise.all([a(),new Promise((function(a,i){Pt.getTaken(t.$root.user,{dateFrom:e,dateTo:new Date(e.getTime()+864e5)}).then((function(t){a(t)})).catch((function(t){i(t)}))}))]).then((function(e){var a=It(e,2),i=a[0],n=a[1];t.takenData=n,t.data=i,t.checkReminders()})).catch((function(t){console.log(t)}))},isNeedToTake:function(t){if(!this.todayData)return!1;if(this.isTaken(t)||this.isNotTaken(t))return!1;var e,a=t.time.split(":").map((function(t){return parseInt(t,10)})),i=new Date,n=i.getHours(),s=i.getMinutes();return n>a[0]?e=!0:n===a[0]&&s>=a[1]&&(e=!0),e},isTaken:function(t){var e;if(!this.takenData)return!1;var a=new Date;return a.setHours(0,0,0,0),this.takenData.forEach((function(i){if(!e){var n=new Date(i.data.date||i.start_at);n.setHours(0,0,0,0),t.id===i.data.medication_id&&t.time===i.data.time&&a.getTime()===n.getTime()&&i.data.taken&&(e=!0)}})),e},isNotTaken:function(t){var e;if(!this.takenData)return!1;var a=new Date;return a.setHours(0,0,0,0),this.takenData.forEach((function(i){if(!e){var n=new Date(i.data.date||i.start_at);n.setHours(0,0,0,0),t.id!==i.data.medication_id||t.time!==i.data.time||a.getTime()!==n.getTime()||i.data.taken||(e=!0)}})),e},checkReminders:function(){var t=this;t.todayData&&t.todayData.forEach((function(e){t.isNeedToTake(e)&&t.$f7.dialog.create({text:'\n            <div class="text-align-center">\n              <img src="'.concat(t.$addonAssetsUrl).concat(t.vitalsElement,'/remind.svg" height="80"/>\n            </div>\n            <p class="text-align-center">').concat(t.$t("health_vitals.medication_reminder.medication_time.text")," ").concat(e.name,"</p>\n          "),buttons:[{text:t.$t("health_vitals.medication_reminder.medication_time.snooze_button"),onClick:function(){Pt.takeMedication(t.$root.user,e.id,e.time,!1).then((function(){t.getData()}))}},{text:t.$t("health_vitals.medication_reminder.medication_time.confirm_button"),bold:!0,onClick:function(){Pt.takeMedication(t.$root.user,e.id,e.time,!0).then((function(){t.getData()}))}}]}).open()}))},onPageScroll:function(t){var e=this.$$(t.target).closest(".page-content");e.length&&(e[0].scrollTop>100?this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")):this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},Yt,[],!1,null,null,null);At.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/index.vue";var Nt=At.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.t("vital_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-start",label:t.t("startdate_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-end",label:t.t("enddate_label")}}),t._v(" "),a("f7-list-item",{attrs:{"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0},title:t.t("frequency_label"),after:t.t("frequency_units.0")}},[a("select",{domProps:{value:t.frequency},on:{change:function(e){t.frequency=parseInt(e.target.value,10)}}},t._l(8,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(t.t("frequency_units."+(e-1))))])})),0)]),t._v(" "),t._l(t.frequency,(function(e){return a("f7-list-item",{key:e,staticClass:"vitals-medication_reminder-dosage-input"},[a("div",{staticClass:"input"},[a("input",{staticClass:"time-input",attrs:{type:"text"},domProps:{value:t.dosage[e-1].time}})]),t._v(" "),a("div",{staticClass:"input",staticStyle:{width:"100px"}},[a("input",{attrs:{type:"number",placeholder:t.t("dosage_label")},domProps:{value:t.dosage[e-1].value},on:{input:function(a){t.dosage[e-1].value=a.target.value}}})]),t._v(" "),a("div",{staticClass:"input input-dropdown"},[a("select",{domProps:{value:t.dosage[e-1].unit||"bag"},on:{change:function(a){t.dosage[e-1].unit=a.target.value}}},[a("option",{attrs:{value:"bag"}},[t._v(t._s(t.t("dosage_unit.bag")))]),t._v(" "),a("option",{attrs:{value:"ml"}},[t._v(t._s(t.t("dosage_unit.ml")))]),t._v(" "),a("option",{attrs:{value:"pill"}},[t._v(t._s(t.t("dosage_unit.pill")))]),t._v(" "),a("option",{attrs:{value:"mg"}},[t._v(t._s(t.t("dosage_unit.mg")))]),t._v(" "),a("option",{attrs:{value:"drop"}},[t._v(t._s(t.t("dosage_unit.drop")))])])])])}))],2)],1)};Ft._withStripped=!0;var Rt=d({props:{vitalsElement:String},data:function(){var t=new Date;return t.setHours(0,0,0,0),{name:"",frequency:1,startDate:t,endDate:new Date(t.getTime()+864e6),dosage:[{value:"",unit:"bag",time:"10:00"}]}},computed:{allowSave:function(){if(this.name&&this.name.trim().length){var t=!0;if(this.dosage.forEach((function(e){(!e.value||e.value<1)&&(t=!1)})),t)return!0}return!1}},watch:{frequency:function(){for(var t=this,e=t.dosage[t.dosage.length-1].value,a=t.dosage[t.dosage.length-1].unit,i=t.dosage[t.dosage.length-1].time,n=0;n<t.frequency;n+=1)t.dosage[n]||(t.dosage[n]={value:e,unit:a,time:i});t.$nextTick((function(){t.createPickers()}))}},mounted:function(){var t,e=this;e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-start"),value:[e.startDate],minDate:new Date,on:{change:function(a,i){(e.startDate=new Date(i[0]),e.startDate.setHours(0,0,0,0),t)&&(t.params.minDate=e.startDate,new Date(t.value[0]).getTime()<new Date(e.startDate).getTime()&&t.setValue([e.startDate]))}}}),t=e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-end"),value:[e.endDate],on:{change:function(t,a){e.endDate=new Date(a[0]),e.endDate.setHours(0,0,0,0)}}}),e.createPickers()},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_add.").concat(t),e)},createPickers:function(){var t=this;t.$$(t.$el).find(".vitals-medication_reminder-dosage-input .time-input").each((function(e,a){a.f7PickerCreated||(a.f7PickerCreated=!0,t.$f7.picker.create({inputEl:a,value:[t.dosage[e].time.split(":")[0],t.dosage[e].time.split(":")[1]],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(a,i){t.dosage[e].time=i.join(":")}}}))}))},save:function(){var t=this,e=t.name,a=t.startDate,i=t.endDate,n=t.dosage,s=t.frequency;Pt.addMedication(t.$root.user,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(i).toJSON(),dosage:n.filter((function(t,e){return e<s})),frequency:s,reminder:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},Ft,[],!1,null,null,null);Rt.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/add.vue";var Ht=Rt.exports,Ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),t.loaded?a("div",{staticClass:"medication-toolbar",attrs:{slot:"fixed"},slot:"fixed"},[a("a",{attrs:{href:"#"},on:{click:t.deleteMedication}},[t._v(t._s(t.t("delete_button")))]),t._v(" "),a("a",{attrs:{href:"#"},on:{click:function(){return t.reminder?t.stopReminder():t.startReminder()}}},[t._v(t._s(t.t(t.reminder?"pause_button":"start_button")))])]):t._e(),t._v(" "),t.loaded?a("f7-list",{attrs:{"no-hairlines":""}},[a("f7-list-input",{attrs:{type:"text","inline-label":"",value:t.name,label:t.t("vital_label")},on:{input:function(e){t.name=e.target.value}}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-start",label:t.t("startdate_label")}}),t._v(" "),a("f7-list-input",{attrs:{type:"text","inline-label":"","input-id":"date-input-end",label:t.t("enddate_label")}}),t._v(" "),a("f7-list-item",{attrs:{"smart-select":"","smart-select-params":{openIn:"popover",closeOnSelect:!0},title:t.t("frequency_label"),after:t.t("frequency_units.0")}},[a("select",{domProps:{value:t.frequency},on:{change:function(e){t.frequency=parseInt(e.target.value,10)}}},t._l(8,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(t.t("frequency_units."+(e-1))))])})),0)]),t._v(" "),t._l(t.frequency,(function(e){return a("f7-list-item",{key:e,staticClass:"vitals-medication_reminder-dosage-input"},[a("div",{staticClass:"input"},[a("input",{staticClass:"time-input",attrs:{type:"text"},domProps:{value:t.dosage[e-1].time}})]),t._v(" "),a("div",{staticClass:"input",staticStyle:{width:"100px"}},[a("input",{attrs:{type:"number",placeholder:t.t("dosage_label")},domProps:{value:t.dosage[e-1].value},on:{input:function(a){t.dosage[e-1].value=a.target.value}}})]),t._v(" "),a("div",{staticClass:"input input-dropdown"},[a("select",{domProps:{value:t.dosage[e-1].unit||"bag"},on:{change:function(a){t.dosage[e-1].unit=a.target.value}}},[a("option",{attrs:{value:"bag"}},[t._v(t._s(t.t("dosage_unit.bag")))]),t._v(" "),a("option",{attrs:{value:"ml"}},[t._v(t._s(t.t("dosage_unit.ml")))]),t._v(" "),a("option",{attrs:{value:"pill"}},[t._v(t._s(t.t("dosage_unit.pill")))]),t._v(" "),a("option",{attrs:{value:"mg"}},[t._v(t._s(t.t("dosage_unit.mg")))]),t._v(" "),a("option",{attrs:{value:"drop"}},[t._v(t._s(t.t("dosage_unit.drop")))])])])])}))],2):t._e()],1)};Ut._withStripped=!0;var Jt=d({props:{id:String,vitalsElement:String},data:function(){var t=new Date;return t.setHours(0,0,0,0),{loaded:!1,name:"",frequency:1,startDate:t,endDate:new Date(t.getTime()+864e6),reminder:!0,dosage:[{value:"",unit:"bag",time:"10:00"}]}},computed:{allowSave:function(){if(this.name&&this.name.trim().length){var t=!0;if(this.dosage.forEach((function(e){(!e.value||e.value<1)&&(t=!1)})),t)return!0}return!1}},watch:{frequency:function(){for(var t=this,e=t.dosage[t.dosage.length-1].value,a=t.dosage[t.dosage.length-1].unit,i=t.dosage[t.dosage.length-1].time,n=0;n<t.frequency;n+=1)t.dosage[n]||(t.dosage[n]={value:e,unit:a,time:i});t.$nextTick((function(){t.createPickers()}))}},mounted:function(){var t,e=this;Pt.getMedication(e.$root.user,e.id).then((function(a){e.name=a.data.name,e.frequency=a.data.frequency,e.startDate=a.data.startDate,e.endDate=a.data.endDate,e.dosage=a.data.dosage,e.reminder=a.data.reminder,e.loaded=!0,e.$nextTick((function(){e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-start"),value:[e.startDate],minDate:new Date,on:{change:function(a,i){(e.startDate=new Date(i[0]),e.startDate.setHours(0,0,0,0),t)&&(t.params.minDate=e.startDate,new Date(t.value[0]).getTime()<new Date(e.startDate).getTime()&&t.setValue([e.startDate]))}}}),t=e.$f7.calendar.create({inputEl:e.$el.querySelector("#date-input-end"),value:[e.endDate],on:{change:function(t,a){e.endDate=new Date(a[0]),e.endDate.setHours(0,0,0,0)}}}),e.createPickers()}))}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_edit.").concat(t),e)},createPickers:function(){var t=this;t.$$(t.$el).find(".vitals-medication_reminder-dosage-input .time-input").each((function(e,a){a.f7PickerCreated||(a.f7PickerCreated=!0,t.$f7.picker.create({inputEl:a,value:[t.dosage[e].time.split(":")[0],t.dosage[e].time.split(":")[1]],formatValue:function(t){return"".concat(t[0],":").concat(t[1])},cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}],on:{change:function(a,i){t.dosage[e].time=i.join(":")}}}))}))},deleteMedication:function(){var t=this;Pt.deleteMedication(t.$root.user,t.id).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},stopReminder:function(){var t=this,e=t.name,a=t.startDate,i=t.endDate,n=t.dosage,s=t.frequency;Pt.updateMedication(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(i).toJSON(),dosage:n,frequency:s,reminder:!1}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},startReminder:function(){var t=this,e=t.name,a=t.startDate,i=t.endDate,n=t.dosage,s=t.frequency;Pt.updateMedication(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(i).toJSON(),dosage:n,frequency:s,reminder:!0}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))},save:function(){var t=this,e=t.name,a=t.startDate,i=t.endDate,n=t.dosage,s=t.frequency,l=t.reminder;void 0===l&&(l=!0),Pt.updateMedication(t.$root.user,t.id,{name:e,startDate:new Date(a).toJSON(),endDate:new Date(i).toJSON(),dosage:n,frequency:s,reminder:l}).then((function(){t.$events.$emit("".concat(t.vitalsElement,":updateRecords")),t.$f7router.back()}))}}},Ut,[],!1,null,null,null);Jt.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/edit.vue";var qt=Jt.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1)],1)],1)};Bt._withStripped=!0;var Wt={receiveMessage:!1},Gt=d({props:{vitalsElement:String},data:function(){return{settings:Wt}},mounted:function(){var t=this;Pt.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e,Wt=t.settings)}))},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},onMessagesChanges:function(t){this.settings.receiveMessage=t,Wt=this.settings,Pt.saveSettings(this.vitalsElement,this.settings)}}},Bt,[],!1,null,null,null);Gt.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/settings.vue";var zt=Gt.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{staticClass:"medication-history-header"},[t.data&&t.takenData?[a("div",{staticClass:"medication-history-header-icon",class:{"not-taken":!t.isLastDayTaken}}),t._v(" "),a("div",{staticClass:"medication-history-header-text"},[t._v(t._s(t.isLastDayTaken?t.t("notice_text.0"):t.t("notice_text.1")))])]:t._e()],2),t._v(" "),t._l(t.orderedData,(function(e,i){return a("div",{key:i,staticClass:"medication-history-card",on:{click:function(e){return t.toggleCard(i)}}},[a("div",{staticClass:"medication-history-card-date"},[a("span",[t._v(t._s(t.$moment(i).format("DD MMM YYYY")))]),t._v(" "),t.isOpenedCard(i)?a("span",[t._v(t._s(t.percentageTaken(e,i))+"%")]):t._e(),t._v(" "),a("f7-icon",{attrs:{f7:t.isOpenedCard(i)?"chevron_up":"chevron_right",size:"16"}})],1),t._v(" "),t.isOpenedCard(i)?t._l(e,(function(e,n){return a("div",{key:n,staticClass:"medication-history-card-content"},[a("div",{staticClass:"medication-history-card-icon",class:{taken:t.isTaken(e,i),"not-taken":t.isNotTaken(e,i)}}),t._v(" "),a("div",{staticClass:"medication-history-card-title"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"medication-history-card-value"},[t._v(t._s(e.time))])])})):a("div",{staticClass:"medication-history-card-content"},[100===t.percentageTaken(e,i)?a("div",{staticClass:"medication-history-card-icon taken"}):a("f7-gauge",{attrs:{size:46,value:t.percentageTaken(e,i)/100,"border-bg-color":"#FAE1C9","border-color":"#FF4500","border-width":8}}),t._v(" "),a("div",{staticClass:"medication-history-card-title"},[t._v(t._s(t.t("dosage_status")))]),t._v(" "),a("div",{staticClass:"medication-history-card-value"},[t._v(t._s(t.percentageTaken(e,i))+"%")])],1)],2)}))],2)};function Xt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Kt(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Lt._withStripped=!0;var Qt=d({props:{vitalsElement:String},data:function(){return{data:null,takenData:null,openedCards:[]}},mounted:function(){this.getData()},computed:{isLastDateTaken:function(){var t=this.$moment().format("YYYY-MM-DD");return!this.orderedData||(!this.orderedData[t]||100===this.percentageTaken(this.orderedData[t]))},orderedData:function(){var t=this;if(t.data){var e={};t.data.forEach((function(a){var i=new Date(a.data.startDate);if(!(i.getTime()>(new Date).getTime())){var n=new Date(a.data.endDate);n.getTime()>(new Date).getTime()&&(n=new Date).setHours(0,0,0,0);for(var s=(n.getTime()-i.getTime())/864e5+1,l=0;l<s;l+=1){var r,o=new Date(i).getTime()+864e5*l,c=t.$moment(o).format("YYYY-MM-DD");e[c]||(e[c]=[]),(r=e[c]).push.apply(r,Kt(a.data.dosage.map((function(t){return{id:a.id,name:a.data.name,time:t.time}}))))}}})),Object.keys(e).forEach((function(t){e[t].sort((function(t,e){return 60*parseInt(t.time.split(":")[0],10)+parseInt(t.time.split(":")[1],10)<60*parseInt(e.time.split(":")[0],10)+parseInt(e.time.split(":")[1],10)?-1:1}))}));var a=Object.keys(e).sort((function(t,e){return new Date(t).getTime()>new Date(e).getTime()?-1:1})),i={};return a.forEach((function(t){i[t]=e[t]})),i}}},methods:{isOpenedCard:function(t){return this.openedCards.indexOf(t)>=0},toggleCard:function(t){this.openedCards.indexOf(t)>=0?this.openedCards.splice(this.openedCards.indexOf(t),1):this.openedCards.push(t)},percentageTaken:function(t,e){var a=this,i=t.filter((function(t){return a.isTaken(t,e)}));return Math.round(i.length/t.length*100)},isTaken:function(t,e){var a;if(!this.takenData)return!1;var i=new Date(e);return i.setHours(0,0,0,0),this.takenData.forEach((function(e){if(!a){var n=new Date(e.data.date||e.start_at);n.setHours(0,0,0,0),t.id===e.data.medication_id&&t.time===e.data.time&&i.getTime()===n.getTime()&&e.data.taken&&(a=!0)}})),a},isNotTaken:function(t,e){var a;if(!this.takenData)return!1;var i=new Date(e);return i.setHours(0,0,0,0),this.takenData.forEach((function(e){if(!a){var n=new Date(e.data.date||e.start_at);n.setHours(0,0,0,0),t.id!==e.data.medication_id||t.time!==e.data.time||i.getTime()!==n.getTime()||e.data.taken||(a=!0)}})),a},getData:function(){var t=this;function e(){return new Promise((function(e,a){Pt.getMedications(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))}))}Promise.all([e(),new Promise((function(e,a){Pt.getTaken(t.$root.user).then((function(t){e(t)})).catch((function(t){a(t)}))}))]).then((function(e){var a=Xt(e,2),i=a[0],n=a[1];t.takenData=n,t.data=i})).catch((function(t){console.log(t)}))},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)}}},Lt,[],!1,null,null,null);Qt.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/history.vue";var Zt=Qt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-plan-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),t._l(t.medications,(function(e){return a("a",{key:e.id,staticClass:"medication-card",attrs:{href:"/health_vitals/"+t.vitalsElement+"/edit/"+e.id+"/"}},[a("div",{staticClass:"medication-card-date"},[t._v(t._s(t.$moment(e.data.startDate).format("D MMM YYYY"))+" - "+t._s(t.$moment(e.data.endDate).format("D MMM YYYY")))]),t._v(" "),a("div",{staticClass:"medication-card-content"},[a("div",{staticClass:"medication-card-icon"}),t._v(" "),a("div",{staticClass:"medication-card-name"},[t._v(t._s(e.data.name))])])])}))],2)};te._withStripped=!0;var ee=d({props:{vitalsElement:String},data:function(){return{medications:null}},mounted:function(){this.getMedications(),this.$events.$on("".concat(this.vitalsElement,":updateRecords"),this.getMedications)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getMedications)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".medication_plan.").concat(t),e)},getMedications:function(){var t=this;Pt.getMedications(t.$root.user).then((function(e){t.medications=e}))}}},te,[],!1,null,null,null);ee.options.__file="addons/health_vitals/1.0.0/src/addons/medication_reminder/pages/plan.vue";var ae=[{path:"/health_vitals/medication_reminder/",component:Nt},{path:"/health_vitals/medication_reminder/plan/",component:ee.exports},{path:"/health_vitals/medication_reminder/add/",component:Ht},{path:"/health_vitals/medication_reminder/edit/:id/",component:qt},{path:"/health_vitals/medication_reminder/settings/",component:zt},{path:"/health_vitals/medication_reminder/history/",component:Zt}];ae.forEach((function(t){t.options={props:{vitalsElement:"medication_reminder"}}}));var ie=ae,ne=[{path:"/health_vitals/pedometer/",component:D},{path:"/health_vitals/pedometer/add/",component:C},{path:"/health_vitals/pedometer/settings/",component:T},{path:"/health_vitals/pedometer/history/",component:A}];ne.forEach((function(t){t.options={props:{vitalsElement:"pedometer",chartType:"column",chartColor:"#1498CE",chartWeekSumsDays:!0,chartMonthSumsDays:!0}}}));var se=ne,le=[{path:"/health_vitals/temperature/",component:D},{path:"/health_vitals/temperature/add/",component:C},{path:"/health_vitals/temperature/settings/",component:T},{path:"/health_vitals/temperature/history/",component:A}];le.forEach((function(t){t.options={props:{vitalsElement:"temperature"}}}));var re=le,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-elment-index-page vitals-"+t.vitalsElement+"-index-page",attrs:{id:"vitals_element__index"},on:{"page:beforein":t.onPageBeforeIn,"page:beforeout":t.onPageBeforeOut},nativeOn:{"!scroll":function(e){return t.onPageScroll(e)}}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/settings/","icon-only":""}},[a("i",{class:"icon vitals-element-icon-settings vitals-"+t.vitalsElement+"-icon-settings"})]),t._v(" "),a("f7-link",{attrs:{href:"/health_vitals/"+t.vitalsElement+"/history/","icon-only":"","route-props":{goalValue:t.settings?t.settings.goal_value:0}}},[a("i",{class:"icon vitals-element-icon-chart vitals-"+t.vitalsElement+"-icon-chart"})])],1)],1),t._v(" "),a("f7-fab",{class:"vitals-element-fab vitals-"+t.vitalsElement+"-fab",attrs:{href:"/health_vitals/"+t.vitalsElement+"/add/"}},[a("f7-icon",{attrs:{f7:"add"}})],1),t._v(" "),a("div",{class:"vitals-element-index-header vitals-"+t.vitalsElement+"-index-header"},[a("div",{class:"vitals-element-index-header-icon vitals-"+t.vitalsElement+"-index-header-icon"}),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[t.settings&&t.settings.goal_value?a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-row"},[a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-label"},[t._v(t._s(t.t("goal_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.settings.goal_value)),a("span",[t._v(t._s(t.t("vital_unit."+(t.settings.goal_unit||5))))])])]):t._e(),t._v(" "),a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-row"},[a("div",{class:"vitals-"+t.vitalsElement+"-index-header-data-label"},[t._v(t._s(t.t("achieved_label")))]),t._v(" "),a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.todayValue)),a("span",[t._v(t._s(t.t("vital_unit."+(t.data[0].data.unit||5))))])])])]):t._e(),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-header-content vitals-"+t.vitalsElement+"-index-header-content"},[a("div",{class:"vitals-element-index-header-data vitals-"+t.vitalsElement+"-index-header-data"},[t._v(t._s(t.t("vital_label")))])]):t._e()]),t._v(" "),t.data&&!t.data.length?a("div",{class:"vitals-element-index-no-data vitals-"+t.vitalsElement+"-index-no-data"},[a("i",{class:"vitals-element-index-no-data-img vitals-"+t.vitalsElement+"-index-no-data-img"}),t._v(" "),a("span",[t._v(t._s(t.t("not_available")))])]):t._e(),t._v(" "),t.data&&t.data.length?a("div",{class:"vitals-element-index-cards vitals-"+t.vitalsElement+"-index-cards"},t._l(t.data,(function(e,i){return a("div",{key:i,class:"vitals-element-card vitals-"+t.vitalsElement+"-card"},[a("div",{class:"vitals-element-card-title vitals-"+t.vitalsElement+"-card-title"},[t._v(t._s(t.$moment(e.data.date).format("DD MMM YYYY"))+" "+t._s(e.data.time))]),t._v(" "),a("div",{class:"vitals-element-card-content vitals-"+t.vitalsElement+"-card-content"},[a("div",{class:"vitals-element-card-icon vitals-"+t.vitalsElement+"-card-icon"},[e.data.value<200?a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-cup.svg"}}):e.data.value<350?a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-glass.svg"}}):a("img",{attrs:{src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"}})]),t._v(" "),a("div",{class:"vitals-element-card-value vitals-"+t.vitalsElement+"-card-value"},[t._v(t._s(e.data.value)+" "),a("sub",[t._v(t._s(t.t("vital_unit."+(e.data.unit||0))))])])])])})),0):t._e()],1)};oe._withStripped=!0;var ce=window.tommy.api,de={getRecords:function(t,e){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.page,l=i.limit,r=i.dateFrom,o=i.dateTo;return t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join(""),r&&o&&(a=[new Date(r).toJSON(),new Date(o).toJSON()]),ce.getFragments({addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,with_permission_to:!0,user_id:n.id||e.id,actor_id:n.id,actor_type:n.id?"User":void 0,page:s||1,limit:l||50,date_range:a},{cache:!1})},addRecord:function(t,e,a){t=t.split(/[-_]/g).map((function(t){return t[0].toUpperCase()+t.substr(1)})).join("");var i=new Date(a.date);i.setHours(parseInt(a.time.split(":")[0],10),parseInt(a.time.split(":")[1],10));var s=n.user||e,l={addon:"health_vitals",kind:"Vitals".concat(t,"Item"),with_filters:!0,start_at:i.toJSON(),tags:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],filters:[{context:"members",name:s.name||"".concat(s.first_name||""," ").concat(s.last_name||""),user_id:n.id||e.id}],data:JSON.stringify(a)};return n.id&&(l.actor_id=n.id,l.actor_type="User"),ce.createFragment(l)},getSettings:function(t){return ce.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"GET",cache:!1}).then((function(t){return t?t.data?t.data:null:t}))},saveSettings:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ce.call({endpoint:"addons/health_vitals/install/settings/".concat(t),method:"PUT",data:{data:JSON.stringify(e)}})}};function ve(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],i=!0,n=!1,s=void 0;try{for(var l,r=t[Symbol.iterator]();!(i=(l=r.next()).done)&&(a.push(l.value),!e||a.length!==e);i=!0);}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ue=d({props:{vitalsElement:String},data:function(){return{data:null,settings:null}},mounted:function(){var t=this;t.getData(),t.$events.$on("".concat(t.vitalsElement,":updateRecords"),t.getData),de.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e)}))},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateRecords"),this.getData)},computed:{todayValue:function(){if(!this.data)return null;var t=0,e=new Date;return e.setHours(0,0,0,0),this.data.forEach((function(a){new Date(a.data.date).getTime()===e.getTime()&&(t+=a.data.value)})),t}},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".index.").concat(t),e)},getData:function(){var t=this;de.getRecords(t.vitalsElement,t.$root.user).then((function(e){t.data=e.filter((function(t){return t.data&&t.data.value})).sort((function(t,e){var a=new Date(t.data.date),i=ve(t.data.time.split(":"),2),n=i[0],s=i[1];a.setHours(parseInt(n,10),parseInt(s,10));var l=new Date(e.data.date),r=ve(e.data.time.split(":"),2),o=r[0],c=r[1];return l.setHours(parseInt(o,10),parseInt(c,10)),l-a}))}))},onPageScroll:function(t){var e=this.$$(t.target).closest(".page-content");e.length&&(e[0].scrollTop>100?this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")):this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar")))},onPageBeforeIn:function(){this.$f7router.view.$navbarEl.addClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))},onPageBeforeOut:function(){this.$f7router.view.$navbarEl.removeClass("vitals-element-index-navbar vitals-".concat(this.vitalsElement,"-index-navbar"))}}},oe,[],!1,null,null,null);ue.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/index.vue";var he=ue.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-manual-add-page vitals-"+t.vitalsElement+"-manual-add-page",attrs:{id:"vitals_element__add"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-list",{attrs:{"no-chevron":"","no-hairlines":"","no-hairlines-between":""}},[a("f7-list-item",{attrs:{link:"",title:""+t.t("option_a_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(150)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-cup.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_b_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(220)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-glass.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_c_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(350)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{attrs:{link:"",title:""+t.t("option_d_label")+t.t("vital_unit.5")},on:{click:function(e){return t.addValue(400)}}},[a("img",{attrs:{slot:"media",src:""+t.$addonAssetsUrl+t.vitalsElement+"/card-icon-bottle.svg"},slot:"media"})]),t._v(" "),a("f7-list-item",{class:"vitals-"+t.vitalsElement+"-manual-add-custom-button",attrs:{link:"",title:""+t.t("custom_button")},on:{click:t.addCustom}})],1)],1)};me._withStripped=!0;var _e=d({props:{vitalsElement:String},data:function(){return{}},computed:{allowSave:function(){return this.value&&this.value>0}},mounted:function(){},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".manual_enter.").concat(t),e)},addCustom:function(){var t=this;t.$f7.dialog.create({text:t.$t("health_vitals.water_tracker.custom_amount.text"),content:'<div class="dialog-input-field item-input"><div class="item-input-wrap"><input type="number" class="dialog-input"></div></div>',buttons:[{text:t.$t("health_vitals.water_tracker.custom_amount.cancel_button"),keyCodes:[27]},{text:t.$t("health_vitals.water_tracker.custom_amount.confirm_button"),bold:!0,color:"red",keyCodes:[13]}],onClick:function(e,a){var i=e.$el.find(".dialog-input").val();1===a&&i&&t.addValue(parseFloat(i))},destroyOnClose:!0}).open()},addValue:function(t){var e=this,a=new Date,i=(new Date).getHours();i<10&&(i="0".concat(i));var n=(new Date).getMinutes();n<10&&(n="0".concat(n));var s="".concat(i,":").concat(n);a.setHours(0,0,0,0),de.addRecord(e.vitalsElement,e.$root.user,{value:t,date:new Date(a).toJSON(),time:s,unit:5}).then((function(){e.$events.$emit("".concat(e.vitalsElement,":updateRecords")),e.$f7router.back()}))}}},me,[],!1,null,null,null);_e.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/add.vue";var fe=_e.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-settings-page vitals-"+t.vitalsElement+"-settings-page",attrs:{id:"vitals_element__settings"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("div",{class:"vitals-element-settings-header vitals-"+t.vitalsElement+"-settings-header"},[a("div",{class:"vitals-element-settings-icon vitals-"+t.vitalsElement+"-settings-icon"}),t._v(" "),a("div",{class:"vitals-element-settings-center-icon vitals-"+t.vitalsElement+"-settings-center-icon"})]),t._v(" "),a("div",{class:"vitals-element-settings-text vitals-"+t.vitalsElement+"-settings-text"},[a("p",[t._v(t._s(t.t("vital_text")))])]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("chat_label")}},[a("f7-toggle",{attrs:{slot:"after",checked:t.settings.receiveMessage},on:{"toggle:change":t.onMessagesChanges},slot:"after"})],1),t._v(" "),a("f7-list-item",{attrs:{title:t.t("plan_label"),link:"/vitals_water_tracker/plan/",after:t.settings.goal_value?""+t.settings.goal_value+t.t("vital_unit."+t.settings.goal_unit):"","route-props":{settings:t.settings}}})],1)],1)};pe._withStripped=!0;var ge={receiveMessage:!1,goal_value:0,goal_start_time:"08:00",goal_end_time:"22:00",goal_time_interval:60,goal_unit:5},be=d({props:{vitalsElement:String},data:function(){return{settings:ge}},mounted:function(){var t=this;de.getSettings(t.vitalsElement).then((function(e){e&&(t.settings=e,ge=t.settings)})),t.$events.$on("".concat(t.vitalsElement,":updateGoal"),t.updateGoal)},beforeDestroy:function(){this.$events.$off("".concat(this.vitalsElement,":updateGoal"),this.updateGoal)},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".settings.").concat(t),e)},updateGoal:function(t){this.settings.goal_value=t.value,this.settings.goal_start_time=t.start_time,this.settings.goal_end_time=t.end_time,this.settings.goal_time_interval=t.time_interval,this.settings.goal_unit=t.unit,ge=this.settings,de.saveSettings(this.vitalsElement,this.settings)},onMessagesChanges:function(t){this.settings.receiveMessage=t,ge=this.settings,de.saveSettings(this.vitalsElement,this.settings)}}},pe,[],!1,null,null,null);be.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/settings.vue";var ye=be.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-element-history-page vitals-"+t.vitalsElement+"-history-page",attrs:{id:"vitals_element__history"}},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))])],1),t._v(" "),a("f7-block",[a("f7-segmented",[a("f7-button",{attrs:{active:"day"===t.range},on:{click:function(e){t.range="day"}}},[t._v(t._s(t.t("date_options.0")))]),t._v(" "),a("f7-button",{attrs:{active:"week"===t.range},on:{click:function(e){t.range="week"}}},[t._v(t._s(t.t("date_options.1")))]),t._v(" "),a("f7-button",{attrs:{active:"month"===t.range},on:{click:function(e){t.range="month"}}},[t._v(t._s(t.t("date_options.2")))])],1)],1),t._v(" "),a("div",{class:"vitals-element-chart-clicked vitals-"+t.vitalsElement+"-chart-clicked"},[a("span",[t._v(t._s(t.clickedDate))]),t._v(" "),a("span",[t._v(t._s(t.clickedValue))])]),t._v(" "),t.data&&t.data.length?["day"===t.range?a("div",{key:"chart-day",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartDay"})]):t._e(),t._v(" "),"week"===t.range?a("div",{key:"chart-week",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartWeek"})]):t._e(),t._v(" "),"month"===t.range?a("div",{key:"chart-month",class:"vitals-element-chart vitals-"+t.vitalsElement+"-chart"},[a("div",{ref:"chartMonth"})]):t._e()]:t._e()],2)};function Ee(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function ke(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(a),!0).forEach((function(e){we(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function we(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}De._withStripped=!0;var $e=d({props:{vitalsElement:String,goalValue:Number},data:function(){return{data:null,clicked:null,range:"day"}},mounted:function(){var t=this,e=(new Date).setMonth((new Date).getMonth()-1),a=new Date;de.getRecords(t.vitalsElement,t.$root.user,{dateFrom:e,dateTo:a}).then((function(e){t.data=(e||[]).sort((function(e,a){var i=t.itemDate(e),n=t.itemDate(a);return i.getTime()-n.getTime()})),t.$nextTick((function(){t.initChart()}))}))},watch:{range:function(){var t=this;t.clicked=null,t.$nextTick((function(){t.initChart()}))}},computed:{clickedDate:function(){return this.clicked?this.$moment(this.clicked.x).format("DD MMM YYYY"):""},clickedValue:function(){if(!this.clicked)return"";var t=this.data[this.clicked.id];return"".concat(this.clicked.y," ").concat(this.t("vital_unit.".concat(t.data.unit)))},todayValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)},weekValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth(),e.getDate()-7);var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)},monthValues:function(){var t=this;if(!t.data)return null;var e=new Date;e.setHours(0,0,0,0),e.setMonth(e.getMonth()-1,e.getDate());var a=t.data.filter((function(a){return t.itemDate(a).getTime()>e.getTime()}));return t.sumValuesByDay(a)}},methods:{sumValuesByDay:function(t){var e=this,a=[],i=e.itemDate(t[0]);i.setHours(0,0,0,0);var n=0;return t.forEach((function(t){var s=e.itemDate(t);s.setHours(0,0,0,0),s.getTime()!==i.getTime()&&(n+=1,i=s),a[n]||(a[n]={x:i,y:0,id:e.data.indexOf(t)}),a[n].y+=parseInt(t.data.value,10)})),a},itemDate:function(t){var e=new Date(t.data.date),a=parseInt(t.data.time.split(":")[0],10),i=parseInt(t.data.time.split(":")[1],10);return e.setHours(a,i),e},t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".history.").concat(t),e)},initChart:function(){var t=this,e=t.range;if(t.data&&t.data.length){var a={chart:{type:"column"},credits:{enabled:!1},legend:{enabled:!1},title:null,tooltip:{enabled:!1},xAxis:{type:"datetime"},yAxis:ke({title:null},t.goalValue?{plotLines:[{color:"#71A7E7",width:2,value:t.goalValue}]}:{}),time:{timezoneOffset:(new Date).getTimezoneOffset()}},i={color:"#71A7E7",cursor:"pointer",point:{events:{click:function(){t.clicked=this},select:function(){t.clicked=this}}}};"day"===e&&t.$highcharts.chart(t.$refs.chartDay,ke({},a,{series:[ke({},i,{data:t.todayValues})]})),"week"===e&&t.$highcharts.chart(t.$refs.chartWeek,ke({},a,{series:[ke({},i,{data:t.weekValues})]})),"month"===e&&t.$highcharts.chart(t.$refs.chartMonth,ke({},a,{series:[ke({},i,{data:t.monthValues})]}))}}}},De,[],!1,null,null,null);$e.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/history.vue";var xe=$e.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("f7-page",{class:"vitals-"+t.vitalsElement+"-plan-page"},[a("f7-navbar",[a("tommy-nav-back"),t._v(" "),a("f7-nav-title",[t._v(t._s(t.t("title")))]),t._v(" "),a("f7-nav-right",[t.allowSave?a("f7-link",{attrs:{href:"#","icon-only":""},on:{click:t.save}},[a("i",{staticClass:"icon f7-icons"},[t._v("check")])]):t._e()],1)],1),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-input",{attrs:{type:"number","inline-label":"",value:t.value,min:"1",label:t.t("vital_label")},on:{input:function(e){t.updateGoalValue("value",parseFloat(e.target.value))}}},[a("span",{staticClass:"vitals-element-input-unit",attrs:{slot:"inner"},slot:"inner"},[t._v(t._s(t.t("vital_unit."+t.unit)))])])],1),t._v(" "),a("f7-block-title",[t._v(t._s(t.t("reminder_label")))]),t._v(" "),a("f7-list",{staticClass:"no-hairlines"},[a("f7-list-item",{attrs:{title:t.t("start_label"),after:t.start_time,link:""},on:{click:function(e){t.openTimePicker("start_time",t.t("start_label"))}}}),t._v(" "),a("f7-list-item",{attrs:{title:t.t("end_label"),after:t.end_time,link:""},on:{click:function(e){t.openTimePicker("end_time",t.t("end_label"))}}}),t._v(" "),a("f7-list-item",{attrs:{title:t.t("interval_label"),after:t.formatTimeInterval(t.time_interval),link:""},on:{click:function(e){t.openTimePicker("time_interval",t.t("interval_label"))}}})],1)],1)};Ce._withStripped=!0;var Se=d({props:{vitalsElement:String,settings:Object},data:function(){var t=this.settings;return{value:t.goal_value,start_time:t.goal_start_time,end_time:t.goal_end_time,time_interval:t.goal_time_interval,unit:t.goal_unit,allowSave:!1}},mounted:function(){},methods:{t:function(t,e){return this.$t("health_vitals.".concat(this.vitalsElement,".drinking_plan.").concat(t),e)},formatTimeInterval:function(t){var e=Math.floor(t/60),a=t-60*Math.floor(t/60);return e<10&&(e="0".concat(e)),a<10&&(a="0".concat(a)),"".concat(e,":").concat(a)},updateGoalValue:function(t,e){this[t]=e,this.allowSave=!0},openTimePicker:function(t,e){var a,i=this,n=i[t],s=!1;"number"==typeof n&&(s=!0,n=i.formatTimeInterval(n)),i.$f7.dialog.create({title:e,text:'<div class="vitals-water_tracker-dialog-time-picker"></div>',buttons:[{text:i.$t("label.ok"),bold:!0,color:"red",onClick:function(){var e="".concat(a.value[0],":").concat(a.value[1]);s&&(e=60*a.value[0]+parseInt(a.value[1],10)),i.updateGoalValue(t,e)}}],on:{open:function(){a=i.$f7.picker.create({toolbar:!1,value:[n.split(":")[0],n.split(":")[1]],containerEl:".vitals-water_tracker-dialog-time-picker",cols:[{values:function(){for(var t=[],e=0;e<24;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()},{divider:!0,content:":"},{values:function(){for(var t=[],e=0;e<60;e+=1)e<10?t.push("0".concat(e)):t.push(e.toString());return t}()}]})},close:function(){a.destroy()}}}).open()},save:function(){this.$events.$emit("".concat(this.vitalsElement,":updateGoal"),{value:this.value,start_time:this.start_time,end_time:this.end_time,time_interval:this.time_interval,unit:this.unit}),this.$f7router.back()}}},Ce,[],!1,null,null,null);Se.options.__file="addons/health_vitals/1.0.0/src/addons/water_tracker/pages/plan.vue";var Oe=[{path:"/health_vitals/water_tracker/",component:he},{path:"/health_vitals/water_tracker/add/",component:fe},{path:"/health_vitals/water_tracker/settings/",component:ye},{path:"/health_vitals/water_tracker/history/",component:xe},{path:"/health_vitals/water_tracker/plan/",component:Se.exports}];Oe.forEach((function(t){t.options={props:{vitalsElement:"water_tracker"}}}));var Me=Oe,Te=[{path:"/health_vitals/weight/",component:D},{path:"/health_vitals/weight/add/",component:C},{path:"/health_vitals/weight/settings/",component:T},{path:"/health_vitals/weight/history/",component:A}];Te.forEach((function(t){t.options={props:{vitalsElement:"weight"}}}));var je=Te;function Ye(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ve=[{path:"/health_vitals/",component:u},{path:"/health_vitals/panel/",panel:{component:_}}].concat(Ye(F),Ye(st),Ye(rt),Ye(ct),Ye(jt),Ye(ie),Ye(se),Ye(re),Ye(Me),Ye(je));e.default=Ve}]).default;